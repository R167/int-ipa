{"version":3,"sources":["constants.ts","utils/error.ts","data/manifest.ts","utils/parsers/parse.ts","utils/normalize.ts","data/task.ts","utils/parsers/task.ts","data/taskList.ts","Manifest.tsx","utils/parsers/manifest.ts","utils/usePersistentState.ts","utils/Debug.tsx","components/Task/SubmitCode.tsx","components/keyboard/useKeyboard.ts","components/keyboard/IPAInput.tsx","components/keyboard/common.ts","utils/ipa.ts","components/keyboard/Pulmonics.tsx","components/keyboard/NonPulmonics.tsx","components/keyboard/trapezium.svg","components/keyboard/Vowels.tsx","components/keyboard/GridDisplay.tsx","components/keyboard/Diacritics.tsx","components/keyboard/Other.tsx","components/keyboard/Suprasegmentals.tsx","components/keyboard/Keyboard.tsx","components/keyboard/StickyIPA.tsx","components/Task/WordInput.tsx","components/ConfirmDialog.tsx","components/Task/PlayButton.tsx","components/CodeBlock.tsx","components/Markdown.tsx","components/Task/Task.tsx","components/ErrorMessage.tsx","components/Task/LoadTask.tsx","components/Task/RouteTask.tsx","components/Task/TaskList.tsx","components/ClassPage.tsx","utils/parsers/taskList.ts","components/Homepage.tsx","components/TypeIPA.tsx","components/Tools/ToolLoader.tsx","Router.tsx","utils/styles.ts","components/Header.tsx","config.ts","utils/AudioContext.ts","App.tsx","index.tsx","utils/validation.ts","components/NotFound.tsx"],"names":["BASE_URL","process","MANIFEST_FILE","fileUrl","folder","path","IPAError","Error","getLines","lines","lineIdx","context","lineArr","split","line","start","Math","max","errorLine","slice","map","contents","i","num","error","indexToLines","str","idx","findIndex","ln","this","pos","length","ParseError","constructor","data","err","super","message","dat","headline","n","linePos","ValidateError","document","doc","node","getIn","range","ResourceError","msg","orig","originalMessage","ManifestFile","object","classes","array","name","string","hidden","optional","boolean","parse","struct","YAML","parseDocument","prettyErrors","warnings","forEach","warning","console","warn","errors","fileContents","toJSON","valid","validate","CANONICAL_FORMS","Map","MATCHER","RegExp","Array","from","keys","join","normalize","replace","match","get","Macros","record","Segment","union","ValidateSegment","refine","segment","index","parent","branch","isArray","key","includes","Object","values","reduce","run","curr","Word","display","audio","instructions","segments","TaskFile","author","title","salt","macros","words","DEFAULT_MESSAGE","END_MESSAGE","KLEENE_REPLACE","escapeStringRegexp","ANY_REPLACE","matchSegment","rawInput","correct","input","explanations","wildcards","find","matcher","wildcard","kleene","wildcardToRegex","test","expandMacro","encountered","hasOwnProperty","newEncountered","results","value","expanded","concat","push","pickValues","ops","result","parseTask","metadata","getMacros","word","validSegments","sym","expand","set","lastElement","final","getSegments","TaskInfo","description","file","TaskListFile","tasks","ManifestContext","React","createContext","fetchManifest","async","req","fetch","body","text","useManifest","asyncManifest","useContext","errorShown","Manifest","children","manifest","useAsync","YAMLError","alert","Provider","usePersistentState","defaultValue","persistOnLoad","mount","useRef","setValue","useState","stored","localStorage","getItem","JSON","useDebugValue","setter","useCallback","prevState","useEffect","current","setItem","stringify","DebugContext","useDebugContext","Debug","props","debug","setDebug","addEventListener","e","metaKey","shiftKey","d","DEFAULTS","prompt","SubmitCode","Op","existingName","onSubmit","controls","setName","setRun","open","setOpen","inputRef","timer","computeHash","displayValue","copyText","select","setSelectionRange","execCommand","window","clearTimeout","setTimeout","button","Button","variant","color","onClick","startIcon","type","preventDefault","trim","Grid","container","spacing","alignItems","justify","item","xs","sm","md","lg","Typography","component","gutterBottom","Tooltip","PopperProps","disablePortal","disableFocusListener","disableHoverListener","disableTouchListener","TextField","label","InputProps","readOnly","fullWidth","onChange","target","reducer","state","action","cursor","ref","selectionStart","cursorAfter","selectionEnd","Delete","Append","Set","Type","useKeyboard","dispatch","useReducer","handleKeyboard","char","handleType","handleDelete","val","useLayoutEffect","oldFocus","activeElement","focus","blur","useStyles","makeStyles","theme","breakpoints","up","fontSize","noRightMargin","marginRight","helpTextSize","IPAInput","placeholder","onType","onDelete","header","onCheck","checkDescription","helpText","headerTooltip","handleSubmit","handleEnter","check","enterDelay","IconButton","aria-label","onMouseDown","helperText","className","headerContent","InputAdornment","disablePointerEvents","disableTypography","position","positionStart","placement","TransitionComponent","Fade","TransitionProps","timeout","FormControl","InputLabel","htmlFor","OutlinedInput","id","onKeyPress","inputProps","spellCheck","autoCorrect","autoComplete","style","lineHeight","endAdornment","startAdornment","Collapse","in","FormHelperText","borderColor","palette","lighten","fade","divider","darken","PLACES","MANNERS","IMPOSSIBLE","NUL","PULMONICS","CLICKS","IMPLOSIVES","EJECTIVES","FILLER","VOWEL_HEIGHTS","VOWEL_FRONTEDNESS","VOWELS","DIACRITICS","ipa","examples","MISC","SUPRASEGMENTALS","voiceless","backgroundColor","hover","voiced","impossible","disabledBackground","symbol","padding","userSelect","leftSideBorder","borderLeft","rightSideBorder","borderRight","caps","minWidth","Pulmonics","clickCallback","undefined","Cell","x","y","hasBorders","TableCell","align","clsx","TableContainer","Table","size","TableHead","TableRow","place","colSpan","TableBody","manner","memo","textAlign","descr","verticalAlign","NonPulmonics","sounds","useMemo","click","span","row","j","_extends","assign","arguments","source","prototype","call","apply","_ref","strokeWidth","fill","strokeLinecap","strokeLinejoin","SvgTrapezium","titleId","svgRef","xmlns","viewBox","preserveAspectRatio","fillRule","clipRule","ForwardRef","root","width","height","outerQuad","minHeight","fullRel","trapezium","stroke","primary","quad","left","top","element","transform","overflow","rounded","unrounded","right","mid","borderRadius","paperBack","zIndex","content","background","paper","fullHeight","vowelPos","vowelHeight","vowelCoords","offset","Vowels","VowelElement","vowels","coords","Box","noCenter","center","vowelChart","wrap","direction","descriptionParent","justifyContent","flexDirection","bordered","boxShadow","GridDisplay","genSym","combine","combined","Diacritics","Other","Suprasegmentals","childOrder","orderChildren","styles","order","child","Keyboard","Paper","sticky","pointerEvents","marginBottom","default","StickyIPA","useTheme","elevation","paddingY","success","main","dark","reset","SoftReset","is","Reset","SetHeader","NextSegment","ClearError","ErrorMessage","errorMessage","WordInput","handleCheck","currentValue","headerValue","ConfirmDialog","onClose","Dialog","disableBackdropClick","disableEscapeKeyDown","maxWidth","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","PlayButton","baseUrl","audioFile","audioUrl","URL","toString","Audio","disable","currentTime","play","catch","src","disabled","codeBlock","inline","CodeBlock","block","comp","klass","typeTag","v","opts","disableParsingRawHTML","overrides","h1","h2","h3","h4","h5","h6","p","pre","code","Markdown","options","currWord","DismissModal","showModal","Submit","modalWord","ModalExit","ShowReset","resetModal","CloseReset","inputKey","random","useDispatch","op","Task","task","noPersist","persistKey","persist","setPersist","rest","anchorEl","setAnchorEl","showWord","dismissModal","handleModalExit","handleShowReset","handleReset","scroll","behavior","s","aria-controls","aria-haspopup","event","currentTarget","Menu","keepMounted","Boolean","MenuListProps","subheader","ListSubheader","MenuItem","wordInstructions","mb","min","mountOnEnter","unmountOnExit","aria-describedby","disableRestoreFocus","onExited","disableFocusRipple","fileDump","typography","defaultHeader","o","issue","data-line","padStart","fetchTask","taskFileUrl","log","TypeError","status","statusText","Status","LoadTask","origin","loading","transitionDelay","CircularProgress","RouteRemoteTask","location","useLocation","config","URLSearchParams","search","url","decode","BuildTaskLink","setUrl","params","encode","Link","to","href","RouteTask","assignment","useParams","taskLink","TaskList","alignContent","flexWrap","fetchClassTasks","classId","ClassPage","classTasks","pathname","Homepage","RLink","TypeIPA","ToolList","lazy","ToolLoader","fallback","Router","exact","NotFound","notchGutters","paddingLeft","paddingRight","itemGutters","gutters","Loading","ListItem","ListItemText","LinearProgress","ListLink","icon","selected","matchPath","ListItemIcon","DarkSwitch","withStyles","switchBase","grey","checked","track","Switch","Header","drawer","setDrawer","changeDarkMode","openDrawer","closeDrawer","toggleDarkMode","list","List","Divider","Drawer","anchor","role","darkMode","AppBar","Toolbar","edge","AudioContext","webkitAudioContext","lightTheme","blue","secondary","indigo","darkTheme","containerRoot","boxSizing","margin","debugRoot","App","prefersDarkMode","useMediaQuery","setDark","create","removeEventListener","latencyHint","createMuiTheme","ThemeProvider","CssBaseline","Container","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","ReactDOM","render","StrictMode","getElementById","smoothscroll","polyfill","INVALID","EPOCH","Date","DEFAULT_SALT","time","effectiveSalt","outName","normName","hashName","toLowerCase","outTime","now","floor","getTime","minuteOfYear","longer","shorter","interleaved","charAt","interleave","bytes","buf","crypto","subtle","digest","fromUint8Array","Uint8Array","sha1sum","TextEncoder","checkHash","hash","sha","encoded","parseInt","deinterleave","date","timestamp","millis","timestampToDate","lowerHash"],"mappings":"4MAGO,MAAMA,EAAQ,UAAMC,IAAN,WAGRC,EAAa,UAAMF,EAAN,kBAMbG,EAAU,CAACC,EAAgBC,IAAjB,UAAqCL,EAArC,YAAiDI,EAAjD,YAA2DC,GCR3E,MAAMC,UAAiBC,OAS9B,MAAMC,EAAW,CAACC,EAA0BC,EAAiBC,KAC3D,MAAMC,EAA2B,kBAAVH,EAAqBA,EAAMI,MAAM,MAAQJ,EAC1DK,EAAOJ,EAAU,EAEjBK,EAAQC,KAAKC,IAAIH,EAAOH,EAAS,GACjCO,EAAYF,KAAKC,IAAIH,EAAMA,EAAOH,GAAWI,EAEnD,OAAID,EAAO,EACF,GAEAF,EAAQO,MAAML,EAAOH,EAASG,EAAOH,EAAU,GAAGS,KAAI,CAACC,EAAUC,KAAX,CAC3DC,IAAKR,EAAQO,EAAI,EACjBD,WACAG,MAAOF,IAAMJ,OAKbO,EAAe,CAACC,EAAaC,EAAahB,KAC9C,MAAMF,EAAQiB,EAAIb,MAAM,MAGlBC,EAAOL,EAAMmB,WACjB,SAAiCC,GAE/B,OADAC,KAAKC,KAAOF,EAAGG,OAAS,EACjBL,EAAMG,KAAKC,MAEpB,CAAEA,IAAK,IAGT,OAAOvB,EAASC,EAAOK,EAAO,EAAGH,IAY5B,MAAMsB,UAAmB3B,EAK9B4B,YAAYC,EAAcC,GACxBC,MAAMD,EAAIE,SAD8B,KAJ1CC,SAI0C,OAH1CH,SAG0C,OAF1CI,SAAW,qBAITV,KAAKS,IAAMJ,EACXL,KAAKM,IAAMA,EAGbzB,QAAQ8B,EAAI,GAAI,IAAD,EACb,MAAMC,EAAO,UAAGZ,KAAKM,IAAIM,eAAZ,aAAG,EAAkB3B,MAClC,OAAI2B,EACKlC,EAASsB,KAAKS,IAAKG,EAAQ5B,KAAM2B,GAEjC,IAKN,MAAME,UAAsBrC,EAMjC4B,YAAYC,EAAcS,EAAoBR,GAC5CC,MAAMD,EAAIE,SADoD,KALhEC,SAKgE,OAJhEM,SAIgE,OAHhET,SAGgE,OAFhEI,SAAW,wBAITV,KAAKS,IAAMJ,EACXL,KAAKe,IAAMD,EACXd,KAAKM,IAAMA,EAGbzB,QAAQ8B,EAAI,GACV,MAAMK,EAAOhB,KAAKe,IAAIE,MAAMjB,KAAKM,IAAI/B,MAAM,GAC3C,OAAOoB,EAAaK,KAAKS,IAAKO,EAAKE,MAAM,GAAIP,IAI1C,MAAMQ,UAAsB3C,EAGjC4B,YAAYgB,EAAaC,GACvBd,MAAMa,GADgC,KAFxCE,qBAEwC,EAEtCtB,KAAKsB,gBAAkBD,G,YChGpB,MAAME,EAAeC,YAAO,CACjCC,QAASC,YACPF,YAAO,CACLG,KAAMC,cACNtD,OAAQsD,cACRC,OAAQC,YAASC,oB,qBCLhB,MAAMC,EAAQ,CAAOzC,EAAkB0C,KAC5C,MAAMlB,EAAMmB,IAAKC,cAAc5C,EAAU,CAAE6C,cAAc,IAIzD,GAFArB,EAAIsB,SAASC,SAASC,GAAYC,QAAQC,KAAKF,KAE3CxB,EAAI2B,OAAOxC,OAAS,EAGtB,MADAa,EAAI2B,OAAOJ,SAAShC,GAAQkC,QAAQ9C,MAAMY,KACpC,IAAIH,EAAWZ,EAAUwB,EAAI2B,OAAO,IAE5C,MAAMC,EAAe5B,EAAI6B,UAElBtC,EAAKuC,GAASC,YAASH,EAAcV,GAC5C,IAAKY,EAAO,CACV,IAAKvC,EACH,MAAM,IAAI9B,EAAS,0CAErB,MAAM,IAAIqC,EAActB,EAAUwB,EAAKT,GAGzC,OAAOuC,G,qBCrBT,MAAME,EAAkB,IAAIC,IAAI,CAC9B,CAAC,SAAK,iBACN,CAAC,SAAK,iBACN,CAAC,SAAK,gBACN,CAAC,SAAK,kBASFC,EAAU,IAAIC,OAAOC,MAAMC,KAAKL,EAAgBM,QAAQC,KAAK,KAAM,MAO1DC,MALI3D,GACEA,EAAI2D,UALZ,QAMOC,QAAQP,GAAUQ,GAAUV,EAAgBW,IAAID,IAAU,WCH9E,MAAME,EAASC,YAAOhC,cAAUF,YAAME,gBAEhCiC,EAAUD,YAAOhC,cAAUkC,YAAM,CAAC/B,cAAWH,iBAE7CmC,EAAkBC,YAAOH,EAAS,WAAW,CAACI,EAASpF,KAC3D,MAAMqF,EAAQrF,EAAQN,KAAKM,EAAQN,KAAK2B,OAAS,GAC3CiE,EAAStF,EAAQuF,OAAOvF,EAAQuF,OAAOlE,OAAS,GAGtD,GAAqB,kBAAVgE,IAAuBf,MAAMkB,QAAQF,GAC9C,MAAO,oCAGT,IAAK,MAAMG,KAAOL,EAChB,IAAKK,EAAIC,SAAS,QAAUD,EAAIC,SAAS,QAA0B,IAAjBN,EAAQK,GACxD,MAAO,mDAIX,GAAIJ,EAAQC,EAAOjE,OAAS,EAAG,CAC7B,IAAoB,IAAhB+D,EAAQ,IACV,MAAM,qDAGR,GAAIO,OAAOC,OAAOR,GAASS,QAAO,CAACC,EAAcC,IAASD,IAAgB,IAATC,IAAe,GAC9E,MAAM,yDAIR,IAAoB,IAAhBX,EAAQ,IACV,IAAK,MAAMK,KAAOL,EAChB,GAAY,KAARK,IAA+B,IAAjBL,EAAQK,GACxB,MAAO,kFAMf,OAAO,KAGHO,EAAOrD,YAAO,CAClBsD,QAASlD,cACTmD,MAAOjD,YAASF,eAChBoD,aAAclD,YAASF,eACvBqD,SAAUvD,YAAMqC,KAGLmB,EAAW1D,YAAO,CAC7B2D,OAAQvD,cACRwD,MAAOxD,cACPyD,KAAMvD,YAASF,eACfoD,aAAclD,YAASF,eACvB0D,OAAQxD,YAAS6B,GACjB4B,MAAO7D,YAAMmD,KChCFW,EAAkB,uCAClBC,EAAc,iDAErBC,EAAiB,IAAIxC,OAAOyC,IAAmBA,IAAmB,QAAS,KAC3EC,EAAc,IAAI1C,OAAOyC,IAAmBA,IAAmB,MAAO,KAa/DE,EAAe,CAACC,EAAkB7B,KAC7C,IAAKA,EACH,MAAO,CAAE8B,SAAS,EAAOvF,QAASiF,GAGpC,MAAMO,EAAQzC,EAAUuC,GAExB,IAAItF,EACJ,GAAIyD,EAAQ8B,QAAQxB,SAASyB,GAC3B,MAAO,CAAED,SAAS,GACb,GAAKvF,EAAUyD,EAAQgC,aAAavC,IAAIsC,GAC7C,MAAO,CAAED,SAAS,EAAOvF,QAASA,GAC7B,GAAIyD,EAAQiC,UAAW,CAE5B,MAAMzC,EAAQQ,EAAQiC,UAAUC,MAAK,EAAGC,aAzBZC,KAC9B,MACMC,EADMX,IAAmBU,GACZ7C,QAAQkC,EAAgB,MAAMlC,QAAQoC,EAAa,KACtE,OAAO,IAAI1C,OAAJ,WAAeoD,EAAf,KAA0B,MAuBtBC,CAAgBH,GAASI,KAAKR,KAEvC,GAAIvC,EACF,MAAO,CAAEsC,SAAS,EAAOvF,QAASiD,EAAMjD,SAK5C,MAAO,CAAEuF,SAAS,EAAOvF,QAAoC,IAA3ByD,EAAQ8B,QAAQ7F,OAAeuF,EAAcD,IASpEiB,EAAc,CAAC7G,EAAY0F,EAAgBoB,EAAwB,MAC9E,GAAIpB,EAAOqB,eAAe/G,GAAM,CAE9B,MAAMgH,EAAiB,IAAIF,EAAa9G,GACxC,IAAIiH,EAAoB,GAWxB,OATAvB,EAAO1F,GAAK0C,SAASwE,IACnB,GAAIxB,EAAOqB,eAAeG,KAAWF,EAAerC,SAASuC,GAAQ,CAEnE,MAAMC,EAAWN,EAAYK,EAAOxB,EAAQsB,GAC5CC,EAAUA,EAAQG,OAAOD,QAEzBF,EAAQI,KAAKH,MAGVD,EAGP,MAAO,CAACjH,IAINsH,EAAa,CAAuBzC,EAAW0C,KACnD,IAAIC,EAAS,GAIb,OAHAD,EAAI7E,SAASgC,IACX8C,EAAO9C,GAAOG,EAAOH,MAEhB8C,GA+DIC,EAAa9H,IACxB,MAAMsD,EAAQb,EAAMzC,EAAU2F,GAExBoC,EAAWJ,EAAWrE,EAAO,CAAC,SAAU,QAAS,OAAQ,iBACzDyC,EAhEWA,KACjB,GAAIA,EAAQ,CACV,IAAI8B,EAAiB,GAErB,IAAK,MAAM9C,KAAOgB,EAEhB8B,EAAO7D,EAAUe,IAAQgB,EAAOhB,GAAKhF,IAAIiE,GAE3C,OAAO6D,EAEP,MAAO,IAsDMG,CAAU1E,EAAMyC,QACzBC,EAAQ1C,EAAM0C,MAAMjG,KACvBkI,IAGQ,IAFMN,EAAWM,EAAM,CAAC,UAAW,QAAS,iBAEjCvC,SAvDJ,EAACA,EAA6BK,KAChD,MAAMmC,EAAgBxC,EAAS3F,KAC7B,CAAC2E,EAASzE,KACR,IAAIuG,EAAoB,GACpBG,EAAwB,GAC5B,MAAMD,EAAe,IAAIjD,IAGzB,IAAK,MAAMsB,KAAOL,EAAS,CACzB,MAAMyD,EAAMnE,EAAUe,GAChBwC,EAAQ7C,EAAQK,IACR,IAAVwC,EAEFf,EAAUA,EAAQiB,OAAOP,EAAYiB,EAAKpC,IACjCoC,EAAInD,SAAS,QAAUmD,EAAInD,SAAS,KAE7C2B,EAAUe,KAAK,CAAEb,QAASsB,EAAKlH,QAASsG,GAAStB,IAGjDiB,EAAYiB,EAAKpC,GAAQhD,SAASqF,IAChC1B,EAAa2B,IAAID,EAAQb,GAAStB,MAIxC,MAAO,CAAEO,UAASE,eAAcC,gBAK9B2B,EAAcJ,EAAcA,EAAcvH,OAAS,GAazD,OAZmC,IAA/B2H,EAAY9B,QAAQ7F,QAEtB2H,EAAY9B,QAAQkB,KAAK,IACzBY,EAAYC,OAAQ,GACXD,EAAY9B,QAAQxB,SAAS,IAEtCsD,EAAYC,OAAQ,EAGpBL,EAAcR,KAAK,CAAElB,QAAS,CAAC,IAAKE,aAAc,IAAIjD,IAAO8E,OAAO,IAG/DL,GAYcM,CAAYP,EAAKvC,SAAUK,OAKhD,MAAO,IAAKgC,EAAUhC,SAAQC,UC1L1ByC,EAAWxG,YAAO,CACtBG,KAAMC,cACNqG,YAAarG,cACbsG,KAAMtG,cACNC,OAAQC,YAASC,iBAGNoG,EAAe3G,YAAO,CACjC4D,MAAOxD,cACPqG,YAAarG,cACbwG,MAAO1G,YAAMsG,KCPTK,EAAkBC,IAAMC,cAA2D,MAEnFC,EAAgBC,UAEpB,MAAMC,QAAYC,MAAMvK,GAClBwK,QAAaF,EAAIG,OAEvB,OCV8D7G,EDUzC4G,ECVyDrH,IDanEuH,EAAc,KACzB,MAAMC,EAAgBC,qBAAWX,GACjC,IAAKU,EAEH,MAAM,IAAItK,MAAM,mDAElB,OAAOsK,GAQT,IAAIE,GAAa,EAqBFC,MAnBE,EAAGC,eAClB,MAAMC,EAAWC,YAASb,EAAe,IAezC,OAdIY,EAAS1J,QAAUuJ,IACrBA,GAAa,EACbzG,QAAQ9C,MAAM0J,EAAS1J,OACnB0J,EAAS1J,iBAAiB4J,IAE5BC,MAAM,8FAGGH,EAAS1J,iBAAiBmB,EACnC0I,MAAM,gCAAD,OAAiCH,EAAS1J,MAAMc,UAErD+I,MAAM,kDAGH,cAAClB,EAAgBmB,SAAjB,CAA0B1C,MAAOsC,EAAjC,SAA4CD,K,4JE9C9C,MAAMM,GAAqB,CAChCnF,EACAoF,EACAC,GAAgB,KAEhB,MAAMC,EAAQC,kBAAO,IACd/C,EAAOgD,GAAYC,oBAAS,KACjC,MAAMC,EAAS1F,GAAO2F,aAAaC,QAAQ5F,GAC3C,OAAe,OAAX0F,EACKN,EAEAS,KAAKnI,MAAMgI,MAItBI,wBAAc,CAAE,CAAC9F,GAAO,eAAgBwC,IAExC,MAAMuD,EAASC,uBAAaC,IAC1BT,EAASS,KACR,IAUH,OARAC,qBAAU,KACJlG,IAAQsF,EAAMa,SAAWd,GAC3BM,aAAaS,QAAQpG,EAAK6F,KAAKQ,UAAU7D,IAEzC8C,EAAMa,SAAU,IAEjB,CAACnG,EAAKwC,EAAO6C,IAET,CAAC7C,EAAOuD,IC9BXO,GAAetC,IAAMC,eAAc,GAE5BsC,GAAkB,IAAMvC,IAAMU,WAAW4B,IAuBvCE,OArBAC,IACb,MAAOC,EAAOC,GAAYxB,GAAmB,cAAc,GAiB3D,OAfAnB,IAAMkC,WAAU,KACd1J,SAASoK,iBAAiB,WAAYC,IACtB,MAAVA,EAAE7G,KAAe6G,EAAEC,SAAWD,EAAEE,UAClCJ,GAAUK,IAAOA,SAGpB,CAACL,IAGJ3C,IAAMkC,WAAU,KACVrM,IAGH,CAAC8M,IAEG,cAACL,GAAapB,SAAd,CAAuB1C,MAAOkE,EAA9B,SAAsCD,EAAM5B,Y,iDCTrD,MAAMoC,GAAW,CACfC,OAAQ,OACRR,OAAO,GAgGMS,ICxGVC,GDwGUD,GA7FKV,IAClB,MAAM,KAAE1F,EAAF,MAAQ2F,EAAR,OAAeQ,EAAQ7J,KAAMgK,EAA7B,SAA2CC,EAA3C,SAAqDC,GAAa,IAAKN,MAAaR,IACnFpJ,EAAMmK,GAAW/B,mBAAiB4B,GAAgB,KAClDhH,EAAKoH,GAAUhC,qBAAW4B,IAC1BK,EAAMC,GAAWlC,oBAAS,GAC3BmC,EAAWrC,mBACXsC,EAAQtC,oBAER,OAAEzC,GAAWiC,YAAS+C,KAAa,CAACzK,EAAM0D,EAAMV,IAEhD0H,EAAejF,GAAkBzF,EAEjC2K,EAAWhC,uBAAY,KAC3B,GAAI4B,EAASzB,QAAS,CACpB,MAAMU,EAAIe,EAASzB,QACnBU,EAAEoB,SACFpB,EAAEqB,kBAAkB,EAAGrB,EAAErE,MAAM5G,QAC/BY,SAAS2L,YAAY,QACrBR,GAAQ,GACRS,OAAOC,aAAaR,EAAM1B,SAC1B0B,EAAM1B,QAAUiC,OAAOE,YAAW,IAAMX,GAAQ,IAAQ,QAEzD,IAEGY,EAASlI,EACb,cAACmI,GAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUC,QAASX,EAAUY,UAAW,cAAC,KAAD,IAA1E,kBAIA,cAACJ,GAAA,EAAD,CAAQK,KAAK,SAASJ,QAAQ,YAAYC,MAAM,UAAhD,oBAeF,OACE,sBAAMpB,SAXcT,IACpBA,EAAEiC,iBACEzL,EAAK0L,SACPtB,GAAO,GACHH,GACFA,EAASjK,KAMb,SACE,eAAC2L,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,WAAW,SAASC,QAAQ,SAAxD,UACE,eAACJ,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAtC,UACE,eAACC,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,qEAC2D1C,EAD3D,oEAIA,cAAC2C,GAAA,EAAD,CACEC,YAAa,CACXC,eAAe,GAEjBrC,KAAMA,EACNsC,sBAAoB,EACpBC,sBAAoB,EACpBC,sBAAoB,EACpBpJ,MAAO,cAAC4I,EAAA,EAAD,CAAYjB,QAAQ,YAApB,0BART,SAUE,cAAC0B,GAAA,EAAD,CACEC,MAAOlD,EACPuB,QAAQ,SACR4B,WAAY,CACVC,WAAYxH,GAEd8E,SAAUA,EACV2C,WAAS,EACTC,SAAW3D,GAAMW,EAAQX,EAAE4D,OAAOjI,OAClCA,MAAOuF,SAIb,cAACiB,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAf,SACE,eAACN,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAASD,WAAW,SAASD,QAAS,EAA9D,UACE,cAACF,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAYd,IACX7B,GACC,cAACsC,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAACb,GAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUC,QAAS,IAAMlB,GAAO,GAAlE,qBAKHF,GAAY,cAACyB,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAY9B,e,UC7ErC,SAASmD,GAAQC,EAAcC,GAAyB,IAAD,QACrD,MAAM,MAAEpI,GAAUmI,EAEZE,GAAS,UAAAF,EAAMG,WAAN,mBAAW3E,eAAX,eAAoB4E,iBAAkB,EAG/CC,GAAc,UAAAL,EAAMG,WAAN,mBAAW3E,eAAX,eAAoB8E,eAAgBJ,EACxD,OAAQD,EAAO/B,MACb,KAAKzB,GAAG8D,OACN,OAAIL,IAAWG,EACN,IACFL,EACHE,OAAQA,EACRrI,MAAOA,EAAMzH,MAAM,EAAG8P,GAAUrI,EAAMzH,MAAMiQ,EAAaxI,EAAM5G,SAE7C,IAAXiP,EACFF,EAEA,IACFA,EACHE,OAAQA,EAAS,EACjBrI,MAAOA,EAAMzH,MAAM,EAAG8P,EAAS,GAAKrI,EAAMzH,MAAM8P,EAAQrI,EAAM5G,SAGpE,KAAKwL,GAAG+D,OACN,MAAO,IACFR,EACHE,OAAQA,EAASD,EAAOpI,MAAM5G,OAC9B4G,MAAOA,EAAMzH,MAAM,EAAG8P,GAAUD,EAAOpI,MAAQA,EAAMzH,MAAMiQ,EAAaxI,EAAM5G,SAElF,KAAKwL,GAAGgE,IACN,MAAO,IAAKT,EAAOnI,MAAOoI,EAAOpI,MAAOqI,OAAQD,EAAOpI,MAAM5G,QAC/D,KAAKwL,GAAGiE,KACN,MAAO,IAAKV,EAAOnI,MAAOoI,EAAOpI,S,SApDlC4E,O,mBAAAA,I,mBAAAA,I,aAAAA,I,gBAAAA,Q,KAmGUkE,OA3CK,KAClB,MAAM1D,EAAWrC,iBAAyB,QACnC,OAAEsF,EAAF,MAAUrI,GAAS+I,GAAYC,qBAAWd,GAAS,CACxDG,OAAQ,EACRrI,MAAO,GACPsI,IAAKlD,IAGD6D,EAAiBzF,uBACpB0F,GAAiBH,EAAS,CAAE1C,KAAMzB,GAAG+D,OAAQ3I,MAAOkJ,KACrD,IAEIC,EAAa3F,uBAChBa,GAA2C0E,EAAS,CAAE1C,KAAMzB,GAAGiE,KAAM7I,MAAOqE,EAAE4D,OAAOjI,SACtF,IAEIoJ,EAAe5F,uBAAY,IAAMuF,EAAS,CAAE1C,KAAMzB,GAAG8D,UAAW,IAChE1F,EAAWQ,uBAAa6F,GAAgBN,EAAS,CAAE1C,KAAMzB,GAAGgE,IAAK5I,MAAOqJ,KAAQ,IAuBtF,OArBAC,2BAAgB,KAAO,IAAD,MASpB,MAAMC,EAAWvP,SAASwP,cAC1B,UAAApE,EAASzB,eAAT,SAAkB8F,QAClB,UAAArE,EAASzB,eAAT,SAAkB+B,kBAAkB2C,EAAQA,GAC5C,UAAAjD,EAASzB,eAAT,SAAkB+F,OACV,OAARH,QAAQ,IAARA,KAAUE,UAIT,CAACpB,IAEJ/E,wBAAc,CAAE+E,OAAQA,EAAQrI,MAAOA,IAEhC,CAAEiJ,iBAAgBG,eAAcD,aAAYnG,WAAUhD,QAAOsI,IAAKlD,I,wHCzF3E,MAAMuE,GAAYC,cAAYC,IAAD,CAC3BjC,MAAO,CACL,+BAAgC,CAC9B,CAACiC,EAAMC,YAAYC,GAAG,OAAQ,CAC5BC,SAAU,QAEZA,SAAU,WAGd9K,MAAO,CACL,CAAC2K,EAAMC,YAAYC,GAAG,OAAQ,CAC5BC,SAAU,QAEZA,SAAU,SACV,8BAA+B,CAC7BA,SAAU,YAGdC,cAAe,CACbC,YAAa,GAEfC,aAAc,CACZH,SAAU,OACV,CAACH,EAAMC,YAAYC,GAAG,OAAQ,CAC5BC,SAAU,eA+IDI,OA1HGnG,IAChB,MAAMtJ,EAAUgP,MACV,YACJU,EAAc,WADV,MAEJrK,EAFI,OAGJsK,EAHI,SAIJC,EAJI,SAKJnF,EALI,OAMJoF,EANI,QAOJC,EAPI,iBAQJC,EARI,MASJ9R,EATI,SAUJ+R,EAVI,cAWJC,GACE3G,GAEGiB,EAAMC,GAAWlC,oBAAS,GAG3B4H,EAAerH,uBAAY,KAAO,IAAD,EACrCiH,GAAWA,GAAQ,UAAArF,EAASzB,eAAT,eAAkB3D,QAAS,MAC7C,CAACyK,EAASrF,IAEP0F,EAActH,uBACjBa,IACe,UAAVA,EAAE7G,KACJqN,MAGJ,CAACA,IAGGvE,EAAiB9C,uBAAaa,GAAMA,EAAEiC,kBAAkB,IAExDyE,EAAQN,GACZ,cAACpD,GAAA,EAAD,CAAS/I,MAAOoM,GAAoB,gCAAiCM,WAAY,IAAjF,SACE,cAACC,EAAA,EAAD,CAAYC,aAAW,QAAQC,YAAa7E,EAAgBH,QAAS0E,EAArE,SACE,cAAC,KAAD,QAKAO,EAAaT,GACjB,cAACzD,EAAA,EAAD,CAAYjB,QAAQ,QAAQkB,UAAU,OAAOkE,UAAW1Q,EAAQwP,aAAhE,SACGQ,IAILjH,qBAAU,KACJ8G,GAAUI,IACZzF,GAAQ,GACRS,OAAOE,YAAW,IAAMX,GAAQ,IAAQ,SAEzC,CAACqF,EAAQI,IAEZ,MAAMU,EAAgBd,GACpB,cAACe,GAAA,EAAD,CACEC,sBAAoB,EACpBC,mBAAiB,EACjBC,SAAS,QACT/Q,QAAS,CAAEgR,cAAehR,EAAQsP,eAJpC,SAMGW,EACC,cAACvD,GAAA,EAAD,CACEnC,KAAMA,EACNsC,sBAAoB,EACpBC,sBAAoB,EACpBC,sBAAoB,EACpBkE,UAAU,aACVC,oBAAqBC,KACrBC,gBAAiB,CAAEC,QAAS,KAC5B1N,MAAO,cAAC4I,EAAA,EAAD,CAAYjB,QAAQ,YAApB,SAAiC2E,IAR1C,SAUE,+BAAOJ,MAGTA,IAKN,OACE,eAACyB,GAAA,EAAD,CAAalE,WAAS,EAACnP,MAAOA,EAAOqN,QAAQ,WAA7C,UACE,cAACiG,GAAA,EAAD,CAAYC,QAAQ,YAAYd,UAAW1Q,EAAQiN,MAAnD,SACGyC,IAEH,cAAC+B,GAAA,EAAD,CACEC,GAAG,YACHzE,MAAOyC,EACPiC,WAAYxB,EACZO,UAAW1Q,EAAQuE,MACnB8I,SAAUsC,EACVtK,MAAOA,EACPoF,SAAUA,EACVmH,WAAY,CACVC,WAAY,QACZC,YAAa,MACbC,aAAc,MACdC,MAAO,CAAEC,WAAY,IAEvBC,aACE,eAACtB,GAAA,EAAD,CAAgBG,SAAS,MAAzB,UACE,cAACrE,GAAA,EAAD,CAAS/I,MAAM,SAAS0M,WAAY,IAApC,SACE,cAACC,EAAA,EAAD,CAAYC,aAAW,SAASC,YAAa7E,EAAgBH,QAASoE,EAAtE,SACE,cAAC,KAAD,QAGHQ,KAGL+B,eAAgBxB,IAGlB,cAACyB,GAAA,EAAD,CAAUC,GAAIpU,EAAd,SACE,cAACqU,GAAA,EAAD,CAAgBrU,OAAK,EAACqN,QAAQ,WAA9B,SACGmF,U,iBC3KJ,MAAM8B,GAAerD,GACH,UAAvBA,EAAMsD,QAAQ9G,KACV+G,aAAQC,aAAKxD,EAAMsD,QAAQG,QAAS,GAAI,KACxCC,aAAOF,aAAKxD,EAAMsD,QAAQG,QAAS,GAAI,K,gECNtC,MAAME,GAAS,CACpB,WACA,cACA,SACA,WACA,eACA,YACA,UACA,QACA,SACA,aACA,WAMWC,GAAU,CACrB,UACA,QACA,QACA,MACA,YACA,oBACA,cACA,uBAOWC,GAAa,IAGpBC,GADkB,GAIXC,GAAY,CACvB,CAAC,IAAK,IAAKD,GAAKA,GAAKA,GAAKA,GAAK,IAAK,IAAKA,GAAKA,GAAK,SAAK,SAAK,IAAK,SAAK,IAAK,IAAK,IAAK,SAAKA,GANjFD,GAM2F,SAN3FA,IAOV,CAACC,GAAK,IAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAK,IAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAK,SAAKA,GAAK,SAAKA,GAAK,SAP5ED,aAQV,CAACC,GAAK,SAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAK,IAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GARxDD,MAQuEC,GAAK,SAAKA,GAAKA,GARtFD,OASV,CAACC,GAAKA,GAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAKA,GATxDD,MASuEC,GAAKA,GAAKA,GAAKA,GATtFD,OAUV,CAAC,SAAK,SAAK,IAAK,IAAK,SAAK,OAAK,IAAK,IAAK,SAAK,SAAK,SAAK,SAAK,OAAK,SAAK,IAAK,SAAK,SAAK,SAAK,SAAK,SAAK,IAAK,UAC1G,CAXUA,YAWWC,GAAKA,GAAK,SAAK,SAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAAKA,GAX5ED,aAYV,CAACC,GAAKA,GAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAK,IAAKA,GAAK,SAAKA,GAAKA,GAAKA,GAAKA,GAZtFD,OAaV,CAbUA,YAaWC,GAAKA,GAAKA,GAAK,IAAKA,GAAKA,GAAKA,GAAK,SAAKA,GAAK,SAAKA,GAAK,SAAKA,GAAKA,GAb5ED,cAgBCG,GAAS,CACpB,CAAC,SAAK,YACN,CAAC,SAAK,UACN,CAAC,SAAK,kBACN,CAAC,SAAK,kBACN,CAAC,SAAK,qBAGKC,GAAa,CACxB,CAAC,SAAK,YACN,CAAC,SAAK,mBACN,CAAC,SAAK,WACN,CAAC,SAAK,SACN,CAAC,SAAK,WAMKC,GAAY,CACvB,CAAC,SAAK,aACN,CAAC,UAAM,YACP,CAAC,UAAM,mBACP,CAAC,UAAM,SACP,CAAC,UAAM,uBAGIC,GAAS,SAETC,GAAgB,CAAC,QAAS,YAAa,WAAY,QACnDC,GAAoB,CAAC,QAAS,UAAW,QAkBzCC,GAAsB,CAEjC,CAAC,CAAC,IAAK,KAAM,CAAC,EAAG,IACjB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,IACnB,CAAC,CAAC,SAAK,KAAM,CAAC,EAAG,IAGjB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,GAAI,UAAM,CAAC,IAAM,EAAE,IAGrB,CAAC,CAAC,IAAK,QAAM,CAAC,EAAG,EAAE,IACnB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,SAAK,KAAM,CAAC,EAAG,EAAE,IAGnB,CAAC,SAAK,CAAC,GAAK,KAGZ,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,EAAE,IACnB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,EAAE,IAGnB,CAAC,CAAC,OAAK,IAAK,CAAC,EAAG,EAAE,IAClB,CAAC,SAAK,CAAC,GAAK,EAAE,IAGd,CAAC,CAAC,IAAK,UAAM,CAAC,EAAG,IACjB,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,KAeNC,GAAuB,CAClC,CAAEC,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,IAAK,MAC3D,CAAED,IAAK,SAAUlN,YAAa,SAAUmN,SAAU,CAAC,IAAK,MACxD,CAAED,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,IAAK,MAC3D,CAAED,IAAK,SAAUlN,YAAa,eAAgBmN,SAAU,CAAC,WACzD,CAAED,IAAK,SAAUlN,YAAa,eAAgBmN,SAAU,CAAC,WACzD,CAAED,IAAK,SAAUlN,YAAa,WAAYmN,SAAU,CAAC,MACrD,CAAED,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,MACtD,CAAED,IAAK,SAAUlN,YAAa,cAAemN,SAAU,CAAC,MACxD,CAAED,IAAK,SAAUlN,YAAa,kBAAmBmN,SAAU,CAAC,MAC5D,CAAED,IAAK,SAAUlN,YAAa,WAAYmN,SAAU,CAAC,MACrD,CAAED,IAAK,SAAUlN,YAAa,eAAgBmN,SAAU,CAAC,MACzD,CAAED,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,SAAK,MAC3D,CAAED,IAAK,SAAUlN,YAAa,iBAAkBmN,SAAU,CAAC,IAAK,MAChE,CAAED,IAAK,SAAUlN,YAAa,gBAAiBmN,SAAU,CAAC,IAAK,MAC/D,CAAED,IAAK,SAAUlN,YAAa,eAAgBmN,SAAU,CAAC,IAAK,MAC9D,CAAED,IAAK,SAAUlN,YAAa,aAAcmN,SAAU,CAAC,IAAK,MAC5D,CAAED,IAAK,SAAUlN,YAAa,cAAemN,SAAU,CAAC,IAAK,MAC7D,CAAED,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,IAAK,MAC3D,CAAED,IAAK,SAAUlN,YAAa,iBAAkBmN,SAAU,CAAC,IAAK,MAEhE,CAAED,IAAK,SAAUlN,YAAa,SAAUmN,SAAU,CAAC,IAAK,MACxD,CAAED,IAAK,SAAUlN,YAAa,SAAUmN,SAAU,CAAC,IAAK,MACxD,CAAED,IAAK,SAAUlN,YAAa,UAAWmN,SAAU,CAAC,IAAK,MACzD,CAAED,IAAK,SAAUlN,YAAa,YAAamN,SAAU,CAAC,MACtD,CAAED,IAAK,SAAUlN,YAAa,gBAAiBmN,SAAU,CAAC,MAC1D,CAAED,IAAK,SAAUlN,YAAa,kBAAmBmN,SAAU,CAAC,MAC5D,CAAED,IAAK,SAAUlN,YAAa,qBAAsBmN,SAAU,CAAC,MAE/D,CAAED,IAAK,SAAUlN,YAAa,8BAA+BmN,SAAU,CAAC,MAExE,CAAED,IAAK,SAAUlN,YAAa,SAAUmN,SAAU,CAAC,MACnD,CAAED,IAAK,SAAUlN,YAAa,UAAWmN,SAAU,CAAC,MACpD,CAAED,IAAK,SAAUlN,YAAa,uBAAwBmN,SAAU,CAAC,MACjE,CAAED,IAAK,SAAUlN,YAAa,wBAAyBmN,SAAU,CAAC,OAGvDC,GAAiB,CAC5B,CACEF,IAAK,SACLzN,IAAI,GAAD,OAAKoN,GAAL,iBAAoBA,IACvB7M,YAAa,UACbmN,SAAU,CAAC,gBAAO,kBAEpB,CAAED,IAAK,IAAKzN,IAAK,IAAKO,YAAa,mCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,oCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,qCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,kCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,+BACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,sBACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,gCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,uCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,oCACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,8BAGxBqN,GAA4B,CACvC,CAAEH,IArEkB,SAqELzN,IArEK,SAqEQO,YAAa,kBACzC,CAAEkN,IArE4B,SAqELzN,IArEK,SAqEkBO,YAAa,oBAC7D,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,OAAQmN,SAAU,CAAC,YACtD,CAAED,IAAK,SAAKzN,IAAK,SAAKO,YAAa,YAAamN,SAAU,CAAC,YAC3D,CAAED,IAAK,SAAUzN,IAAI,GAAD,OAAKoN,GAAL,UAAqB7M,YAAa,cAAemN,SAAU,CAAC,YAChF,CAAED,IAAK,IAAKzN,IAAK,IAAKO,YAAa,sBACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,4BACnC,CAAEkN,IAAK,IAAKzN,IAAK,IAAKO,YAAa,kBACnC,CAAEkN,IAAK,SAAKzN,IAAK,SAAKO,YAAa,+BChM/BwI,GAAYC,cAAYC,IAAD,CAC3B4E,UAAW,CACTpG,OAAQ,UACR,UAAW,CACTqG,gBAAiB7E,EAAMsD,QAAQ/E,OAAOuG,QAG1CC,OAAQ,CACNvG,OAAQ,UACR,UAAW,CACTqG,gBAAiB7E,EAAMsD,QAAQ/E,OAAOuG,QAG1CE,WAAY,CACVH,gBAAiB7E,EAAMsD,QAAQ/E,OAAO0G,mBACtC5I,MAAO,cACPmC,OAAQ,UACR,UAAW,CACTqG,gBAAiB7E,EAAMsD,QAAQ/E,OAAO0G,qBAG1CC,OAAQ,CACNC,QAASnF,EAAMnD,QAAQ,EAAG,IAC1BuI,WAAY,OACZjF,SAAU,UAEZkF,eAAgB,CACdC,WAAW,aAAD,OAAejC,GAAYrD,KAEvCuF,gBAAiB,CACfC,YAAY,aAAD,OAAenC,GAAYrD,KAExCyF,KAAM,CACJN,QAAS,aAEXxE,OAAQ,CACN+E,SAAU,OACVJ,WAAW,aAAD,OAAejC,GAAYrD,IACrCwF,YAAY,aAAD,OAAenC,GAAYrD,SAMpC2F,GAAavL,IACjB,MAAMtJ,EAAUgP,MACV,QAAExD,GAAYlC,EACdwL,EAAgBjM,uBACnB0F,GACEA,IAASwE,ID7BQ,KC6BMxE,GAAqB/C,GAA5C,KAA8DA,EAAQ+C,UAAWwG,GACpF,CAACvJ,IAGGG,EAAiB9C,uBAAaa,GAAMA,EAAEiC,kBAAkB,IAGxDqJ,EAAOnO,IAAMgC,aACjB,EAAGoM,IAAGC,QAAmC,IAAD,IACtC,MAAMpB,EAAS,UAAGb,GAAUiC,UAAb,aAAG,EAAmB,EAAJD,GAC3BhB,EAAM,UAAGhB,GAAUiC,UAAb,aAAG,EAAmB,EAAJD,EAAQ,GAEhCE,EAAaF,EAAI,GAAKA,EAAI,GAAW,IAANC,EAErC,OACE,qCACE,cAACE,GAAA,EAAD,CACEC,MAAM,SACN3E,UAAW4E,aACTtV,EAAQoU,OACRN,GAAa9T,EAAQ8T,UACrBA,IAAcf,IAAc/S,EAAQkU,WACpCiB,GAAcnV,EAAQuU,gBAExBF,QAAQ,OACR7I,QAASsJ,EAAchB,GACvBtD,YAAa7E,EAVf,SAYGmI,IAEH,cAACsB,GAAA,EAAD,CACEC,MAAM,SACN3E,UAAW4E,aACTtV,EAAQoU,OACRH,GAAUjU,EAAQiU,OAClBA,IAAWlB,IAAc/S,EAAQkU,WACjCiB,GAAcnV,EAAQyU,iBAExBJ,QAAQ,OACR7I,QAASsJ,EAAcb,GACvBzD,YAAa7E,EAVf,SAYGsI,SAKT,CAACjU,EAAS8U,EAAenJ,IAG3B,OACE,cAAC4J,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOC,KAAK,QAAQlF,aAAW,yBAA/B,UACE,cAACmF,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACP,GAAA,EAAD,IACCvC,GAAOhV,KAAK+X,GACX,cAACR,GAAA,EAAD,CAEEC,MAAM,SACN3E,UAAW4E,aAAKtV,EAAQ6P,OAAQ7P,EAAQ2U,MACxCkB,QAAS,EACTxB,QAAQ,OALV,SAOGuB,GAPH,yBACyBA,WAW/B,cAACE,GAAA,EAAD,UACGhD,GAAQjV,KAAI,CAACkY,EAAQb,IACpB,eAACS,GAAA,EAAD,WACE,cAACP,GAAA,EAAD,CAAW1E,UAAW1Q,EAAQ2U,KAA9B,SAAqCoB,IACpClD,GAAOhV,KAAI,CAAC+X,EAAOX,IAClB,cAACD,EAAD,CAA4CC,EAAGA,EAAGC,EAAGA,GAArD,qBAAyBa,EAAzB,YAAmCH,QAHvC,0BAAkCG,cAa/BlP,WAAMmP,KAAKnB,ICvI1B,MAAM7F,GAAYC,cAAYC,IAAD,CAC3BkF,OAAQ,CACNC,QAASnF,EAAMnD,QAAQ,IAAM,GAC7BkK,UAAW,SACX3B,WAAY,OACZjF,SAAU,SACV3B,OAAQ,UACR,UAAW,CACTqG,gBAAiB7E,EAAMsD,QAAQ/E,OAAOuG,OAExCQ,WAAW,aAAD,OAAejC,GAAYrD,KAEvCgH,MAAO,CACL7G,SAAU,SACV8G,cAAe,SACf9B,QAASnF,EAAMnD,QAAQ,EAAG,IAC1B2I,YAAY,aAAD,OAAenC,GAAYrD,KAExCW,OAAQ,CACNwE,QAASnF,EAAMnD,QAAQ,IAAM,KAC7ByI,WAAW,aAAD,OAAejC,GAAYrD,IACrCwF,YAAY,aAAD,OAAenC,GAAYrD,SAMpCkH,GAAgB9M,IACpB,MAAMtJ,EAAUgP,MACV,QAAExD,EAAU,UAAalC,EAEzB+M,EAASC,mBAAQ,IACdpD,GAAOrV,KAAI,CAAC0Y,EAAOxY,IAAM,CAACwY,EAAOpD,GAAWpV,GAAIqV,GAAUrV,OAChE,IAEG4N,EAAiB9C,uBAAaa,GAAMA,EAAEiC,kBAAkB,IAExDqJ,EAAOnM,uBACX,EAAGuL,SAAQlU,UAEP,qCACE,cAACkV,GAAA,EAAD,CACE1E,UAAW1Q,EAAQoU,OACnB5I,QAAS,IAAMA,EAAQ4I,GACvB5D,YAAa7E,EAHf,SAKGyI,IAEH,cAACgB,GAAA,EAAD,CAAW1E,UAAW1Q,EAAQkW,MAA9B,SAAsChW,QAI5C,CAACF,EAASwL,EAASG,IAGrB,OACE,cAAC4J,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAOC,KAAK,QAAQlF,aAAW,yBAA/B,UACE,0BAAUiG,KAAM,IAChB,0BAAUA,KAAM,IAChB,0BAAUA,KAAM,IAChB,cAACd,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,WACE,cAACP,GAAA,EAAD,CAAWC,MAAM,SAAS3E,UAAW1Q,EAAQ6P,OAAQgG,QAAS,EAA9D,oBAGA,cAACT,GAAA,EAAD,CAAWC,MAAM,SAAS3E,UAAW1Q,EAAQ6P,OAAQgG,QAAS,EAA9D,+BAGA,cAACT,GAAA,EAAD,CAAWC,MAAM,SAAS3E,UAAW1Q,EAAQ6P,OAAQgG,QAAS,EAA9D,4BAKJ,cAACC,GAAA,EAAD,UACGO,EAAOxY,KAAI,CAAC4Y,EAAK1Y,IAChB,cAAC4X,GAAA,EAAD,UACGc,EAAI5Y,KAAI,EAAEuW,EAAQlU,GAAOwW,IACxB,cAAC1B,EAAD,CAA6CZ,OAAQA,EAAQlU,KAAMA,GAAnE,+BAAmCnC,EAAnC,YAAwC2Y,OAF5C,+BAAuC3Y,cAYpC8I,WAAMmP,KAAKI,ICvG1B,SAASO,KAA2Q,OAA9PA,GAAW5T,OAAO6T,QAAU,SAAUtJ,GAAU,IAAK,IAAIvP,EAAI,EAAGA,EAAI8Y,UAAUpY,OAAQV,IAAK,CAAE,IAAI+Y,EAASD,UAAU9Y,GAAI,IAAK,IAAI8E,KAAOiU,EAAc/T,OAAOgU,UAAU7R,eAAe8R,KAAKF,EAAQjU,KAAQyK,EAAOzK,GAAOiU,EAAOjU,IAAY,OAAOyK,IAA2B2J,MAAM1Y,KAAMsY,WAIhT,IAAIK,GAAoB,gBAAoB,IAAK,CAC/CC,YAAa,EACbC,KAAM,OACNC,cAAe,OACfC,eAAgB,SACF,gBAAoB,OAAQ,CAC1CzN,EAAG,4GACY,gBAAoB,OAAQ,CAC3CA,EAAG,sCAGL,SAAS0N,IAAa,MACpB5T,EAAK,QACL6T,KACGlO,GACFmO,GACD,OAAoB,gBAAoB,MAAOd,GAAS,CACtDe,MAAO,6BACPC,QAAS,eACTC,oBAAqB,OACrBC,SAAU,UACVC,SAAU,UACVT,cAAe,QACfC,eAAgB,QAChB3J,IAAK8J,EACL,kBAAmBD,GAClBlO,GAAQ3F,EAAqB,gBAAoB,QAAS,CAC3D+N,GAAI8F,GACH7T,GAAS,KAAMuT,IAGpB,MAAMa,GAA0B,aAAiBR,IAClC,IC1Bf,MAAMvI,GAAYC,cAAYC,IAAD,CAC3B8I,KAAM,CACJC,MAAO,OACPC,OAAQ,QAEVC,UAAW,CACT9D,QAASnF,EAAMnD,QAAQ,EAAG,GAC1BsD,SAAU,SACV0B,SAAU,WACVmH,OAAQ,OACRE,UAAW,QACXxD,SAAU,SAEZyD,QAAS,CACPH,OAAQ,OACRD,MAAO,OACPlH,SAAU,YAEZuH,UAAW,CACTvH,SAAU,WACVmH,OAAQ,OACRD,MAAO,OACPM,OAAQrJ,EAAMsD,QAAQpL,KAAKoR,SAE7BC,KAAM,CACJ1H,SAAU,WACVmH,OAAQ,MACRD,MAAO,MACPS,KAAM,OACNC,IAAK,SAEPC,QAAS,CACPtE,WAAY,OACZ5G,OAAQ,UACRqD,SAAU,WACV8H,UAAW,wBACXC,SAAU,UACVb,MAAO,QACPhC,UAAW,UAEb8C,QAAS,CACPhI,SAAU,WACVkH,MAAO,QACPS,KAAM,UAERM,UAAW,CACTjI,SAAU,WACVkH,MAAO,QACPgB,MAAO,UAETC,IAAK,CACHjB,MAAO,QAET7D,OAAQ,CACN/Q,QAAS,eACTqK,OAAQ,UACR,UAAW,CACTyL,aAAc,MACdpF,gBAAiB7E,EAAMsD,QAAQ/E,OAAOuG,QAG1CoF,UAAW,CACT,YAAa,CACXC,OAAQ,KACRX,KAAM,IACNY,QAAS,KACTH,aAAc,MACdpI,SAAU,WACV1N,QAAS,eACT4U,MAAO,QACPC,OAAQ,OACRnE,gBAAiB7E,EAAMsD,QAAQ+G,WAAWC,QAG9CC,WAAY,CACVvB,OAAQ,QAEVwB,SAAU,CACRrF,QAASnF,EAAMnD,QAAQ,EAAG,IAE5B4N,YAAa,CACXtF,QAASnF,EAAMnD,QAAQ,GAAK,QAM1B6N,GAAc,EAAE3E,EAAGC,MACvB,MAAM2E,EAAa,GAAJ3E,EAEf,MAAO,CAAEwD,KAAK,GAAD,OAAW,KADZmB,GAAU,EAAIA,GAAU5E,GACvB,KAAmB0D,IAAI,GAAD,OAAS,IAAJzD,EAAL,OAM/B4E,GAAUxQ,IACd,MAAMtJ,EAAUgP,MACV,QAAExD,EAAU,UAAalC,EAEzBqC,EAAiB9C,uBAAaa,GAAMA,EAAEiC,kBAAkB,IAExDoO,EAAelR,uBACnB,EAAGmR,SAAQC,aACT,GAAsB,kBAAXD,EACT,OACE,cAACE,GAAA,EAAD,CAAKxJ,UAAW4E,aAAKtV,EAAQ4Y,QAAS5Y,EAAQoZ,WAAYpH,MAAO4H,GAAYK,GAA7E,SACE,qBACEvJ,UAAW4E,aAAKtV,EAAQkZ,IAAKlZ,EAAQoU,QACrC5I,QAAS,IAAMA,EAAQwO,GACvBxJ,YAAa7E,EAHf,SAKGqO,MAIF,CACL,MAAMG,EAAWH,EAAOnY,KAAK,IAAIpD,OAAS,EAEpC2b,EAASD,EAAW,OAAW,SACrC,OACE,eAACD,GAAA,EAAD,CACExJ,UAAW4E,aAAKtV,EAAQ4Y,QAAS,CAAE,CAAC5Y,EAAQoZ,YAAae,IACzDnI,MAAO4H,GAAYK,GAFrB,UAIGG,EACD,qBACE1J,UAAW4E,aAAKtV,EAAQgZ,UAAWhZ,EAAQoU,OAAQpU,EAAQoZ,WAC3D5N,QAAS,IAAMA,EAAQwO,EAAO,IAC9BxJ,YAAa7E,EAHf,SAKGqO,EAAO,KAEV,qBACEtJ,UAAW4E,aAAKtV,EAAQ+Y,QAAS/Y,EAAQoU,OAAQpU,EAAQoZ,WACzD5N,QAAS,IAAMA,EAAQwO,EAAO,IAC9BxJ,YAAa7E,EAHf,SAKGqO,EAAO,WAMlB,CAACha,EAASwL,EAASG,IAGf0O,EAAa/D,mBACjB,IACE,cAAC4D,GAAA,EAAD,CAAKxJ,UAAW1Q,EAAQmY,UAAxB,SACE,sBAAKzH,UAAW1Q,EAAQqY,QAAxB,UACE,cAAC,GAAD,CAAW3H,UAAW1Q,EAAQsY,YAC9B,qBAAK5H,UAAW1Q,EAAQyY,KAAxB,SACGjF,GAAO3V,KAAI,EAAEmc,EAAQC,KACpB,cAACF,EAAD,CAAyCC,OAAQA,EAAQC,OAAQA,GAAjE,mBAA+BD,cAMzC,CAACha,EAAS+Z,IAGZ,OACE,cAACG,GAAA,EAAD,CAAKxI,GAAG,YAAYhB,UAAW1Q,EAAQgY,KAAvC,SACE,eAACnM,GAAA,EAAD,CAAMC,WAAS,EAAC4E,UAAW1Q,EAAQyZ,WAAYa,KAAK,SAApD,UACE,cAACzO,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACL,GAAA,EAAD,CAAMC,WAAS,EAACyO,UAAU,SAAS7J,UAAW4E,aAAKtV,EAAQyZ,YAA3D,UACE,cAAClN,EAAA,EAAD,CAAYjB,QAAQ,QAAQkB,UAAU,IAAtC,oBAGA,cAACX,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,cAACN,GAAA,EAAD,CACEC,WAAS,EACTyO,UAAU,SACVtO,QAAQ,gBACRyE,UAAW4E,aAAKtV,EAAQyZ,WAAYzZ,EAAQ2Z,aAJ9C,SAMGrG,GAAczV,KAAKqa,GAClB,cAAC3L,EAAA,EAAD,CAAyBjB,QAAQ,QAAQkB,UAAU,IAAnD,SACG0L,GADcA,cAQ3B,cAACrM,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,eAACN,GAAA,EAAD,CAAMC,WAAS,EAACyO,UAAU,SAAS7J,UAAW1Q,EAAQyZ,WAAtD,UACE,cAAC5N,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAACL,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,gBAAgByE,UAAW1Q,EAAQ0Z,SAA3D,SACGnG,GAAkB1V,KAAKW,GACtB,cAAC+N,EAAA,EAAD,CAAsBjB,QAAQ,QAAQkB,UAAU,IAAhD,SACGhO,GADcA,SAMvB,cAACqN,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACGkO,eASAxT,WAAMmP,KAAK8D,ICnN1B,MAAM9K,GAAYC,cAAYC,IAAD,OAC3B8I,KAAM,CACJC,MAAO,OACPC,OAAQ,QAEV9D,OAAQ,CACNE,WAAY,OACZ2B,UAAW,SACXvI,OAAQ,UACR2B,SAAU,SACV,UAAW,CACT0E,gBAAiB7E,EAAMsD,QAAQ/E,OAAOuG,QAG1CxN,YAAa,CACX6N,QAAS,MACThF,SAAU,UAEZmL,kBAAmB,CACjBnX,QAAS,OACToX,eAAgB,SAChBC,cAAe,SACfxC,OAAQ,QAEVyC,SAAU,CACRC,WNrByBnF,EMqBD,MNrBelK,EMqBRgH,GAAYrD,GNpBvC,GAAN,OAAUuG,EAAV,kBAAwBlK,EAAxB,eAAoCkK,EAApC,gBAAgDlK,EAAhD,aAA0DkK,EAA1D,YAAkEA,EAAlE,gBAA8ElK,EAA9E,aAAwFkK,EAAxF,kBAAsGlK,EAAtG,qBAAwHkK,EAAxH,gBAAoIlK,EAApI,aAD0B,IAACkK,EAAclK,KMkCrCsP,GAAevR,IACnB,MAAMtJ,EAAUgP,MACV,QAAExD,EAAU,SAAZ,QAAsB8N,EAAtB,YAA+BnK,EAAc,GAA7C,OAAiD2L,EAAUpH,IAAQA,GAAnE,QAAwEqH,GAAYzR,EACpFqC,EAAiB9C,uBAAaa,GAAMA,EAAEiC,kBAAkB,IAE9D,OACE,cAACE,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACGuN,EAAQzb,KAAI,EAAG6V,MAAKzN,MAAKO,cAAamN,cACrC,wBAAC9H,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,MAAQgD,EAAatM,IAAK2D,EAAakK,UAAW1Q,EAAQ2a,UACvE,eAAC9O,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,GAAA,EAAD,CACEK,MAAI,EACJC,GAAI,EACJuE,UAAW1Q,EAAQoU,OACnB5I,QAAS,IAAMA,EAAQkI,GACvBlD,YAAa7E,EALf,SAOG1F,GAAO6U,EAAOpH,KAEjB,cAAC7H,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,qBAAKuE,UAAW1Q,EAAQwa,kBAAxB,SACE,qBAAK9J,UAAW1Q,EAAQwG,YAAxB,SAAsCA,QAZ5C,OAgBGmN,QAhBH,IAgBGA,OAhBH,EAgBGA,EAAU9V,KAAK0Q,IACd,MAAMyM,EAAWD,EAAO,UAAMxM,GAAN,OAAamF,GAAQnF,EAC7C,OACE,cAAC1C,GAAA,EAAD,CAEEK,MAAI,EACJC,GAAI,EACJuE,UAAW1Q,EAAQoU,OACnB5I,QAAS,IAAMA,EAAQwP,GACvBxK,YAAa7E,EANf,SAQGqP,GAPIA,eAkBRnU,WAAMmP,KAAK6E,ICvF1B,MAAMI,GAAc3R,GAEhB,cAAC,GAAD,IACMA,EACJgQ,QAAS7F,GACTtE,YAAa,CAAE9C,GAAI,EAAGD,GAAI,GAC1B0O,OAASpH,GAAD,UAAYL,IAAZ,OAAqBK,GAC7BqH,SAAO,IAKElU,WAAMmP,KAAKiF,ICZ1B,MAAMC,GAAS5R,GACN,cAAC,GAAD,IAAiBA,EAAOgQ,QAAS1F,GAAMzE,YAAa,CAAE/C,GAAI,KAGpDvF,WAAMmP,KAAKkF,ICJ1B,MAAMC,GAAmB7R,GAErB,cAAC,GAAD,IAAiBA,EAAOgQ,QAASzF,GAAiB1E,YAAa,CAAE9C,GAAI,GAAID,GAAI,EAAGD,GAAI,MAIzEtF,WAAMmP,KAAKmF,ICG1B,MAAMnM,GAAYC,cAAYC,IAAD,CAC3BsK,MAAO,CACLnF,QAASnF,EAAMnD,QAAQ,GACvBmM,OAAQ,QAEVkD,WAAY,CAIV,CAAClM,EAAMC,YAAYC,GAAG,OAAQiM,GAAc,EAAG,EAAG,QAIhDA,GAAgB,IAAI3T,KACxB,IAAI4T,EAAwB,CAAE,QAAS,CAAEC,MAAO,MAIhD,OAHA7T,EAAS7G,SAAQ,CAAC2a,EAAOzd,KACvBud,EAAO,kBAAD,OAAmBvd,EAAI,EAAvB,MAA+B,CAAEwd,MAAOC,MAEzCF,GAQHG,GAAYnS,IAChB,MAAMtJ,EAAUgP,MACV,QAAExD,GAAYlC,EAEpB,OAEE,cADA,CACCuC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG2E,UAAW1Q,EAAQob,WAA/C,UACE,cAACvP,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAf,SACE,eAACuP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,oCAGA,cAAC,GAAD,CAAWjB,QAASA,IACpB,cAACe,EAAA,EAAD,CAAYjB,QAAQ,UAAU+J,MAAM,SAAS7I,UAAU,IAAvD,6IAOJ,cAACX,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAvB,SACE,cAACqP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,SACE,cAAC,GAAD,CAAQhO,QAASA,QAIrB,cAACK,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAvB,SACE,eAACqP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,mBAGA,cAAC,GAAD,CAAOjB,QAASA,SAIpB,cAACK,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAvB,SACE,eAACqP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,wBAGA,cAAC,GAAD,CAAYjB,QAASA,SAIzB,cAACK,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAvB,SACE,eAACqP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,6BAGA,cAAC,GAAD,CAAiBjB,QAASA,SAK9B,cAACK,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAvB,SACE,eAACqP,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,wCAGA,cAAC,GAAD,CAAcjB,QAASA,SAK3B,cAACK,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAI,EAAGjM,QAAM,EAAhC,SACE,eAACsb,GAAA,EAAD,CAAOhL,UAAW1Q,EAAQwZ,MAA1B,UACE,cAACjN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,oCAGA,cAACF,EAAA,EAAD,sCAOK1F,WAAMmP,KAAKyF,IC1G1B,MAAMzM,GAAYC,cAAYC,IAAD,CAC3ByM,OAAQ,CACNC,cAAe,OACfvC,OAAQ,GACRtI,SAAU,SACV4H,IAAI,GAAD,OAAKzJ,EAAMnD,SAAS,GAApB,MACH8P,aAAa,GAAD,OAAK3M,EAAMnD,QAA+B,SAAvBmD,EAAMsD,QAAQ9G,KAAkB,EAAI,GAAvD,OAEdnH,MAAO,CACLqX,cAAe,OACf7H,gBACyB,SAAvB7E,EAAMsD,QAAQ9G,KACVwD,EAAMsD,QAAQ+G,WAAWuC,QACzB5M,EAAMsD,QAAQ+G,WAAWC,MAC/BL,aAAc,WAgCH4C,OAxBIzS,IACjB,MAAM4F,EAAQ8M,eACRhc,EAAUgP,MAEV,eAAEV,KAAmBsD,GAAetI,EAGpC2S,EAAmC,SAAvB/M,EAAMsD,QAAQ9G,KAAkB,EAAI,EAEtD,OACE,gCACE,cAACwO,GAAA,EAAD,CAAKgC,SAAU,EAAGxL,UAAW1Q,EAAQ2b,OAArC,SACE,cAAC9P,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASC,QAAQ,SAASF,QAAS,EAA9D,SACE,cAACF,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAACE,GAAI,EAAGG,UAAWkP,KAAOO,UAAWA,EAAWvL,UAAW1Q,EAAQuE,MAAhF,SACE,cAAC,GAAD,IAAcqN,UAKpB,cAAC,GAAD,CAAUpG,QAAS8C,QCzCzB,MAAMU,GAAYC,cAAYC,IAAD,CAC3B5K,QAAS,CACPiH,MAA8B,SAAvB2D,EAAMsD,QAAQ9G,KAAkBwD,EAAMsD,QAAQ2J,QAAQC,KAAOlN,EAAMsD,QAAQ2J,QAAQE,U,IASzFpS,I,SAAAA,O,iBAAAA,I,yBAAAA,I,yBAAAA,I,6BAAAA,I,+BAAAA,I,4BAAAA,Q,KAiCL,MAAMqS,GAASvW,IACN,CACLA,OACAvD,QAAS,EACTqN,OAAQ,GACR5R,OAAO,IAILsP,GAAU,CAACC,EAAcC,KAC7B,OAAQA,EAAO/B,MACb,KAAKzB,GAAGsS,UACN,OAAOxZ,OAAOyZ,GAAG/O,EAAOpI,MAAOmI,EAAMzH,MAAQyH,EAAQ8O,GAAM7O,EAAOpI,OACpE,KAAK4E,GAAGwS,MACN,OAAOH,GAAM7O,EAAOpI,OACtB,KAAK4E,GAAGyS,UACN,MAAO,IAAKlP,EAAOqC,OAAQpC,EAAOpI,OACpC,KAAK4E,GAAG0S,YACN,MAAO,IAAKnP,EAAOhL,QAASgL,EAAMhL,QAAU,EAAGqN,OAAQrC,EAAMqC,OAASpC,EAAOpI,OAC/E,KAAK4E,GAAG2S,WACN,OAAOpP,EAAMvP,MAAQ,IAAKuP,EAAOvP,OAAO,GAAUuP,EACpD,KAAKvD,GAAG4S,aACN,MAAO,IAAKrP,EAAOvP,OAAO,EAAM6e,aAAcrP,EAAOpI,SAoE5C0X,OAhEIzT,IACjB,MAAMtJ,EAAUgP,KACVzF,EAAQH,MAER,KAAErD,EAAMoE,SAAU+F,GAAiB5G,GACnC,eAAEgF,EAAF,aAAkBG,EAAlB,WAAgCD,EAAhC,SAA4CnG,EAA5C,MAAsDhD,EAAtD,IAA6DsI,GAAQQ,MACpEX,EAAOY,GAAYC,qBAAWd,GAASxH,EAAMuW,IAEpDvT,qBAAU,IAAMqF,EAAS,CAAE1C,KAAMzB,GAAGsS,UAAWlX,MAAOU,KAAS,CAACA,IAChEgD,qBAAU,IAAMqF,EAAS,CAAE1C,KAAMzB,GAAG2S,cAAe,CAACvX,IAGpD,MAAM2X,EAAcnU,uBACjBoU,IAEC,GAAI1T,GAA0B,YAAjB0T,EAIX,OAHA5U,EAAS,IACT+F,EAAS,CAAE1C,KAAMzB,GAAGyS,UAAWrX,MAAO4X,SACtC/M,IAMF,MAAM1N,EAAUuD,EAAKvC,SAASgK,EAAMhL,SAC9BR,EAAQoC,EAAa6Y,EAAcza,GACrCR,EAAMsC,SACR8J,EAAS,CAAE1C,KAAMzB,GAAG0S,YAAatX,MAAO4X,IACxC5U,EAAS,IACL7F,EAAQ6D,OACV6J,KAIF9B,EAAS,CAAE1C,KAAMzB,GAAG4S,aAAcxX,MAAOrD,EAAMjD,YAGnD,CAACgH,EAAMyH,EAAMhL,QAAS6F,EAAU6H,EAAc3G,KAG1C,OAAEsG,EAAF,MAAU5R,EAAV,aAAiB6e,GAAiBtP,EAElC0P,EAAc5G,mBAAQ,IAAMzG,GAAU,sBAAMa,UAAW1Q,EAAQsE,QAAzB,SAAmCuL,KAAgB,CAC7FA,EACA7P,EAAQsE,UAGV,OACE,cAAC,GAAD,CACEoL,YAAW,sBAAiB3J,EAAK1C,QAAtB,KACXgC,MAAOA,EACPuK,SAAUnB,EACVkB,OAAQnB,EACR/D,SAAUkD,EACVmC,QAASkN,EACTnN,OAAQqN,EACRjf,MAAOA,EACP+R,SAAU8M,EACV7M,cAAc,WACd3B,eAAgBA,KCzFP6O,OAnCQ7T,IACrB,MAAM,QAAE8T,EAAF,KAAW7S,EAAX,MAAiB5G,EAAjB,KAAwBwD,GAASmC,EAUvC,OACE,eAAC+T,GAAA,EAAD,CACEC,sBAAoB,EACpBC,sBAAoB,EACpBC,SAAS,KACTC,kBAAgB,4BAChBlT,KAAMA,EALR,UAOE,cAACmT,GAAA,EAAD,CAAahM,GAAG,4BAAhB,SAA6C/N,IAC7C,cAACga,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAAoBzW,MAEtB,eAAC0W,GAAA,EAAD,WACE,cAACxS,GAAA,EAAD,CAAQyS,WAAS,EAACtS,QArBH,KACnB4R,GAAQ,IAoBqC7R,MAAM,UAA/C,oBAGA,cAACF,GAAA,EAAD,CAAQG,QApBG,KACf4R,GAAQ,IAmBuB7R,MAAM,UAAjC,uB,qBCjCR,MAAMwS,GAAczU,IAClB,MAAM,KAAE7C,EAAF,QAAQuX,GAAY1U,EAGpB2U,EAAY,MAChB,GAAIxX,EAAM,CACR,MAAMyX,EAAW,IAAIC,IAAI1X,EAAMuX,GAASI,WAExC,OADgB,IAAIC,MAAMH,KAHZ,GAuBZI,GAAWL,EAEjB,OACE,cAACvR,GAAA,EAAD,CAAS/I,MAAO2a,EAAU,wBAA0B,GAApD,SACE,8BACE,cAACjT,GAAA,EAAD,CACE1H,MAAM,aACN2H,QAAQ,YACRC,MAAM,YACNE,UAAW,cAAC,KAAD,IACXD,QAzBU,KAChB,GAAIyS,EACF,IACEA,EAAUM,YAAc,EACxBN,EAAUO,OAAOC,OAAO/U,IACtB3I,QAAQ9C,MAAM,CAAEc,QAAS,qBAAsB2f,IAAKT,EAAUS,IAAK7f,IAAK6K,OAE1E,MAAOA,GACP3I,QAAQ9C,MAAM,CAAEc,QAAS,qBAAsB2f,IAAKT,EAAUS,IAAK7f,IAAK6K,MAkBtEiV,SAAUL,EANZ,uBAeOzX,WAAMmP,KAAK+H,I,UCpD1B,MAAM/O,GAAYC,cAAYC,IAAD,CAC3B0P,UAAW,CACTvP,SAAU,OACVgF,QAAQ,GAAD,OAAKnF,EAAMnD,QAAQ,GAAnB,OAET8S,OAAQ,CACNxK,QAASnF,EAAMnD,QAAQ,IAAM,IAC7B,QAAS,CACPsI,QAAS,EACTuG,UAAW,OACXzB,aAAc,QAUd2F,GAAaxV,IACjB,MAAMtJ,EAAUgP,MACV,MAAE+P,EAAF,SAASrX,GAAa4B,EAEtB0V,EAAOD,EAAQ,MAAQ,OACvBE,EAAQF,EAAQ/e,EAAQ4e,UAAY5e,EAAQ6e,OAElD,OACE,cAACnD,GAAA,EAAD,CAAOhL,UAAWuO,EAAOzS,UAAWwS,EAApC,SACGtX,KAKQb,WAAMmP,KAAK8I,IC3B1B,MAAMI,GAAWC,IAAD,CAEZ3S,UAAWD,IACXjD,MAAO,CAAEgC,QAAS6T,EAAG3S,UAAW,IAAKC,cAAc,KAGjD2S,GAA8B,CAClCC,uBAAuB,EACvBC,UAAW,CACTC,GAAIL,GAAQ,MACZM,GAAIN,GAAQ,MACZO,GAAIP,GAAQ,MACZQ,GAAIR,GAAQ,MACZS,GAAIT,GAAQ,MACZU,GAAIV,GAAQ,MACZW,EAAGX,GAAQ,SACXY,IAAK,CAAEtT,UAAWsS,GAAWxV,MAAO,CAAEyV,OAAO,IAC7CgB,KAAM,CAAEvT,UAAWsS,MAIjBkB,GAAY1W,IAChB,MAAM,SAAE5B,GAAa4B,EAErB,OAAO,cAAC,KAAD,CAAI5B,SAAUA,EAAUuY,QAASb,MAG3BvY,ICFVoD,GDEUpD,OAAMmP,KAAKgK,K,SCFrB/V,O,iBAAAA,I,yBAAAA,I,2BAAAA,I,+BAAAA,I,mBAAAA,I,0BAAAA,Q,KAiBL,MAAMsD,GAAU,CAACC,EAAcC,KAC7B,MAAM,SAAEyS,GAAa1S,EACrB,OAAQC,GACN,KAAKxD,GAAGkW,aACN,MAAO,IAAK3S,EAAO4S,WAAW,EAAOF,SAAUA,EAAW,GAC5D,KAAKjW,GAAGoW,OACN,MAAO,IAAK7S,EAAO4S,WAAW,EAAME,UAAWJ,EAAW,GAC5D,KAAKjW,GAAGsW,UAEN,OAAO/S,EACT,KAAKvD,GAAGuW,UACN,MAAO,IAAKhT,EAAOiT,YAAY,GACjC,KAAKxW,GAAGyW,WACN,MAAO,IAAKlT,EAAOiT,YAAY,GACjC,KAAKxW,GAAGwS,MAEN,MAAO,CACL6D,UAAW,EACXJ,SAAU,EACVE,WAAW,EACXK,YAAY,EACZE,SAAUljB,KAAKmjB,SAASxC,SAAS,OAKnCyC,GAAc,CAAKzS,EAA6B0S,IACpDjY,uBAAY,IAAMuF,EAAS0S,IAAK,CAACA,EAAI1S,IAEjC2S,GAAQzX,IACZ,MAAM,KAAE0X,EAAF,QAAQhD,EAAR,UAAiBiD,GAAc3X,GAC/B,MAAE3F,EAAF,MAASG,EAAT,aAAgBP,GAAiByd,EAEjCE,EAAaD,EAAY,KAAH,kBAAqBjD,IAE1CmD,EAASC,GAAcpZ,GAAmBkZ,EAAY,CAAEnb,KAAM,EAAG7F,KAAM,OAEvE,SAAEggB,EAAF,UAAYI,EAAZ,UAAuBF,EAAvB,WAAkCK,KAAeY,GAAQjT,GAAYC,qBAAWd,GAAS,CAC9F+S,UAAWa,EAAQpb,KACnBma,SAAUiB,EAAQpb,KAClBqa,WAAW,EACXK,YAAY,EACZE,SAAU,cAGLW,EAAUC,GAAe1a,IAAMyB,SAA6B,MAE7DiB,EAAQH,KACRoY,EAAWtB,EAAWpc,EAAMrF,OAE5BsH,EAAOyb,EAAW1d,EAAMoc,GAAYpc,EAAMA,EAAMrF,OAAS,GAEzDyR,EAAe2Q,GAAYzS,EAAUnE,GAAGoW,QACxCoB,EAAeZ,GAAYzS,EAAUnE,GAAGkW,cACxCuB,EAAkBb,GAAYzS,EAAUnE,GAAGsW,WAC3CoB,EAAkB9Y,uBAAY,KAClC0Y,EAAY,MACZnT,EAASnE,GAAGuW,aACX,IACGoB,EAAc/Y,uBAAayT,IAC/BlO,EAASkO,EAAQrS,GAAGwS,MAAQxS,GAAGyW,cAC9B,IAWH3X,qBAAU,KACRkC,OAAO4W,OAAO,CAAElJ,IAAK,EAAGmJ,SAAU,WAClCV,GAAYW,IAGH,CAAE7hB,KADkB,IAAdogB,EAAkB,GAAKyB,EAAE7hB,KACvB6F,KAAMua,QAEtB,CAACA,EAAWc,IAEf,MAAMhX,EACJ,qCACE,cAACkG,EAAA,EAAD,CACE0R,gBAAc,cACdC,gBAAc,OACdzW,QAvBmB0W,IACvBX,EAAYW,EAAMC,gBAuBdxe,MAAM,eAJR,SAME,cAAC,KAAD,MAEF,cAACye,EAAA,EAAD,CACE1Q,GAAG,cACH4P,SAAUA,EACVe,aAAW,EACX9X,KAAM+X,QAAQhB,GACdlE,QA7BkB,KACtBmE,EAAY,OA6BRgB,cAAe,CAAEC,UAAW,cAACC,EAAA,EAAD,uBAN9B,SAQE,cAACC,GAAA,EAAD,CAAUlX,QAASmW,EAAnB,mCAKAgB,EAAmB5c,EAAKxC,cAC5B,cAACsI,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAASF,QAAS,EAA1C,SACE,cAACF,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAACE,GAAI,EAAlB,SACE,cAAC,GAAD,CAAU3E,SAAU3B,EAAKxC,mBAK/B,OACE,gCACE,cAACgJ,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAC4I,MAAM,SAA3D,SACG1R,IAGH,eAACyO,GAAA,EAAD,CAAUC,GAAImP,EAAd,UACE,cAACtH,GAAA,EAAD,CAAK0I,GAAI,EAAT,SACE,cAAC,GAAD,CAAUlb,SAAUnE,GAAgB,OAEtC,eAACsI,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGE,QAAQ,SAASD,WAAW,SAAxD,UACE,cAACH,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACK,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAI6I,MAAM,SAA7C,UACG5X,KAAKolB,IAAI3C,EAAW,EAAGpc,EAAMrF,QADhC,IAC0CqF,EAAMrF,OADhD,iBACsEsH,EAAK1C,QAD3E,SAIF,cAACwI,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC,GAAD,CAAYzF,KAAMV,EAAKzC,MAAO0a,QAASA,MAEzC,cAACnS,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAY9B,OAGbuY,EAGD,cAAC,GAAD,CAAW5c,KAAMA,EAAMoE,SAAU+F,GAAmBmR,EAAKV,aAI3D,cAACvO,GAAA,EAAD,CAAUC,IAAKmP,EAAUsB,cAAY,EAACC,eAAa,EAAnD,SACE,cAAC,GAAD,CACEnf,KAAMod,EAAKpd,KACX2F,MAAOA,EACPY,SAAWjK,GAASkhB,GAAYW,IAAD,IAAaA,EAAG7hB,KAAMA,MACrDA,KAAMihB,EAAQjhB,KACdkK,SAAUA,MAId,eAACiT,GAAA,EAAD,CACE9S,KAAM6V,EACNhD,QAASqE,EACThE,kBAAgB,qBAChBuF,mBAAiB,2BACjBC,qBAAsB1Z,EACtB2Z,SAAUxB,EANZ,UAQE,cAAChE,GAAA,EAAD,CAAahM,GAAG,qBAAhB,0CACA,cAACiM,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CAAmBlM,GAAG,2BAAtB,+DAIF,cAACmM,GAAA,EAAD,UACE,cAACxS,GAAA,EAAD,CACEG,QAASiW,EACTnW,QAAQ,YACRC,MAAM,UACNoT,UAAWyB,EACXtC,WAAS,EACTqF,oBAAkB,EANpB,SAQG7C,EAAYxc,EAAMrF,OAAS,YAAc,gBAIhD,cAAC,GAAD,CACE8L,KAAMkW,EACNrD,QAASwE,EACTje,MAAM,mBACNwD,KAAK,wEAMEN,WAAMmP,KAAK+K,I,UCzO1B,MAAM/R,GAAYC,cAAYC,IAAD,CAC3BkU,SAAU,CACR/T,SAAUH,EAAMmU,WAAWzD,GAAGvQ,SAC9B4C,WAAY,KAEd1U,KAAM,CACJ,YAAa,CACX+b,QAAS,yBAGb3b,UAAW,CACT4N,MAAO2D,EAAMsD,QAAQvU,MAAMme,UA0DhBS,OAhDOvT,IACpB,MAAMtJ,EAAUgP,MAEV,cAAEsU,EAAF,MAAiBrlB,EAAjB,QAAwBb,EAAU,GAAMkM,EAI9C,GAFAvI,QAAQ9C,MAAMA,IhCiBeslB,EgCfVtlB,ahCgBClB,GAAY,YAAawmB,EgChBlB,CACzB,MAAMC,EAAQvlB,EAAMb,QAAQA,GAC5B,OACE,gCACE,cAACmP,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,SACGxO,EAAMgB,WAET,cAACsN,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,SACGxO,EAAMc,UAET,cAAC,GAAD,CAAWggB,OAAK,EAACrX,SAAUzJ,EAAMc,UACjC,cAAC,GAAD,CAAWggB,OAAK,EAAhB,SACE,sBAAMrO,UAAW1Q,EAAQojB,SAAzB,SACGI,EAAM3lB,KAAI,EAAGG,MAAKF,WAAUG,WAC3B,uBACEyS,UAAW4E,aAAKtV,EAAQzC,KAAMU,GAAS+B,EAAQrC,WAE/C8lB,YAAWzlB,EAAIogB,WAAWsF,SAAS,EAAG,KAHxC,UAKG5lB,EACA,OAJIE,YAYjB,OACE,qCACE,cAACuO,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,SACG6W,IAEH,cAAC/W,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,SACGxO,EAAMc,ahCnBcwkB,OiCxC/B,MAAMI,GAAY3c,UAChB,IAAK4c,EAGH,YADA7iB,QAAQ8iB,IAAI,cAId,MAAM5c,QAAYC,MAAM0c,GAAanF,OAAOxgB,IAC1C,MAAIA,aAAiB6lB,WACnB/iB,QAAQ9C,MAAMA,GACR,IAAIyB,EAAJ,sEAEJzB,EAAMc,UAGFd,KAIV,GAAmB,MAAfgJ,EAAI8c,OACN,MAAM,IAAIrkB,EAAJ,UAAqBuH,EAAI+c,WAAzB,mCAGR,MAAM7c,QAAaF,EAAIG,OAEvB,OAAOxB,EAAUuB,IAQb8c,GAAS,EAAGvc,WAAUzJ,WAC1B,eAACsO,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAC4I,MAAM,SAA1D,UACGpX,GAAS,UACTyJ,KAuCUwc,OA5BG5a,IAChB,MAAM,YAAEsa,GAAgBta,EAClB0X,EAAOpZ,YAAS+b,GAAW,CAACC,IAC5B5F,EAAU,IAAIG,IAAIyF,ElC/CO,IAAIzF,IAAI1hB,EAAUwO,OAAOkZ,SkC+CJ/F,WAEpD,OAAI4C,EAAKrb,OACA,cAAC,GAAD,CAAMqb,KAAMA,EAAKrb,OAAQqY,QAASA,IAChCgD,EAAKoD,QAEZ,cAACjT,GAAA,EAAD,CACEkB,IAAE,EACFL,MAAO,CACLqS,gBAAiB,SAEnBtB,eAAa,EALf,SAOE,cAACxW,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAK6I,MAAM,SAA9C,SACE,cAACiP,GAAA,EAAD,QAIGtD,EAAK/iB,MACP,cAAC,GAAD,CAAcA,MAAO+iB,EAAK/iB,MAAOb,QAAS,EAAGkmB,cAAc,0BAE3D,cAACW,GAAD,CAAQhmB,OAAK,EAACyJ,SAAS,0B,kBCxElC,MAKa6c,GAAkB,KAC7B,MAAMC,EAAWC,cAEXC,EADS,IAAIC,gBAAgBH,EAASI,QACtB3iB,IAAI,UAE1B,GAAIyiB,EAAQ,CACV,MAAMG,EAAMC,aAAOJ,GACbpX,EAASuX,EAAI/hB,SAAS,MAAQ+hB,EAArB,kBAAsCA,GAErD,OAAO,cAAC,GAAD,CAAUjB,YAAatW,IAE9B,OAAO,cAACyX,GAAD,KAILA,GAAgB,KACpB,MAAOF,EAAKG,GAAU1c,mBAAS,IACzB2c,EAAS,IAAIN,gBAAgB,CAAED,OAAQQ,aAAOL,GAAK,KAASzG,WAElE,OACE,eAACvS,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,WAAW,SAASC,QAAQ,SAAxD,UACE,eAACJ,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIC,IAAE,EAACC,GAAI,EAA1B,UACE,cAACE,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAIC,cAAY,EAAnD,iDAGA,cAACO,GAAA,EAAD,CACEC,MAAM,WACN3B,QAAQ,SACR8B,WAAS,EACTC,SAAW3D,GAAMsb,EAAOtb,EAAE4D,OAAOjI,OACjCA,MAAOwf,EACP3X,WAAY,CACVgF,aACE,cAACtB,GAAA,EAAD,CAAgBG,SAAS,MAAzB,SACE,cAAC1F,GAAA,EAAD,CACEE,MAAM,UACND,QAAQ,YACRkB,UAAW2Y,KACXC,GAAI,CAAER,OAAQK,GAJhB,yBAaV,cAACpZ,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAf,SACE,eAACI,EAAA,EAAD,CAAYjB,QAAQ,QAAQ+J,MAAM,SAAlC,UACGpK,OAAOuZ,SAASa,KADnB,IAC0BJ,WAOnBK,OA7DG,KAChB,MAAM,MAAErG,EAAF,WAASsG,GAAeC,cAC9B,OAAO,cAAC,GAAD,CAAU5B,YAAahnB,EAAQqiB,EAAD,UAAWsG,EAAX,aCKvC,MAAME,GAAW,CAAC3oB,EAAc2J,IAAf,UAAmC3J,EAAnC,YAA2C2J,EAAK1E,QAAQ,QAAS,KAkDnE2jB,OAhDGpc,IAChB,MAAM,MAAE3C,EAAF,KAAS7J,GAASwM,EAExB,OAAqB,IAAjB3C,EAAMlI,OACD,cAAC8N,EAAA,EAAD,6BAGL,cAACV,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACGpF,EAAM9I,KACL,CAACmjB,EAAgBjjB,KACdijB,EAAK5gB,QACJ,cAACyL,GAAA,EAAD,CAAMK,MAAI,EAAuBI,GAAI,EAAGH,GAAI,GAA5C,SACE,eAAC+N,GAAA,EAAD,CACE1N,UAAWkP,KACXmE,EAAG,EACH3H,OAAO,OACP7U,QAAQ,OACRsiB,aAAa,gBACb3Z,WAAW,aACX4Z,SAAS,OAPX,UASE,eAAC1L,GAAA,EAAD,WACE,cAAC3N,EAAA,EAAD,CAAYhB,MAAM,UAAUkB,cAAY,EAAxC,SACGuU,EAAK9gB,OAER,cAACqM,EAAA,EAAD,CAAYjB,QAAQ,QAAQmB,cAAY,EAAxC,SACGuU,EAAKxa,iBAGV,cAAC0T,GAAA,EAAD,CAAK7W,QAAQ,OAAOoX,eAAe,WAAWzO,WAAW,WAAWiM,MAAM,OAA1E,SACE,cAAC5M,GAAA,EAAD,CACEmB,UAAW2Y,KACX5Z,MAAM,YACND,QAAQ,YACR8Z,GAAIK,GAAS3oB,EAAMkkB,EAAKva,MAJ1B,gCAnBN,mBAA4B1I,SCX1C,MAAM8nB,GAAkB7e,UACtB,IAAK8e,EAGH,YADA/kB,QAAQ8iB,IAAI,eAGd,MAAMgB,EAAMjoB,EAAQkpB,ErChBG,cqCkBjB7e,QAAYC,MAAM2d,GAAKpG,OAAOxgB,IAClC,MAAIA,aAAiB6lB,WACnB/iB,QAAQ9C,MAAMA,GACR,IAAIyB,EAAJ,sEAEJzB,EAAMc,UAGFd,KAIV,GAAmB,MAAfgJ,EAAI8c,OACN,MAAM,IAAIrkB,EAAJ,UAAqBuH,EAAI+c,WAAzB,mCAGR,MAAM7c,QAAaF,EAAIG,OAEvB,OCxC8D7G,EDwCzC4G,ECxCyDT,IDgD1Eud,GAAS,EAAGtkB,MAAK1B,WACrB,eAACsO,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAC4I,MAAM,SAA3D,UACGpX,GAAS,UACT0B,KA6DUomB,OA1DIzc,IAAkB,IAAD,IAClC,MAAMwc,EAAUxc,EAAMtH,MAAMijB,OAAOhG,MAE7BtX,EAAWN,IACX4X,EAAK,OAAGtX,QAAH,IAAGA,GAAH,UAAGA,EAAUhC,cAAb,iBAAG,EAAkB3F,eAArB,aAAG,EAA2B0E,MAAK,EAAG7H,YAAaipB,IAAYjpB,IAEpEmpB,EAAape,YAASie,GAAiB,CAACC,IAW9C,GAAIE,EAAWrgB,OAAQ,CACrB,MAAM,MAAEhC,EAAF,YAAS6C,EAAT,MAAsBG,GAAUqf,EAAWrgB,OACjD,OACE,gCACE,gCACE,cAAC4G,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAC4I,MAAM,SAA3D,SACG1R,IAEH,cAAC4I,EAAA,EAAD,CAAYjB,QAAQ,YAAYmB,cAAY,EAAC4I,MAAM,SAAnD,SACG7O,OAGL,cAAC+F,EAAA,EAAD,CAAYjB,QAAQ,KAAKmB,cAAY,EAArC,0BAGA,cAAC,GAAD,CAAU9F,MAAOA,EAAO7J,KAAMwM,EAAMkb,SAASyB,cAG5C,OAAID,EAAW5B,SAAWnF,EAE7B,8BACE,eAAC1S,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAC4I,MAAM,SAA3D,qBACW4J,EAAM/e,KADjB,WAKKyH,EAASyc,SAAW4B,EAAW5B,QAEtC,cAAC7X,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAC4I,MAAM,SAA3D,wBAIO2Q,EAAW/nB,MAElB,cAAC,GAAD,CAAcA,MAAO+nB,EAAW/nB,MAAOb,QAAS,EAAGkmB,cAAc,yBAG5D,cAAC,GAAD,CAAQrlB,OAAK,EAAC0B,IAAI,0B,UE1FdumB,OAnBE,IAEb,eAAChM,GAAA,EAAD,CAAKgC,SAAU,EAAf,UACE,cAAC3P,EAAA,EAAD,CAAY8I,MAAM,SAAS/J,QAAQ,KAAKkB,UAAU,KAAKC,cAAY,EAAnE,gCAGA,eAACF,EAAA,EAAD,CAAYjB,QAAQ,KAAKkB,UAAU,IAAnC,qMAGM,IACJ,cAAC2Y,GAAA,EAAD,CAAM3Y,UAAW2Z,KAAOf,GAAG,YAAY7Z,MAAM,UAA7C,8BAJF,U,SCUS6a,OAdC,KACd,MAAM,eAAE9X,EAAF,aAAkBG,EAAlB,WAAgCD,EAAhC,MAA4CnJ,EAA5C,IAAmDsI,GAAQQ,KAEjE,OACE,cAAC,GAAD,CACE9I,MAAOA,EACPoF,SAAUkD,EACVgC,OAAQnB,EACRoB,SAAUnB,EACVH,eAAgBA,KCZtB,MAAM+X,GAAWC,gBAAK,IAAM,gCAUbC,OANKjd,GAClB,cAAC,WAAD,CAAUkd,SAAU,KAApB,SACE,cAACH,GAAD,CAAUrkB,MAAOsH,EAAMtH,UCwBZykB,OArBA,IAEX,eAAC,IAAD,WACE,cAAC,IAAD,CAAO3pB,KAAK,IAAI4pB,OAAK,EAACla,UAAW0Z,KACjC,cAAC,IAAD,CAAOppB,KAAK,YAAY4pB,OAAK,EAACla,UAAW4Z,KACzC,cAAC,IAAD,CAAOtpB,KAAK,gBAAgB4pB,OAAK,EAACla,UAAWuZ,KAE7C,cAAC,IAAD,CAAOjpB,KAAK,6BAA6B4pB,OAAK,EAACla,UAAW8Y,KAC1C,cAAC,IAAD,CAAOxoB,KAAK,UAAU4pB,OAAK,EAACla,UAAW+X,KAGvD,cAAC,IAAD,CAAU5iB,KAAK,QAAQ+kB,OAAK,EAACtB,GAAG,cAEhC,cAAC,IAAD,CAAOtoB,KAAK,SAAS0P,UAAW+Z,KAGhC,cAAC,IAAD,CAAO/Z,UAAWma,U,uOC1BjB,MAAMC,GAAgB1X,IAAD,CAC1B2X,YAAY,uCAAD,OAAyC3X,EAAMnD,QAAQ,GAAvD,OACX+a,aAAa,wCAAD,OAA0C5X,EAAMnD,QAAQ,GAAxD,OACZ,CAACmD,EAAMC,YAAYC,GAAG,OAAQ,CAC5ByX,YAAY,uCAAD,OAAyC3X,EAAMnD,QAAQ,GAAvD,OACX+a,aAAa,wCAAD,OAA0C5X,EAAMnD,QAAQ,GAAxD,UC8BViD,GAAYC,cAAYC,IAAD,CAC3B6X,YAAa,CACXF,YAAY,uCAAD,OAAyC3X,EAAMnD,QAAQ,GAAvD,QAEbib,QAASJ,GAAa1X,OAGlB+X,GAAU,EAAGhpB,WACjB,qCACE,cAACipB,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CAAc3O,QAASva,EAAQ,yBAA2B,yBAE5D,cAACmpB,GAAA,EAAD,OAYEC,GAAY/d,IAChB,MAAM,SAAE2c,GAAaxB,eACf,GAAEW,EAAF,KAAMhe,EAAN,KAAYkgB,EAAZ,MAAkBZ,EAAlB,QAAyBM,GAAY1d,EAErCie,IAAaC,YAAUvB,EAAU,CAAEnpB,KAAMsoB,EAAIsB,MAAOA,IAE1D,OACE,eAACQ,GAAA,EAAD,CAAU9b,QAAM,EAACoB,UAAW2Y,KAAMC,GAAIA,EAAImC,SAAUA,EAAUvnB,QAAS,CAAEgnB,QAASA,GAAlF,UACGM,GAAQ,cAACG,GAAA,EAAD,UAAeH,IACxB,cAACH,GAAA,EAAD,CAAc3O,QAASpR,QAKvBsgB,GAAaC,aAAW,CAC5BC,WAAY,CACVrc,MAAOsc,KAAK,KACZ,YAAa,CACXtc,MAAO,SAET,qBAAsB,CACpBwI,gBAAiB8T,KAAK,OAG1BC,QAAS,GACTC,MAAO,IAXUJ,CAYhBK,MAwHYC,OAjHC3e,IACd,MAAO4e,EAAQC,GAAa7f,oBAAS,GAC/BtI,EAAUgP,MAEV,eAAEoZ,GAAmB9e,GAErB,OAAE3D,EAAF,QAAUye,EAAV,MAAmBnmB,GAAUoJ,IAE7BghB,EAAaxf,uBAAY,KAC7Bsf,GAAU,KACT,IACGG,EAAczf,uBAAY,KAC9Bsf,GAAU,KACT,IAEGI,EAAiB1f,uBACpBqZ,IACCkG,EAAelG,EAAM5U,OAAOwa,WAE9B,CAACM,IAGGI,EACJ,gCACE,cAACC,GAAA,EAAD,UACE,cAACpB,GAAD,CAAUjC,GAAG,IAAIhe,KAAK,OAAOkgB,KAAM,cAAC,KAAD,IAAcZ,OAAK,EAACM,QAAShnB,EAAQ+mB,gBAE1E,cAAC2B,GAAA,EAAD,IACA,eAACD,GAAA,EAAD,WACE,cAAChG,EAAA,EAAD,CAAeziB,QAAS,CAAEgnB,QAAShnB,EAAQ+mB,aAA3C,qBACC9oB,GAAS,cAACgpB,GAAD,CAAShpB,OAAK,IACvBmmB,GAAW,cAAC6C,GAAD,IACXthB,GACCA,EAAO3F,QAAQnC,KACb,EAAGqC,OAAMrD,SAAQuD,UAAUrC,KACxBqC,GACC,cAACinB,GAAD,CAEEjC,GAAE,iBAAYvoB,GACduK,KAAMlH,EACN8mB,QAAShnB,EAAQ+mB,aAJnB,qBACqBhpB,SAQ/B,cAAC2qB,GAAA,EAAD,IACA,eAACD,GAAA,EAAD,WACE,cAAChG,EAAA,EAAD,CAAeziB,QAAS,CAAEgnB,QAAShnB,EAAQ+mB,aAA3C,mBAEE,cAACM,GAAD,CACEjC,GAAG,UACHhe,KAAK,cACLkgB,KAAM,cAAC,KAAD,IACNZ,OAAK,EACLM,QAAShnB,EAAQ+mB,cAGrB,cAACM,GAAD,CACEjC,GAAG,YACHhe,KAAK,eACLkgB,KAAM,cAAC,KAAD,IACNZ,OAAK,EACLM,QAAShnB,EAAQ+mB,oBAMzB,OACE,gCACE,cAAC4B,GAAA,EAAD,CAAQC,OAAO,OAAOre,KAAM2d,EAAQ9K,QAASkL,EAA7C,SACE,eAACpO,GAAA,EAAD,CACE7W,QAAQ,OACRuR,SApIW,IAqIX8F,cAAc,SACdD,eAAe,gBACfvC,OAAO,OACPY,SAAS,SACT+P,KAAK,eAPP,UASGL,EACD,eAACtO,GAAA,EAAD,CAAK0I,GAAI,EAAT,UACE,cAACrW,EAAA,EAAD,CAAYC,UAAU,MAAtB,SACE,eAACX,GAAA,EAAD,CAAMW,UAAU,QAAQV,WAAS,EAACG,QAAQ,SAASD,WAAW,SAASD,QAAS,EAAhF,UACE,cAACF,GAAA,EAAD,CAAMK,MAAI,EAAV,mBACA,cAACL,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAACwb,GAAD,CAAYnc,MAAM,UAAUuc,QAASxe,EAAMwf,SAAUzb,SAAUkb,MAEjE,cAAC1c,GAAA,EAAD,CAAMK,MAAI,EAAV,uBAGJ,eAACK,EAAA,EAAD,CAAYjB,QAAQ,QAAQkB,UAAU,MAAM6I,MAAM,SAAS9J,MAAM,gBAAjE,2BACY,IACV,cAAC,KAAD,CAAS8Z,KCtLH3oB,sCDsLe6O,MAAM,UAA3B,SCvLS7O,sBD+LjB,cAACqsB,GAAA,EAAD,CAAQhY,SAAS,SAASxF,MAAM,YAAhC,SACE,eAACyd,GAAA,EAAD,CAAShpB,QAAS,CAAEgnB,QAAShnB,EAAQgnB,SAArC,UACE,cAAC1W,EAAA,EAAD,CAAY9E,QAAS6c,EAAYY,KAAK,QAAQ1d,MAAM,UAAUgF,aAAW,OAAzE,SACE,cAAC,KAAD,MAEF,cAAChE,EAAA,EAAD,CAAYjB,QAAQ,KAApB,8B,gDExMKL,UAAOie,cAAgBje,OAAOke,mBCe7C,MAAMC,GAA2B,CAC/B5W,QAAS,CACP9G,KAAM,QACN8M,QAAS,CACP4D,KAAMiN,KAAK,MAEbC,UAAW,CACTlN,KAAMmN,KAAO,QAKbC,GAA0B,CAC9BhX,QAAS,CACP9G,KAAM,OACN8M,QAAS,CACP4D,KAAMiN,KAAK,MAEbC,UAAW,CACTlN,KAAMmN,KAAO,QAKbva,GAAYC,cAAYC,IAAD,CAG3Bua,cAAe,CACbxR,MAAO,OACPyR,UAAW,aACXrmB,QAAS,QACTsmB,OAAQza,EAAMnD,QAAQ,EAAG,OAAQ,uCAC9B6a,GAAa1X,IAElB3F,MAAO,CACLqS,cAAe,OACfvC,OAAQ,MAEVuQ,UAAW,CACThV,SAAU,EACV2E,WAAY,4BACZhO,MAAO2D,EAAMsD,QAAQpL,KAAKuX,cAMf,SAASkL,KACtB,MAAM7pB,EAAUgP,KACVzF,EAAQH,KAER0gB,EAAkBC,aAAc,iCAC/B1N,EAAM2N,GAAWhiB,GAPT,cAOsD,MAErEe,qBAAU,KACJrM,IAGH,IAGHqM,qBAAU,KACR,MAAMkhB,EAAS,KACb5qB,SAAS6qB,oBAAoB,QAASD,GACtC,IAAIf,GAAa,CACfiB,YAAa,iBAGjB9qB,SAASoK,iBAAiB,QAASwgB,KAClC,IAEH,MAAMnB,EAAoB,OAATzM,EAAgByN,EAAkBzN,EAE7CnN,EAAQrI,IAAMyP,SAAQ,IAAM8T,aAAetB,EAAWU,GAAYJ,KAAa,CAACN,IAEtF,OACE,eAACuB,GAAA,EAAD,CAAenb,MAAOA,EAAtB,UACE,cAACob,GAAA,EAAD,IACA,cAAC,GAAD,CAAQxB,SAAUA,EAAUV,eAAgB4B,IAC5C,cAACO,GAAA,EAAD,CAAW/M,SAAS,KAAKxd,QAAS,CAAEgY,KAAMhY,EAAQypB,eAAlD,SACE,cAAC,GAAD,MAEF,cAACe,GAAA,EAAD,CACEC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdpgB,KAAMhB,EACNxK,QAAQ,aACR2R,UAAW1Q,EAAQuJ,MACnBqhB,aAAc,CAAE5qB,QAAS,CAAEgY,KAAMhY,EAAQ4pB,WAAa3N,UAAW6M,EAAW,EAAI,Q,gCC3FxF,MAAMrC,GAAS,EAAG/e,cAIP,cAAC,KAAD,CAAYA,SAAUA,IAIjCmjB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,UACE,cAAC,EAAD,UACE,cAAC,GAAD,UACE,cAAClB,GAAD,YAKRxqB,SAAS2rB,eAAe,SAG1BC,KAAaC,Y,gCCnCb,gFAEA,MAAMC,EAAU,iBAWhB,MAAMC,EAAQ,IAAIC,KAAK,cAwCjBC,EAAe,mBAER3gB,EAAc3D,MACzB9G,EACA0D,EACAV,GAAe,EACfqoB,KAEA,GAAoB,qBAATrrB,IAAyBgD,EAClC,OAGF,MAAMsoB,EAAgB5nB,GAAQ0nB,EAExBG,EA/DUvrB,IACTA,EAAK6B,QAAQ,UAAW,KAAKA,QAAQopB,EAAS,IA8DrCO,CAASxrB,GACnByrB,EAAWF,EAAQG,cACnBC,GAAWN,GApDE,MACnB,MAAMO,EAAM,IAAIT,KAChB,OAAO5tB,KAAKsuB,OAAOD,EAAIE,UAAYZ,EAAMY,WAAa,IAAO,IAAI5N,SAAS,KAkDjD6N,IAAgBL,cAEnCrnB,EAAQ,CADA,UAAMonB,EAAN,YAAkBE,GACPL,GAAe3pB,KAAK,KAU7C,MAAO,CAAC4pB,EApDgB,EAACS,EAAgBC,KACzC,MAAMC,EAAwB,CAACD,EAAQ1tB,OAAO2f,SAAS,KACvD,IAAK,IAAIrgB,EAAI,EAAGA,EAAIouB,EAAQ1tB,OAAQV,IAClCquB,EAAY5mB,KAAK0mB,EAAOG,OAAOtuB,IAC/BquB,EAAY5mB,KAAK2mB,EAAQE,OAAOtuB,IAGlC,OADAquB,EAAY5mB,KAAK0mB,EAAOtuB,MAAMuuB,EAAQ1tB,OAAQytB,EAAOztB,SAC9C2tB,EAAYvqB,KAAK,KA4CJyqB,QAxEtBtlB,eAAuBulB,GACrB,MAAMC,QAAYC,OAAOC,OAAOC,OAAO,UAAWJ,GAClD,OAAOK,YAAe,IAAIC,WAAWL,IA+DlBM,EAAQ,IAAIC,aAAc7H,OAAO3gB,KAIjDqnB,cACA7pB,QAAQ,aAAc,IACtBnE,MAAM,EAhEQ,IAiE2BiuB,IACdhqB,KAAK,MAUxBmrB,EAAYhmB,MAAOimB,EAAcrpB,KAAwC,IAAD,EACnF,MAAM4nB,EAAgB5nB,GAAQ0nB,EAExB9nB,EAAWypB,EAAK3vB,MAAM,MACrB4C,EAAMksB,GAAe5oB,EAC5B,GAAwB,IAApBA,EAAS/E,QAAgB2tB,EAAYpqB,MAAMmpB,GAAU,CAGvD,MAAO,CAAEjrB,KAAM+sB,EAAM3oB,SAAS,EAAOvF,QADnCyE,EAAS/E,OAAS,EAAI,0BAA4B,gCAGtD,MAAOyuB,EAAK3B,GA7De4B,KAC3B,MAAM1uB,EAAS2uB,SAASD,EAAQd,OAAO,GAAI,IACrCD,EAAce,EAAQvvB,MAAM,EAAGuvB,EAAQ1uB,QACvCytB,EAAmB,GACnBC,EAAoB,GAC1B,IAAK,IAAIpuB,EAAI,EAAGA,EAAa,EAATU,EAAYV,GAAK,EACnCmuB,EAAO1mB,KAAK4mB,EAAYC,OAAOtuB,IAC/BouB,EAAQ3mB,KAAK4mB,EAAYC,OAAOtuB,EAAI,IAGtC,OADAmuB,EAAO1mB,KAAK4mB,EAAYxuB,MAAe,EAATa,EAAY2tB,EAAY3tB,SAC/C,CAACytB,EAAOrqB,KAAK,IAAKsqB,EAAQtqB,KAAK,MAmDlBwrB,CAAajB,EAAYR,eACvC0B,EAhFiBC,KACvB,MACMC,EAAmB,GADTJ,SAASG,EAAW,IACN,IAAOnC,EAAMY,UAC3C,OAAO,IAAIX,KAAKmC,IA6EHC,CAAgBlC,GAvFZ,MAyFV,OAAH2B,QAAG,IAAHA,OAAA,EAAAA,EAAKzuB,SACPsC,QAAQC,KAAK,6CAEf,MAAM0sB,EAAYT,EAAKrB,cAEvB,MAAO,CAAE1rB,OAAMotB,OAAMhpB,SADP,gBAAUqG,EAAYzK,EAAMsrB,GAAe,EAAMD,UAAjD,aAAG,EAAsDK,iBAC5B8B,EAAW3uB,QAASkuB,K,wDCpGlDtG,IANE,IACf,cAAC,IAAD,CAAYrb,QAAQ,KAAK+J,MAAM,SAA/B,yE","file":"static/js/main.4f111f8c.chunk.js","sourcesContent":["// A list of constants for the project\n\n// PUBLIC_URL access\nexport const BASE_URL = `${process.env.PUBLIC_URL}/config`;\n\n// URL of teh manifest file\nexport const MANIFEST_FILE = `${BASE_URL}/manifest.yaml`;\n\n// Name of the task file\nexport const TASK_FILE = \"tasks.yaml\";\n\n// Generate a full file URL given the folder and the pathname\nexport const fileUrl = (folder: string, path: string) => `${BASE_URL}/${folder}/${path}`;\n\nexport const fullBaseUrl = () => new URL(BASE_URL, window.origin);\n","import { Document } from \"yaml\";\nimport { StructError } from \"superstruct\";\nimport { YAMLError } from \"yaml/util\";\n\nexport class IPAError extends Error {}\n\ninterface Line {\n  num: number;\n  contents: string;\n  error: boolean;\n}\n\n// Note: line is assumed one indexed\nconst getLines = (lines: string | string[], lineIdx: number, context: number): Line[] => {\n  const lineArr = typeof lines === \"string\" ? lines.split(\"\\n\") : lines;\n  const line = lineIdx - 1;\n\n  const start = Math.max(line - context, 0);\n  const errorLine = Math.max(line, line - context) - start;\n\n  if (line < 0) {\n    return [];\n  } else {\n    return lineArr.slice(line - context, line + context + 1).map((contents, i) => ({\n      num: start + i + 1,\n      contents,\n      error: i === errorLine,\n    }));\n  }\n};\n\nconst indexToLines = (str: string, idx: number, context: number): Line[] => {\n  const lines = str.split(\"\\n\");\n\n  // Yes, we need this here from function\n  const line = lines.findIndex(\n    function (this: { pos: number }, ln) {\n      this.pos += ln.length + 1;\n      return idx < this.pos;\n    },\n    { pos: 0 }\n  );\n\n  return getLines(lines, line + 1, context);\n};\n\ninterface ContextError {\n  headline: string;\n  context(n?: number): Line[];\n}\n\nexport const isContextError = (o: any): o is ContextError => {\n  return o instanceof IPAError && \"context\" in o;\n};\n\nexport class ParseError extends IPAError implements ContextError {\n  dat: string;\n  err: YAMLError;\n  headline = \"File parsing error\";\n\n  constructor(data: string, err: YAMLError) {\n    super(err.message);\n    this.dat = data;\n    this.err = err;\n  }\n\n  context(n = 1) {\n    const linePos = this.err.linePos?.start;\n    if (linePos) {\n      return getLines(this.dat, linePos.line, n);\n    } else {\n      return [];\n    }\n  }\n}\n\nexport class ValidateError extends IPAError implements ContextError {\n  dat: string;\n  doc: Document;\n  err: StructError;\n  headline = \"File validation error\";\n\n  constructor(data: string, document: Document, err: StructError) {\n    super(err.message);\n    this.dat = data;\n    this.doc = document;\n    this.err = err;\n  }\n\n  context(n = 1) {\n    const node = this.doc.getIn(this.err.path, true);\n    return indexToLines(this.dat, node.range[0], n);\n  }\n}\n\nexport class ResourceError extends IPAError {\n  originalMessage?: string;\n\n  constructor(msg: string, orig?: string) {\n    super(msg);\n    this.originalMessage = orig;\n  }\n}\n","import { Infer, array, boolean, object, optional, string } from \"superstruct\";\n\nexport type ManifestDef = Infer<typeof ManifestFile>;\n\nexport const ManifestFile = object({\n  classes: array(\n    object({\n      name: string(),\n      folder: string(),\n      hidden: optional(boolean()),\n    })\n  ),\n});\n","import YAML from \"yaml\";\nimport { Struct, validate } from \"superstruct\";\nimport { IPAError, ParseError, ValidateError } from \"../error\";\n\nexport const parse = <T, S>(contents: string, struct: Struct<T, S>): T => {\n  const doc = YAML.parseDocument(contents, { prettyErrors: true });\n\n  doc.warnings.forEach((warning) => console.warn(warning));\n\n  if (doc.errors.length > 0) {\n    // Log all of the errors, but only throw the first one.\n    doc.errors.forEach((err) => console.error(err));\n    throw new ParseError(contents, doc.errors[0]);\n  }\n  const fileContents = doc.toJSON();\n\n  const [err, valid] = validate(fileContents, struct);\n  if (!valid) {\n    if (!err) {\n      throw new IPAError(\"Bad state. Both No valid and no error!\");\n    }\n    throw new ValidateError(contents, doc, err);\n  }\n\n  return valid;\n};\n","// import { STRESS } from \"./ipa\";\n\n// We will always prefer the multi char version of a symbol, so always expand it\nconst CANONICAL_FORMS = new Map([\n  [\"ʧ\", \"t͡ʃ\"],\n  [\"ʤ\", \"d͡ʒ\"],\n  [\"ɚ\", \"ə˞\"],\n  [\"ɝ\", \"ɜ˞\"],\n  // coerce an exclamation point to postalveolar click\n  // [\"!\", \"ǃ\"],\n  // coerce an apostrophe to the ejective\n  // [\"'\", STRESS],\n]);\n\nconst NORM = \"NFKD\";\n\nconst MATCHER = new RegExp(Array.from(CANONICAL_FORMS.keys()).join(\"|\"), \"gu\");\n\nconst normalize = (str: string) => {\n  const normalized = str.normalize(NORM);\n  return normalized.replace(MATCHER, (match) => CANONICAL_FORMS.get(match) || \"⍰\");\n};\n\nexport default normalize;\n","import {\n  Infer,\n  array,\n  boolean,\n  object,\n  optional,\n  record,\n  refine,\n  string,\n  union,\n} from \"superstruct\";\n\nexport type TaskFileDef = Infer<typeof TaskFile>;\nexport type TaskFileWord = Infer<typeof Word>;\nexport type TaskFileMacros = Infer<typeof Macros>;\nexport type TaskFileSegment = Infer<typeof Segment>;\n\nconst Macros = record(string(), array(string()));\n\nconst Segment = record(string(), union([boolean(), string()]));\n\nconst ValidateSegment = refine(Segment, \"Segment\", (segment, context) => {\n  const index = context.path[context.path.length - 1];\n  const parent = context.branch[context.branch.length - 1];\n\n  // Slightly hacky way of checking for current segment number and if last segment\n  if (typeof index === \"string\" || !Array.isArray(parent)) {\n    return \"Segments may only occur in arrays\";\n  }\n\n  for (const key in segment) {\n    if ((key.includes(\"...\") || key.includes(\"%\")) && segment[key] === true) {\n      return \"Correct options are not allowed to use wildcards\";\n    }\n  }\n\n  if (index < parent.length - 1) {\n    if (segment[\"\"] === true) {\n      return `You may only terminate with \"\" on the last segment`;\n    }\n\n    if (Object.values(segment).reduce((run: boolean, curr) => run && curr !== true, true)) {\n      return `There must be at least one valid value in segment`;\n    }\n  } else {\n    // Last segment\n    if (segment[\"\"] === true) {\n      for (const key in segment) {\n        if (key !== \"\" && segment[key] === true) {\n          return \"You cannot have both a termination and another valid option in the last segment\";\n        }\n      }\n    }\n  }\n  // Validation successful\n  return true;\n});\n\nconst Word = object({\n  display: string(),\n  audio: optional(string()),\n  instructions: optional(string()),\n  segments: array(ValidateSegment),\n});\n\nexport const TaskFile = object({\n  author: string(),\n  title: string(),\n  salt: optional(string()),\n  instructions: optional(string()),\n  macros: optional(Macros),\n  words: array(Word),\n});\n","import escapeStringRegexp from \"escape-string-regexp\";\nimport normalize from \"../normalize\";\nimport { TaskFile, TaskFileMacros, TaskFileSegment } from \"../../data/task\";\nimport { parse } from \"./parse\";\n\nexport interface TaskDef {\n  author: string;\n  title: string;\n  instructions?: string;\n  salt?: string;\n  macros: Macros;\n  words: Word[];\n}\n\ntype Explanations = Map<string, string>;\ninterface Wildcard {\n  matcher: string;\n  message: string;\n}\n\nexport interface WordSegment {\n  final?: boolean;\n  correct: string[];\n  explanations: Explanations;\n  wildcards?: Wildcard[];\n}\n\nexport interface Word {\n  display: string;\n  audio?: string;\n  instructions?: string;\n  segments: WordSegment[];\n}\n\ninterface SegmentMatch {\n  correct: boolean;\n  message?: string;\n}\n\nexport const DEFAULT_MESSAGE = \"Whoops, that's not right. Try again!\";\nexport const END_MESSAGE = \"Hmmm... Are you sure there's more sounds here?\";\n// replaceAll is not supported in Github actions because we need node 15.x for that :'(\nconst KLEENE_REPLACE = new RegExp(escapeStringRegexp(escapeStringRegexp(\"...\")), \"g\");\nconst ANY_REPLACE = new RegExp(escapeStringRegexp(escapeStringRegexp(\"%\")), \"g\");\n\nexport const wildcardToRegex = (wildcard: string) => {\n  const str = escapeStringRegexp(wildcard);\n  const kleene = str.replace(KLEENE_REPLACE, \".*\").replace(ANY_REPLACE, \".\");\n  return new RegExp(`^${kleene}$`, \"u\");\n};\n\n/**\n * Attempt to match a word segment\n * @param input The user inputted value to check\n * @param segment The word segment we are matching\n */\nexport const matchSegment = (rawInput: string, segment?: WordSegment): SegmentMatch => {\n  if (!segment) {\n    return { correct: false, message: END_MESSAGE };\n  }\n\n  const input = normalize(rawInput);\n\n  let message: string | undefined;\n  if (segment.correct.includes(input)) {\n    return { correct: true };\n  } else if ((message = segment.explanations.get(input))) {\n    return { correct: false, message: message };\n  } else if (segment.wildcards) {\n    // Do the wildcard lookup :(\n    const match = segment.wildcards.find(({ matcher }) => {\n      return wildcardToRegex(matcher).test(input);\n    });\n    if (match) {\n      return { correct: false, message: match.message };\n    }\n  }\n\n  // Return a the end message if there are no correct options\n  return { correct: false, message: segment.correct.length === 0 ? END_MESSAGE : DEFAULT_MESSAGE };\n};\n\ntype Macro = string;\n\ninterface Macros {\n  [k: string]: string[];\n}\n\nexport const expandMacro = (str: Macro, macros: Macros, encountered: string[] = []): string[] => {\n  if (macros.hasOwnProperty(str)) {\n    // Key exists\n    const newEncountered = [...encountered, str];\n    let results: string[] = [];\n\n    macros[str].forEach((value) => {\n      if (macros.hasOwnProperty(value) && !newEncountered.includes(value)) {\n        // If we find another macro we haven't encountered, append it's expansion\n        const expanded = expandMacro(value, macros, newEncountered);\n        results = results.concat(expanded);\n      } else {\n        results.push(value);\n      }\n    });\n    return results;\n  } else {\n    // Resolve the base case of no macros\n    return [str];\n  }\n};\n\nconst pickValues = <T, K extends keyof T>(values: T, ops: K[]): Pick<T, K> => {\n  let result = {} as Pick<T, K>;\n  ops.forEach((key) => {\n    result[key] = values[key];\n  });\n  return result;\n};\n\nconst getMacros = (macros: TaskFileMacros | undefined): Macros => {\n  if (macros) {\n    let result: Macros = {};\n    // iterate over record\n    for (const key in macros) {\n      // Todo: raise an error if a key is defined twice\n      result[normalize(key)] = macros[key].map(normalize);\n    }\n    return result;\n  } else {\n    return {};\n  }\n};\n\nconst getSegments = (segments: TaskFileSegment[], macros: Macros): WordSegment[] => {\n  const validSegments = segments.map(\n    (segment, i): WordSegment => {\n      let correct: string[] = [];\n      let wildcards: Wildcard[] = [];\n      const explanations = new Map<string, string>();\n\n      // Record iteration\n      for (const key in segment) {\n        const sym = normalize(key);\n        const value = segment[key];\n        if (value === true) {\n          // Correct value(s)\n          correct = correct.concat(expandMacro(sym, macros));\n        } else if (sym.includes(\"...\") || sym.includes(\"%\")) {\n          // Wildcard matcher\n          wildcards.push({ matcher: sym, message: value || DEFAULT_MESSAGE });\n        } else {\n          // We just have a normal explanation\n          expandMacro(sym, macros).forEach((expand) => {\n            explanations.set(expand, value || DEFAULT_MESSAGE);\n          });\n        }\n      }\n      return { correct, explanations, wildcards };\n    }\n  );\n\n  // Ensure we have a final element listed\n  const lastElement = validSegments[validSegments.length - 1];\n  if (lastElement.correct.length === 0) {\n    // Final element exists, but we don't have a termination identifier\n    lastElement.correct.push(\"\");\n    lastElement.final = true;\n  } else if (lastElement.correct.includes(\"\")) {\n    // All data is good. Mark as final\n    lastElement.final = true;\n  } else {\n    // No final element existed, so we create one\n    validSegments.push({ correct: [\"\"], explanations: new Map(), final: true });\n  }\n\n  return validSegments;\n};\n\n// TODO: Actually do validations and make this type safe\nexport const parseTask = (contents: string): TaskDef => {\n  const valid = parse(contents, TaskFile);\n\n  const metadata = pickValues(valid, [\"author\", \"title\", \"salt\", \"instructions\"]);\n  const macros = getMacros(valid.macros);\n  const words = valid.words.map(\n    (word): Word => {\n      const meta = pickValues(word, [\"display\", \"audio\", \"instructions\"]);\n      const segments = getSegments(word.segments, macros);\n      return { ...meta, segments };\n    }\n  );\n\n  return { ...metadata, macros, words };\n};\n","import { Infer, array, boolean, object, optional, string } from \"superstruct\";\n\nexport type TaskListDef = Infer<typeof TaskListFile>;\nexport type TaskInfoDef = Infer<typeof TaskInfo>;\n\nconst TaskInfo = object({\n  name: string(),\n  description: string(),\n  file: string(),\n  hidden: optional(boolean()),\n});\n\nexport const TaskListFile = object({\n  title: string(),\n  description: string(),\n  tasks: array(TaskInfo),\n});\n","import React, { useContext } from \"react\";\nimport { UseAsyncReturn, useAsync } from \"react-async-hook\";\nimport { YAMLError } from \"yaml/util\";\nimport { MANIFEST_FILE } from \"./constants\";\nimport { ValidateError } from \"./utils/error\";\n\nimport { ManifestDef, parseManifest } from \"./utils/parsers\";\n\nconst ManifestContext = React.createContext<UseAsyncReturn<ManifestDef, never[]> | null>(null);\n\nconst fetchManifest = async (): Promise<ManifestDef> => {\n  // TODO: Change to force fetch even when cached\n  const req = await fetch(MANIFEST_FILE);\n  const body = await req.text();\n  // console.log(YAML.parseDocument(body, { prettyErrors: true }));\n  return parseManifest(body);\n};\n\nexport const useManifest = () => {\n  const asyncManifest = useContext(ManifestContext);\n  if (!asyncManifest) {\n    // Absurd\n    throw new Error(\"Error: you must wrapped in a <Manifest> context\");\n  }\n  return asyncManifest;\n};\n\ntype Props = {\n  children: React.ReactNode;\n};\n\n// Only show the error once\nlet errorShown = false;\n\nconst Manifest = ({ children }: Props) => {\n  const manifest = useAsync(fetchManifest, []);\n  if (manifest.error && !errorShown) {\n    errorShown = true;\n    console.error(manifest.error);\n    if (manifest.error instanceof YAMLError) {\n      // This is a YAML error\n      alert(\n        `Error: Your manifest.yaml contains invalid syntax. Please check the console for more info.`\n      );\n    } else if (manifest.error instanceof ValidateError) {\n      alert(`Issue parsing manifest.yaml: ${manifest.error.message}`);\n    } else {\n      alert(\"There was an error loading your manifest.yaml\");\n    }\n  }\n  return <ManifestContext.Provider value={manifest}>{children}</ManifestContext.Provider>;\n};\n\nexport default Manifest;\n","import { ManifestDef, ManifestFile } from \"../../data/manifest\";\nimport { parse } from \"./parse\";\n\nexport type { ManifestDef } from \"../../data/manifest\";\n\nexport const parseManifest = (contents: string): ManifestDef => parse(contents, ManifestFile);\n","import { useCallback, useDebugValue, useEffect, useRef, useState } from \"react\";\n\ntype JSONSafe = string | number | boolean | null | Array<JSONSafe> | { [l: string]: JSONSafe };\n\nexport const usePersistentState = <T = JSONSafe>(\n  key: string | null,\n  defaultValue: T,\n  persistOnLoad = false\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n  const mount = useRef(false);\n  const [value, setValue] = useState(() => {\n    const stored = key && localStorage.getItem(key);\n    if (stored === null) {\n      return defaultValue;\n    } else {\n      return JSON.parse(stored) as T;\n    }\n  });\n\n  useDebugValue({ [key || \"<nopersist>\"]: value });\n\n  const setter = useCallback((prevState: React.SetStateAction<T>) => {\n    setValue(prevState);\n  }, []);\n\n  useEffect(() => {\n    if (key && (mount.current || persistOnLoad)) {\n      localStorage.setItem(key, JSON.stringify(value));\n    } else {\n      mount.current = true;\n    }\n  }, [key, value, persistOnLoad]);\n\n  return [value, setter];\n};\n","import React from \"react\";\nimport { usePersistentState } from \"./usePersistentState\";\n\nconst DebugContext = React.createContext(false);\n\nexport const useDebugContext = () => React.useContext(DebugContext);\n\nconst Debug = (props: { children: React.ReactNode }) => {\n  const [debug, setDebug] = usePersistentState(\"debug_mode\", false);\n\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", (e) => {\n      if (e.key === \".\" && e.metaKey && e.shiftKey) {\n        setDebug((d) => !d);\n      }\n    });\n  }, [setDebug]);\n\n  // Register a way to toggle debugging for iOS, etc. disable in production\n  React.useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      window.toggleDebug = () => setDebug((d) => !d);\n    }\n  }, [setDebug]);\n\n  return <DebugContext.Provider value={debug}>{props.children}</DebugContext.Provider>;\n};\n\nexport default Debug;\n","import React, { useCallback, useRef, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Button, Grid, TextField, Tooltip, Typography } from \"@material-ui/core\";\nimport { computeHash } from \"../../utils/validation\";\n\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\n\ninterface Props {\n  prompt?: string;\n  salt?: string;\n  debug?: boolean;\n  name?: string | null;\n  onSubmit?: (name: string) => void;\n  controls?: React.ReactNode;\n}\n\nconst DEFAULTS = {\n  prompt: \"Name\",\n  debug: false,\n} as const;\n\nconst SubmitCode = (props: Props) => {\n  const { salt, debug, prompt, name: existingName, onSubmit, controls } = { ...DEFAULTS, ...props };\n  const [name, setName] = useState<string>(existingName || \"\");\n  const [run, setRun] = useState(!!existingName);\n  const [open, setOpen] = useState(false);\n  const inputRef = useRef<HTMLInputElement>();\n  const timer = useRef<number | undefined>();\n\n  const { result } = useAsync(computeHash, [name, salt, run]);\n\n  const displayValue = result ? result : name;\n\n  const copyText = useCallback(() => {\n    if (inputRef.current) {\n      const e = inputRef.current;\n      e.select();\n      e.setSelectionRange(0, e.value.length);\n      document.execCommand(\"copy\");\n      setOpen(true);\n      window.clearTimeout(timer.current);\n      timer.current = window.setTimeout(() => setOpen(false), 2000);\n    }\n  }, []);\n\n  const button = run ? (\n    <Button variant=\"contained\" color=\"primary\" onClick={copyText} startIcon={<AssignmentIcon />}>\n      Copy\n    </Button>\n  ) : (\n    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n      Submit\n    </Button>\n  );\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (name.trim()) {\n      setRun(true);\n      if (onSubmit) {\n        onSubmit(name);\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Grid container spacing={2} alignItems=\"center\" justify=\"center\">\n        <Grid item xs={12} sm={10} md={8} lg={6}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Congratulations on finishing this assignment! Type your {prompt} below and hit submit to\n            receive a unique code for completion.\n          </Typography>\n          <Tooltip\n            PopperProps={{\n              disablePortal: true,\n            }}\n            open={open}\n            disableFocusListener\n            disableHoverListener\n            disableTouchListener\n            title={<Typography variant=\"subtitle2\">Copied code!</Typography>}\n          >\n            <TextField\n              label={prompt}\n              variant=\"filled\"\n              InputProps={{\n                readOnly: !!result,\n              }}\n              inputRef={inputRef}\n              fullWidth\n              onChange={(e) => setName(e.target.value)}\n              value={displayValue}\n            />\n          </Tooltip>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\n            <Grid item>{button}</Grid>\n            {debug && (\n              <Grid item>\n                <Button variant=\"contained\" color=\"primary\" onClick={() => setRun(false)}>\n                  Reset\n                </Button>\n              </Grid>\n            )}\n            {controls && <Grid item>{controls}</Grid>}\n          </Grid>\n        </Grid>\n      </Grid>\n    </form>\n  );\n};\n\nexport default SubmitCode;\n","import { RefObject, useCallback, useDebugValue, useLayoutEffect, useReducer, useRef } from \"react\";\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface ValueAction<T> extends Action<T> {\n  value: string;\n}\n\nenum Op {\n  Delete,\n  Append,\n  Set,\n  Type,\n}\n\ntype Actions =\n  | Action<Op.Delete>\n  | ValueAction<Op.Append>\n  | ValueAction<Op.Set>\n  | ValueAction<Op.Type>;\n\ninterface State {\n  cursor: number;\n  value: string;\n  ref: RefObject<HTMLInputElement>;\n}\n\nfunction reducer(state: State, action: Actions): State {\n  const { value } = state;\n  // make broad assumptions about never having a large cursor selection\n  const cursor = state.ref?.current?.selectionStart || 0;\n  // console.log({ src: \"ref\", cursor: state.ref?.current?.selectionStart });\n  // console.log({ src: \"reducer\", cursor: cursor });\n  const cursorAfter = state.ref?.current?.selectionEnd || cursor;\n  switch (action.type) {\n    case Op.Delete:\n      if (cursor !== cursorAfter) {\n        return {\n          ...state,\n          cursor: cursor,\n          value: value.slice(0, cursor) + value.slice(cursorAfter, value.length),\n        };\n      } else if (cursor === 0) {\n        return state;\n      } else {\n        return {\n          ...state,\n          cursor: cursor - 1,\n          value: value.slice(0, cursor - 1) + value.slice(cursor, value.length),\n        };\n      }\n    case Op.Append:\n      return {\n        ...state,\n        cursor: cursor + action.value.length,\n        value: value.slice(0, cursor) + action.value + value.slice(cursorAfter, value.length),\n      };\n    case Op.Set:\n      return { ...state, value: action.value, cursor: action.value.length };\n    case Op.Type:\n      return { ...state, value: action.value };\n  }\n}\n\nconst useKeyboard = () => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [{ cursor, value }, dispatch] = useReducer(reducer, {\n    cursor: 0,\n    value: \"\",\n    ref: inputRef,\n  });\n\n  const handleKeyboard = useCallback(\n    (char: string) => dispatch({ type: Op.Append, value: char }),\n    []\n  );\n  const handleType = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => dispatch({ type: Op.Type, value: e.target.value }),\n    []\n  );\n  const handleDelete = useCallback(() => dispatch({ type: Op.Delete }), []);\n  const setValue = useCallback((val: string) => dispatch({ type: Op.Set, value: val }), []);\n\n  useLayoutEffect(() => {\n    // console.log(inputRef?.current?.selectionStart);\n    // console.log(cursor);\n    // Current hypothesis is that the value can end up getting updated after the element\n    // changes. If this happens, then chrome ends up with the cursor stuck at 0 ~half the time\n    // Edit: Still broken.\n    // setTimeout(() => {\n    // I tried both ways (leaving the text focused or not) and blur was a better experience\n    // console.log(inputRef?.current?.value);\n    const oldFocus = document.activeElement as HTMLInputElement;\n    inputRef.current?.focus();\n    inputRef.current?.setSelectionRange(cursor, cursor);\n    inputRef.current?.blur();\n    oldFocus?.focus();\n    // console.log(inputRef?.current?.selectionStart);\n    // console.log(cursor);\n    // }, 0);\n  }, [cursor]);\n\n  useDebugValue({ cursor: cursor, value: value });\n\n  return { handleKeyboard, handleDelete, handleType, setValue, value, ref: inputRef };\n};\n\nexport default useKeyboard;\n","import {\n  Collapse,\n  Fade,\n  FormControl,\n  FormHelperText,\n  IconButton,\n  InputAdornment,\n  InputLabel,\n  OutlinedInput,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from \"@material-ui/core\";\nimport React, { KeyboardEvent, RefObject, useCallback, useEffect, useState } from \"react\";\nimport BackspaceOutlinedIcon from \"@material-ui/icons/BackspaceOutlined\";\nimport CheckIcon from \"@material-ui/icons/Check\";\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    \"&:not(.MuiInputLabel-shrink)\": {\n      [theme.breakpoints.up(\"lg\")]: {\n        fontSize: \"2rem\",\n      },\n      fontSize: \"1.5rem\",\n    },\n  },\n  input: {\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"2rem\",\n    },\n    fontSize: \"1.5rem\",\n    \"&> fieldset > legend > span\": {\n      fontSize: \"0.75rem\",\n    },\n  },\n  noRightMargin: {\n    marginRight: 0,\n  },\n  helpTextSize: {\n    fontSize: \"1rem\",\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"1.5rem\",\n    },\n  },\n}));\n\nexport interface Props {\n  inputRef: RefObject<HTMLInputElement>;\n  value: string;\n  onType: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onDelete: () => void;\n  // optional header stuff\n  header?: React.ReactNode;\n  onCheck?: (val: string) => void;\n  checkDescription?: string;\n\n  error?: boolean;\n  helpText?: string;\n  placeholder?: string;\n  headerTooltip?: string;\n}\n\nconst IPAInput = (props: Props) => {\n  const classes = useStyles();\n  const {\n    placeholder = \"Type IPA\",\n    value,\n    onType,\n    onDelete,\n    inputRef,\n    header,\n    onCheck,\n    checkDescription,\n    error,\n    helpText,\n    headerTooltip,\n  } = props;\n\n  const [open, setOpen] = useState(false);\n\n  // This should be fine (famous last words...)\n  const handleSubmit = useCallback(() => {\n    onCheck && onCheck(inputRef.current?.value || \"\");\n  }, [onCheck, inputRef]);\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLDivElement>) => {\n      if (e.key === \"Enter\") {\n        handleSubmit();\n      }\n    },\n    [handleSubmit]\n  );\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const check = onCheck && (\n    <Tooltip title={checkDescription || \"Submit IPA Symbol or End Word\"} enterDelay={500}>\n      <IconButton aria-label=\"check\" onMouseDown={preventDefault} onClick={handleSubmit}>\n        <CheckIcon />\n      </IconButton>\n    </Tooltip>\n  );\n\n  const helperText = helpText && (\n    <Typography variant=\"body2\" component=\"span\" className={classes.helpTextSize}>\n      {helpText}\n    </Typography>\n  );\n\n  useEffect(() => {\n    if (header && headerTooltip) {\n      setOpen(true);\n      window.setTimeout(() => setOpen(false), 1500);\n    }\n  }, [header, headerTooltip]);\n\n  const headerContent = header && (\n    <InputAdornment\n      disablePointerEvents\n      disableTypography\n      position=\"start\"\n      classes={{ positionStart: classes.noRightMargin }}\n    >\n      {headerTooltip ? (\n        <Tooltip\n          open={open}\n          disableFocusListener\n          disableHoverListener\n          disableTouchListener\n          placement=\"bottom-end\"\n          TransitionComponent={Fade}\n          TransitionProps={{ timeout: 400 }}\n          title={<Typography variant=\"subtitle2\">{headerTooltip}</Typography>}\n        >\n          <span>{header}</span>\n        </Tooltip>\n      ) : (\n        header\n      )}\n    </InputAdornment>\n  );\n\n  return (\n    <FormControl fullWidth error={error} variant=\"outlined\">\n      <InputLabel htmlFor=\"ipa-typer\" className={classes.label}>\n        {placeholder}\n      </InputLabel>\n      <OutlinedInput\n        id=\"ipa-typer\"\n        label={placeholder}\n        onKeyPress={handleEnter}\n        className={classes.input}\n        onChange={onType}\n        value={value}\n        inputRef={inputRef}\n        inputProps={{\n          spellCheck: \"false\",\n          autoCorrect: \"off\",\n          autoComplete: \"off\",\n          style: { lineHeight: 2 },\n        }}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <Tooltip title=\"Delete\" enterDelay={500}>\n              <IconButton aria-label=\"delete\" onMouseDown={preventDefault} onClick={onDelete}>\n                <BackspaceOutlinedIcon />\n              </IconButton>\n            </Tooltip>\n            {check}\n          </InputAdornment>\n        }\n        startAdornment={headerContent}\n      />\n      {/* Look into changing this to be a tool tip possibly */}\n      <Collapse in={error}>\n        <FormHelperText error variant=\"outlined\">\n          {helperText}\n        </FormHelperText>\n      </Collapse>\n    </FormControl>\n  );\n};\n\nexport default IPAInput;\n","import { Theme, darken, fade, lighten } from \"@material-ui/core/styles\";\n\nexport interface Clickable {\n  onClick?: (char: string) => void;\n}\n\nexport const borderColor = (theme: Theme) =>\n  theme.palette.type === \"light\"\n    ? lighten(fade(theme.palette.divider, 1), 0.88)\n    : darken(fade(theme.palette.divider, 1), 0.68);\n\nexport const shadowBorder = (size: string, color: string) => {\n  return `${size} 0 0 0 ${color}, 0 ${size} 0 0 ${color}, ${size} ${size} 0 0 ${color}, ${size} 0 0 0 ${color} inset, 0 ${size} 0 0 ${color} inset`;\n};\n","/**\n * Places of articulation\n */\nexport const PLACES = [\n  \"Bilabial\",\n  \"Labiodental\",\n  \"Dental\",\n  \"Alveolar\",\n  \"Postalveolar\",\n  \"Retroflex\",\n  \"Palatal\",\n  \"Velar\",\n  \"Uvular\",\n  \"Pharyngeal\",\n  \"Glottal\",\n] as const;\n\n/**\n * Manners of articulation\n */\nexport const MANNERS = [\n  \"Plosive\",\n  \"Nasal\",\n  \"Trill\",\n  \"Tap\",\n  \"Fricative\",\n  \"Lateral fricative\",\n  \"Approximant\",\n  \"Lateral approximant\",\n] as const;\n\nexport type PlaceOfArt = typeof PLACES[number];\nexport type MannerOfArt = typeof MANNERS[number];\n\n// The sounds that are either impossible or not used\nexport const IMPOSSIBLE = \"_\";\nconst IMP = IMPOSSIBLE;\nexport const NOT_USED = \"\";\nconst NUL = NOT_USED;\n\n// prettier-ignore\nexport const PULMONICS = [\n  [\"p\", \"b\", NUL, NUL, NUL, NUL, \"t\", \"d\", NUL, NUL, \"ʈ\", \"ɖ\", \"c\", \"ɟ\", \"k\", \"g\", \"q\", \"ɢ\", NUL, IMP, \"ʔ\", IMP],\n  [NUL, \"m\", NUL, \"ɱ\", NUL, NUL, NUL, \"n\", NUL, NUL, NUL, \"ɳ\", NUL, \"ɲ\", NUL, \"ŋ\", NUL, \"ɴ\", IMP, IMP, IMP, IMP],\n  [NUL, \"ʙ\", NUL, NUL, NUL, NUL, NUL, \"r\", NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, NUL, \"ʀ\", NUL, NUL, IMP, IMP],\n  [NUL, NUL, NUL, \"ⱱ\", NUL, NUL, NUL, \"ɾ\", NUL, NUL, NUL, \"ɽ\", NUL, NUL, IMP, IMP, NUL, NUL, NUL, NUL, IMP, IMP],\n  [\"ɸ\", \"β\", \"f\", \"v\", \"θ\", \"ð\", \"s\", \"z\", \"ʃ\", \"ʒ\", \"ʂ\", \"ʐ\", \"ç\", \"ʝ\", \"x\", \"ɣ\", \"χ\", \"ʁ\", \"ħ\", \"ʕ\", \"h\", \"ɦ\"],\n  [IMP, IMP, IMP, IMP, NUL, NUL, \"ɬ\", \"ɮ\", NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, IMP, IMP],\n  [NUL, NUL, NUL, \"ʋ\", NUL, NUL, NUL, \"ɹ\", NUL, NUL, NUL, \"ɻ\", NUL, \"j\", NUL, \"ɰ\", NUL, NUL, NUL, NUL, IMP, IMP],\n  [IMP, IMP, IMP, IMP, NUL, NUL, NUL, \"l\", NUL, NUL, NUL, \"ɭ\", NUL, \"ʎ\", NUL, \"ʟ\", NUL, NUL, IMP, IMP, IMP, IMP]\n] as const;\n\nexport const CLICKS = [\n  [\"ʘ\", \"Bilabial\"],\n  [\"ǀ\", \"Dental\"],\n  [\"ǃ\", \"(Post)alveolar\"],\n  [\"ǂ\", \"Palatoalveolar\"],\n  [\"ǁ\", \"Alveolar lateral\"],\n] as const;\n\nexport const IMPLOSIVES = [\n  [\"ɓ\", \"Bilabial\"],\n  [\"ɗ\", \"Dental/alveolar\"],\n  [\"ʄ\", \"Palatal\"],\n  [\"ɠ\", \"Velar\"],\n  [\"ʛ\", \"Uvular\"],\n] as const;\n\n// U+02BC\nexport const EJECTIVE = \"ʼ\";\n\nexport const EJECTIVES = [\n  [\"ʼ\", \"Examples:\"],\n  [\"pʼ\", \"Bilabial\"],\n  [\"tʼ\", \"Dental/alveolar\"],\n  [\"kʼ\", \"Velar\"],\n  [\"sʼ\", \"Alveolar fricative\"],\n] as const;\n\nexport const FILLER = \"◌\";\n\nexport const VOWEL_HEIGHTS = [\"Close\", \"Close-mid\", \"Open-mid\", \"Open\"] as const;\nexport const VOWEL_FRONTEDNESS = [\"Front\", \"Central\", \"Back\"] as const;\n\nexport type VowelLiteral = readonly [string, string] | string;\nexport type Coords = readonly [number, number];\n\ntype VowelCoords = readonly (readonly [VowelLiteral, Coords])[];\n\n/**\n * Associative array of Vowel pairs and ~coordinates\n *\n * Coords are specified on the range [0, 1]\n * x = frontedness\n * y = height\n *\n * Upper left (close front) is origin. Everything is translated afterwards to be\n * in the trapezium shape\n */\n// prettier-ignore\nexport const VOWELS: VowelCoords = [\n  // Close vowels\n  [[\"i\", \"y\"], [0, 0]],\n  [[\"ɨ\", \"ʉ\"], [0.5, 0]],\n  [[\"ɯ\", \"u\"], [1, 0]],\n\n  // Near close vowels\n  [[\"ɪ\", \"ʏ\"], [0.2, 1/6]],\n  [[\"\", \"ʊ\"], [0.75, 1/6]],\n\n  // Close-mid\n  [[\"e\", \"ø\"], [0, 1/3]],\n  [[\"ɘ\", \"ɵ\"], [0.5, 1/3]],\n  [[\"ɤ\", \"o\"], [1, 1/3]],\n\n  // Mid\n  [\"ə\", [0.5, 0.5]],\n\n  // Open-mid\n  [[\"ɛ\", \"œ\"], [0, 2/3]],\n  [[\"ɜ\", \"ɞ\"], [0.5, 2/3]],\n  [[\"ʌ\", \"ɔ\"], [1, 2/3]],\n\n  // Near-open\n  [[\"æ\", \"\"], [0, 5/6]],\n  [\"ɐ\", [0.5, 5/6]],\n\n  // Open\n  [[\"a\", \"ɶ\"], [0, 1]],\n  [[\"ɑ\", \"ɒ\"], [1, 1]],\n];\n\nexport const STRESS = \"ˈ\";\nexport const SECONDARY_STRESS = \"ˌ\";\n\ninterface MiscChar {\n  ipa: string;\n  sym?: string;\n  description: string;\n  examples?: readonly string[];\n}\n\nexport type MiscList = readonly Readonly<MiscChar>[];\n\nexport const DIACRITICS: MiscList = [\n  { ipa: \"\\u0325\", description: \"Voiceless\", examples: [\"n\", \"d\"] },\n  { ipa: \"\\u032C\", description: \"Voiced\", examples: [\"s\", \"t\"] },\n  { ipa: \"\\u02B0\", description: \"Aspirated\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0339\", description: \"More rounded\", examples: [\"ɔ\"] },\n  { ipa: \"\\u031C\", description: \"Less rounded\", examples: [\"ɔ\"] },\n  { ipa: \"\\u031F\", description: \"Advanced\", examples: [\"u\"] },\n  { ipa: \"\\u0320\", description: \"Retracted\", examples: [\"e\"] },\n  { ipa: \"\\u0308\", description: \"Centralized\", examples: [\"e\"] },\n  { ipa: \"\\u033D\", description: \"Mid-centralized\", examples: [\"e\"] },\n  { ipa: \"\\u0329\", description: \"Syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u032F\", description: \"Non-syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u02DE\", description: \"Rhoticity\", examples: [\"ə\", \"a\"] },\n  { ipa: \"\\u0324\", description: \"Breathy voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u0330\", description: \"Creaky voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u033C\", description: \"Linguolabial\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B7\", description: \"Labialized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B2\", description: \"Palatalized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E0\", description: \"Velarized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E4\", description: \"Pharyngealized\", examples: [\"t\", \"d\"] },\n\n  { ipa: \"\\u032A\", description: \"Dental\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033A\", description: \"Apical\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033B\", description: \"Laminal\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0303\", description: \"Nasalized\", examples: [\"e\"] },\n  { ipa: \"\\u207F\", description: \"Nasal release\", examples: [\"d\"] },\n  { ipa: \"\\u02E1\", description: \"Lateral release\", examples: [\"d\"] },\n  { ipa: \"\\u031A\", description: \"No audible release\", examples: [\"d\"] },\n\n  { ipa: \"\\u0334\", description: \"Velarized or pharyngealized\", examples: [\"l\"] },\n\n  { ipa: \"\\u031D\", description: \"Raised\", examples: [\"e\"] },\n  { ipa: \"\\u031E\", description: \"Lowered\", examples: [\"e\"] },\n  { ipa: \"\\u0318\", description: \"Advanced tongue root\", examples: [\"e\"] },\n  { ipa: \"\\u0319\", description: \"Retracted tongue root\", examples: [\"e\"] },\n];\n\nexport const MISC: MiscList = [\n  {\n    ipa: \"\\u0361\",\n    sym: `${FILLER}\\u0361${FILLER}`,\n    description: \"Tie bar\",\n    examples: [\"t͡ʃ\", \"d͡ʒ\"],\n  },\n  { ipa: \"w\", sym: \"w\", description: \"Voiced labial-velar approximant\" },\n  { ipa: \"ʍ\", sym: \"ʍ\", description: \"Voiceless labial-velar fricative\" },\n  { ipa: \"ɥ\", sym: \"ɥ\", description: \"Voiced labial-palatal approximant\" },\n  { ipa: \"ʜ\", sym: \"ʜ\", description: \"Voiceless epiglottal fricative\" },\n  { ipa: \"ʢ\", sym: \"ʢ\", description: \"Voiced epiglottal fricative\" },\n  { ipa: \"ʡ\", sym: \"ʡ\", description: \"Epiglottal plosive\" },\n  { ipa: \"ɺ\", sym: \"ɺ\", description: \"Voiced alveolar lateral flap\" },\n  { ipa: \"ɕ\", sym: \"ɕ\", description: \"Voiceless alveolo-palatal fricative\" },\n  { ipa: \"ʑ\", sym: \"ʑ\", description: \"Voiced alveolo-palatal fricative\" },\n  { ipa: \"ɧ\", sym: \"ɧ\", description: \"Simultaneous ʃ and x\" },\n] as const;\n\nexport const SUPRASEGMENTALS: MiscList = [\n  { ipa: STRESS, sym: STRESS, description: \"Primary stress\" },\n  { ipa: SECONDARY_STRESS, sym: SECONDARY_STRESS, description: \"Secondary stress\" },\n  { ipa: \"ː\", sym: \"ː\", description: \"Long\", examples: [\"eː\"] },\n  { ipa: \"ˑ\", sym: \"ˑ\", description: \"Half-long\", examples: [\"eˑ\"] },\n  { ipa: \"\\u0306\", sym: `${FILLER}\\u0306`, description: \"Extra-short\", examples: [\"e\\u0306\"] },\n  { ipa: \"|\", sym: \"|\", description: \"Minor (foot) group\" },\n  { ipa: \"‖\", sym: \"‖\", description: \"Major (intonation) group\" },\n  { ipa: \".\", sym: \".\", description: \"Syllable break\" },\n  { ipa: \"‿\", sym: \"‿\", description: \"Linking (absence of break)\" },\n] as const;\n","import React, { useCallback } from \"react\";\n\nimport clsx from \"clsx\";\nimport { Clickable, borderColor } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { IMPOSSIBLE, MANNERS, NOT_USED, PLACES, PULMONICS } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  voiceless: {\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  voiced: {\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  impossible: {\n    backgroundColor: theme.palette.action.disabledBackground,\n    color: \"transparent\",\n    cursor: \"default\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.disabledBackground,\n    },\n  },\n  symbol: {\n    padding: theme.spacing(0, 0.5),\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n  },\n  leftSideBorder: {\n    borderLeft: `1px solid ${borderColor(theme)}`,\n  },\n  rightSideBorder: {\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  caps: {\n    padding: \"6px 5.5px\",\n  },\n  header: {\n    minWidth: \"56px\",\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst Pulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick } = props;\n  const clickCallback = useCallback(\n    (char) =>\n      (char !== IMPOSSIBLE && char !== NOT_USED && onClick && (() => onClick(char))) || undefined,\n    [onClick]\n  );\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  // TODO: Fix this at some point\n  const Cell = React.useCallback(\n    ({ x, y }: { x: number; y: number }) => {\n      const voiceless = PULMONICS[y]?.[x * 2];\n      const voiced = PULMONICS[y]?.[x * 2 + 1];\n\n      const hasBorders = x < 2 || x > 4 || y === 4;\n\n      return (\n        <>\n          <TableCell\n            align=\"center\"\n            className={clsx(\n              classes.symbol,\n              voiceless && classes.voiceless,\n              voiceless === IMPOSSIBLE && classes.impossible,\n              hasBorders && classes.leftSideBorder\n            )}\n            padding=\"none\"\n            onClick={clickCallback(voiceless)}\n            onMouseDown={preventDefault}\n          >\n            {voiceless}\n          </TableCell>\n          <TableCell\n            align=\"center\"\n            className={clsx(\n              classes.symbol,\n              voiced && classes.voiced,\n              voiced === IMPOSSIBLE && classes.impossible,\n              hasBorders && classes.rightSideBorder\n            )}\n            padding=\"none\"\n            onClick={clickCallback(voiced)}\n            onMouseDown={preventDefault}\n          >\n            {voiced}\n          </TableCell>\n        </>\n      );\n    },\n    [classes, clickCallback, preventDefault]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <TableHead>\n          <TableRow>\n            <TableCell>{/* Filler for articulation row */}</TableCell>\n            {PLACES.map((place) => (\n              <TableCell\n                key={`keyboard-place-${place}`}\n                align=\"center\"\n                className={clsx(classes.header, classes.caps)}\n                colSpan={2}\n                padding=\"none\"\n              >\n                {place}\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {MANNERS.map((manner, y) => (\n            <TableRow key={`keyboard-manner-${manner}`}>\n              <TableCell className={classes.caps}>{manner}</TableCell>\n              {PLACES.map((place, x) => (\n                <Cell key={`keyboard-l-${manner}-${place}`} x={x} y={y} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default React.memo(Pulmonics);\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { Clickable, borderColor } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { CLICKS, EJECTIVES, IMPLOSIVES } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  symbol: {\n    padding: theme.spacing(0.75, 1),\n    textAlign: \"center\",\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n    borderLeft: `1px solid ${borderColor(theme)}`,\n  },\n  descr: {\n    fontSize: \"0.8rem\",\n    verticalAlign: \"middle\",\n    padding: theme.spacing(0, 0.5),\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  header: {\n    padding: theme.spacing(0.75, 1.5),\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst NonPulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick = () => {} } = props;\n\n  const sounds = useMemo(() => {\n    return CLICKS.map((click, i) => [click, IMPLOSIVES[i], EJECTIVES[i]]);\n  }, []);\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const Cell = useCallback(\n    ({ symbol, name }: { symbol: string; name: string }) => {\n      return (\n        <>\n          <TableCell\n            className={classes.symbol}\n            onClick={() => onClick(symbol)}\n            onMouseDown={preventDefault}\n          >\n            {symbol}\n          </TableCell>\n          <TableCell className={classes.descr}>{name}</TableCell>\n        </>\n      );\n    },\n    [classes, onClick, preventDefault]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Clicks\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Voiced implosives\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Ejectives\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {sounds.map((row, i) => (\n            <TableRow key={`keyboard-nonpulmonic-${i}`}>\n              {row.map(([symbol, name], j) => (\n                <Cell key={`keyboard-nonpulmonic-${i}-${j}`} symbol={symbol} name={name} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default React.memo(NonPulmonics);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"g\", {\n  strokeWidth: 4,\n  fill: \"none\",\n  strokeLinecap: \"butt\",\n  strokeLinejoin: \"miter\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 17.74l950.68-.94L976 683.2l-477.16-1.23L24 17.74zM499.85 17.74l235.9 664.23M183.29 239.78l791.4-.94\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M343.58 461.81l629.09-1.88h1V459\"\n}));\n\nfunction SvgTrapezium({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1000 700\",\n    preserveAspectRatio: \"none\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref);\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrapezium);\nexport default __webpack_public_path__ + \"static/media/trapezium.dacff88a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { Clickable } from \"./common\";\n\nimport { Box, Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Coords, VOWELS, VOWEL_FRONTEDNESS, VOWEL_HEIGHTS, VowelLiteral } from \"../../utils/ipa\";\n\nimport { ReactComponent as Trapezium } from \"./trapezium.svg\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  outerQuad: {\n    padding: theme.spacing(1, 3),\n    fontSize: \"1.5rem\",\n    position: \"relative\",\n    height: \"100%\",\n    minHeight: \"275px\",\n    minWidth: \"270px\",\n  },\n  fullRel: {\n    height: \"100%\",\n    width: \"100%\",\n    position: \"relative\",\n  },\n  trapezium: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    stroke: theme.palette.text.primary,\n  },\n  quad: {\n    position: \"absolute\",\n    height: \"95%\",\n    width: \"95%\",\n    left: \"2.5%\",\n    top: \"2.75%\",\n  },\n  element: {\n    userSelect: \"none\",\n    cursor: \"default\",\n    position: \"absolute\",\n    transform: \"translate(-50%, -50%)\",\n    overflow: \"visible\",\n    width: \"1.2em\",\n    textAlign: \"center\",\n  },\n  rounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    left: \"0.75em\",\n  },\n  unrounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    right: \"0.75em\",\n  },\n  mid: {\n    width: \"100%\",\n  },\n  symbol: {\n    display: \"inline-block\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      borderRadius: \"3px\",\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  paperBack: {\n    \"&::before\": {\n      zIndex: \"-1\",\n      left: \"0\",\n      content: \"''\",\n      borderRadius: \"3px\",\n      position: \"absolute\",\n      display: \"inline-block\",\n      width: \"1.2em\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.paper,\n    },\n  },\n  fullHeight: {\n    height: \"100%\",\n  },\n  vowelPos: {\n    padding: theme.spacing(0, 2),\n  },\n  vowelHeight: {\n    padding: theme.spacing(0.5, 0),\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst vowelCoords = ([x, y]: Coords): { left: string; top: string } => {\n  const offset = y * 0.5;\n  const val = offset + (1 - offset) * x;\n  return { left: `${val * 100}%`, top: `${y * 100}%` };\n};\n\n/**\n * Vowel chart\n */\nconst Vowels = (props: Props) => {\n  const classes = useStyles();\n  const { onClick = () => {} } = props;\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const VowelElement = useCallback(\n    ({ vowels, coords }: { vowels: VowelLiteral; coords: Coords }) => {\n      if (typeof vowels === \"string\") {\n        return (\n          <Box className={clsx(classes.element, classes.paperBack)} style={vowelCoords(coords)}>\n            <div\n              className={clsx(classes.mid, classes.symbol)}\n              onClick={() => onClick(vowels)}\n              onMouseDown={preventDefault}\n            >\n              {vowels}\n            </div>\n          </Box>\n        );\n      } else {\n        const noCenter = vowels.join(\"\").length < 2;\n        // Zero width space or dot\n        const center = noCenter ? \"\\u00A0\" : \"•\";\n        return (\n          <Box\n            className={clsx(classes.element, { [classes.paperBack]: !noCenter })}\n            style={vowelCoords(coords)}\n          >\n            {center}\n            <div\n              className={clsx(classes.unrounded, classes.symbol, classes.paperBack)}\n              onClick={() => onClick(vowels[0])}\n              onMouseDown={preventDefault}\n            >\n              {vowels[0]}\n            </div>\n            <div\n              className={clsx(classes.rounded, classes.symbol, classes.paperBack)}\n              onClick={() => onClick(vowels[1])}\n              onMouseDown={preventDefault}\n            >\n              {vowels[1]}\n            </div>\n          </Box>\n        );\n      }\n    },\n    [classes, onClick, preventDefault]\n  );\n\n  const vowelChart = useMemo(\n    () => (\n      <Box className={classes.outerQuad}>\n        <div className={classes.fullRel}>\n          <Trapezium className={classes.trapezium} />\n          <div className={classes.quad}>\n            {VOWELS.map(([vowels, coords]) => (\n              <VowelElement key={`vowelbox-${vowels}`} vowels={vowels} coords={coords} />\n            ))}\n          </div>\n        </div>\n      </Box>\n    ),\n    [classes, VowelElement]\n  );\n\n  return (\n    <Box id=\"vowelQuad\" className={classes.root}>\n      <Grid container className={classes.fullHeight} wrap=\"nowrap\">\n        <Grid item>\n          <Grid container direction=\"column\" className={clsx(classes.fullHeight)}>\n            <Typography variant=\"body1\" component=\"p\">\n              &#8203;\n            </Typography>\n            <Grid item xs>\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"space-between\"\n                className={clsx(classes.fullHeight, classes.vowelHeight)}\n              >\n                {VOWEL_HEIGHTS.map((height) => (\n                  <Typography key={height} variant=\"body1\" component=\"p\">\n                    {height}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs>\n          <Grid container direction=\"column\" className={classes.fullHeight}>\n            <Grid item>\n              <Grid container justify=\"space-between\" className={classes.vowelPos}>\n                {VOWEL_FRONTEDNESS.map((pos) => (\n                  <Typography key={pos} variant=\"body1\" component=\"p\">\n                    {pos}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              {vowelChart}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default React.memo(Vowels);\n","import React, { useCallback } from \"react\";\nimport { Clickable, borderColor, shadowBorder } from \"./common\";\n\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { MiscList } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  symbol: {\n    userSelect: \"none\",\n    textAlign: \"center\",\n    cursor: \"pointer\",\n    fontSize: \"1.5rem\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  description: {\n    padding: \"2px\",\n    fontSize: \"0.8rem\",\n  },\n  descriptionParent: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    height: \"100%\",\n  },\n  bordered: {\n    boxShadow: shadowBorder(\"1px\", borderColor(theme)),\n  },\n}));\n\ntype Breakpoints = Pick<Parameters<typeof Grid>[0], \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\">;\n\ninterface Props extends Clickable {\n  content: MiscList;\n  genSym?: (ipa: string) => string;\n  breakpoints?: Breakpoints;\n  combine?: boolean;\n}\n\nconst GridDisplay = (props: Props) => {\n  const classes = useStyles();\n  const { onClick = () => {}, content, breakpoints = {}, genSym = (ipa) => ipa, combine } = props;\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  return (\n    <Grid container spacing={0}>\n      {content.map(({ ipa, sym, description, examples }) => (\n        <Grid item xs={12} {...breakpoints} key={description} className={classes.bordered}>\n          <Grid container>\n            <Grid\n              item\n              xs={2}\n              className={classes.symbol}\n              onClick={() => onClick(ipa)}\n              onMouseDown={preventDefault}\n            >\n              {sym || genSym(ipa)}\n            </Grid>\n            <Grid item xs>\n              <div className={classes.descriptionParent}>\n                <div className={classes.description}>{description}</div>\n              </div>\n            </Grid>\n            {/* Forgive me father, for I have sinned. I never should have used this much indentation */}\n            {examples?.map((char) => {\n              const combined = combine ? `${char}${ipa}` : char;\n              return (\n                <Grid\n                  key={combined}\n                  item\n                  xs={2}\n                  className={classes.symbol}\n                  onClick={() => onClick(combined)}\n                  onMouseDown={preventDefault}\n                >\n                  {combined}\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default React.memo(GridDisplay);\n","import React from \"react\";\nimport { Clickable } from \"./common\";\nimport { DIACRITICS, FILLER } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nconst Diacritics = (props: Clickable) => {\n  return (\n    <GridDisplay\n      {...props}\n      content={DIACRITICS}\n      breakpoints={{ md: 4, sm: 6 }}\n      genSym={(ipa) => `${FILLER}${ipa}`}\n      combine\n    />\n  );\n};\n\nexport default React.memo(Diacritics);\n","import React from \"react\";\nimport { Clickable } from \"./common\";\nimport { MISC } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nconst Other = (props: Clickable) => {\n  return <GridDisplay {...props} content={MISC} breakpoints={{ sm: 6 }} />;\n};\n\nexport default React.memo(Other);\n","import React from \"react\";\nimport { Clickable } from \"./common\";\nimport { SUPRASEGMENTALS } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nconst Suprasegmentals = (props: Clickable) => {\n  return (\n    <GridDisplay {...props} content={SUPRASEGMENTALS} breakpoints={{ md: 12, sm: 6, xs: 12 }} />\n  );\n};\n\nexport default React.memo(Suprasegmentals);\n","import React from \"react\";\nimport { Grid, Paper, Typography, makeStyles } from \"@material-ui/core\";\n\nimport Pulmonics from \"./Pulmonics\";\nimport { Clickable } from \"./common\";\nimport NonPulmonics from \"./NonPulmonics\";\nimport Vowels from \"./Vowels\";\nimport Diacritics from \"./Diacritics\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\nimport Other from \"./Other\";\nimport Suprasegmentals from \"./Suprasegmentals\";\n\n// import BackspaceOutlinedIcon from \"@material-ui/icons/BackspaceOutlined\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(1),\n    height: \"100%\",\n  },\n  childOrder: {\n    // Allow reordering the children of this element.\n    // This has the additional benefit of allowing an \"IPA\" setting\n    // On larger screens, show \"other\" left of \"vowels\"\n    [theme.breakpoints.up(\"md\")]: orderChildren(1, 3, 2),\n  },\n}));\n\nconst orderChildren = (...children: number[]) => {\n  let styles: CSSProperties = { \"& > *\": { order: 100 } };\n  children.forEach((child, i) => {\n    styles[`& > :nth-child(${i + 1})`] = { order: child };\n  });\n  return styles;\n};\n\ninterface Props extends Clickable {}\n\n/**\n * Accepts an onClick option. This is assumed to be memoized.\n */\nconst Keyboard = (props: Props) => {\n  const classes = useStyles();\n  const { onClick } = props;\n\n  return (\n    // 1\n    <Grid container spacing={2} className={classes.childOrder}>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Consonants (Pulmonics)\n          </Typography>\n          <Pulmonics onClick={onClick} />\n          <Typography variant=\"caption\" align=\"center\" component=\"p\">\n            Symbols to the right in a cell are voiced, to the left are voiceless. Shaded areas\n            denote articulations judged impossible.\n          </Typography>\n        </Paper>\n      </Grid>\n      {/* 2 */}\n      <Grid item xs={12} md={6}>\n        <Paper className={classes.paper}>\n          <Vowels onClick={onClick} />\n        </Paper>\n      </Grid>\n      {/* 3 */}\n      <Grid item xs={12} md={6}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Other\n          </Typography>\n          <Other onClick={onClick} />\n        </Paper>\n      </Grid>\n\n      <Grid item xs={12} md={8}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Diacritics\n          </Typography>\n          <Diacritics onClick={onClick} />\n        </Paper>\n      </Grid>\n\n      <Grid item xs={12} md={4}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Suprasegmentals\n          </Typography>\n          <Suprasegmentals onClick={onClick} />\n        </Paper>\n      </Grid>\n\n      {/* Ugh... non-pulmonics are the worst... */}\n      <Grid item xs={12} md={6}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Consonants (Non-pulmonics)\n          </Typography>\n          <NonPulmonics onClick={onClick} />\n        </Paper>\n      </Grid>\n\n      {/* Placeholder for adding phonology symbols? */}\n      <Grid item xs={12} md={6} hidden>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Common non-IPA symbols\n          </Typography>\n          <Typography>Coming soon...</Typography>\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default React.memo(Keyboard);\n","import React from \"react\";\n\nimport { Box, Grid, Paper, makeStyles, useTheme } from \"@material-ui/core\";\n\nimport IPAInput, { Props as InputProps } from \"./IPAInput\";\nimport useKeyboard from \"./useKeyboard\";\n\n// const Keyboard = React.lazy(() => import(\"./Keyboard\"));\nimport Keyboard from \"./Keyboard\";\n\nconst useStyles = makeStyles((theme) => ({\n  sticky: {\n    pointerEvents: \"none\", // Prevent background centering overlapping content\n    zIndex: 10,\n    position: \"sticky\",\n    top: `${theme.spacing(-1)}px`,\n    marginBottom: `${theme.spacing(theme.palette.type === \"dark\" ? 0 : 1)}px`,\n  },\n  input: {\n    pointerEvents: \"auto\", // Restore pointer events\n    backgroundColor:\n      theme.palette.type === \"dark\"\n        ? theme.palette.background.default\n        : theme.palette.background.paper,\n    borderRadius: \"8px\",\n  },\n}));\n\ninterface Props extends InputProps {\n  handleKeyboard: ReturnType<typeof useKeyboard>[\"handleKeyboard\"];\n}\n\nconst StickyIPA = (props: Props) => {\n  const theme = useTheme();\n  const classes = useStyles();\n\n  const { handleKeyboard, ...inputProps } = props;\n\n  // Testing revealed an elevated paper was preferred in light mode and contrastive flat in dark mode\n  const elevation = theme.palette.type === \"dark\" ? 0 : 3;\n\n  return (\n    <div>\n      <Box paddingY={2} className={classes.sticky}>\n        <Grid container alignItems=\"center\" justify=\"center\" spacing={2}>\n          <Grid item xs md={8} component={Paper} elevation={elevation} className={classes.input}>\n            <IPAInput {...inputProps} />\n          </Grid>\n        </Grid>\n      </Box>\n\n      <Keyboard onClick={handleKeyboard} />\n    </div>\n  );\n};\n\nexport default StickyIPA;\n","import React, { useCallback, useEffect, useMemo, useReducer } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core\";\n\nimport useKeyboard from \"../keyboard/useKeyboard\";\nimport StickyIPA from \"../keyboard/StickyIPA\";\n\nimport { Word, matchSegment } from \"../../utils/parsers/task\";\nimport { useDebugContext } from \"../../utils/Debug\";\n\nconst useStyles = makeStyles((theme) => ({\n  correct: {\n    color: theme.palette.type === \"dark\" ? theme.palette.success.main : theme.palette.success.dark,\n  },\n}));\n\ninterface Props {\n  word: Word;\n  onSubmit: () => void;\n}\n\nenum Op {\n  Reset,\n  SoftReset,\n  SetHeader,\n  NextSegment,\n  ErrorMessage,\n  ClearError,\n}\n\ninterface State {\n  word: Word;\n  segment: number;\n  header: string;\n  errorMessage?: string;\n  error: boolean;\n}\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface SetAction<T, V> extends Action<T> {\n  value: V;\n}\n\ntype Act =\n  | SetAction<Op.Reset, Word>\n  | SetAction<Op.SoftReset, Word>\n  | SetAction<Op.SetHeader, string>\n  | SetAction<Op.NextSegment, string>\n  | SetAction<Op.ErrorMessage, string | undefined>\n  | Action<Op.ClearError>;\n\nconst reset = (word: Word) => {\n  return {\n    word,\n    segment: 0,\n    header: \"\",\n    error: false,\n  };\n};\n\nconst reducer = (state: State, action: Act): State => {\n  switch (action.type) {\n    case Op.SoftReset:\n      return Object.is(action.value, state.word) ? state : reset(action.value);\n    case Op.Reset:\n      return reset(action.value);\n    case Op.SetHeader:\n      return { ...state, header: action.value };\n    case Op.NextSegment: // Inc segment and add value to header\n      return { ...state, segment: state.segment + 1, header: state.header + action.value };\n    case Op.ClearError:\n      return state.error ? { ...state, error: false } : state;\n    case Op.ErrorMessage:\n      return { ...state, error: true, errorMessage: action.value };\n  }\n};\n\nconst WordInput = (props: Props) => {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const { word, onSubmit: handleSubmit } = props;\n  const { handleKeyboard, handleDelete, handleType, setValue, value, ref } = useKeyboard();\n  const [state, dispatch] = useReducer(reducer, word, reset);\n\n  useEffect(() => dispatch({ type: Op.SoftReset, value: word }), [word]);\n  useEffect(() => dispatch({ type: Op.ClearError }), [value]);\n\n  // Run validation logic. If the\n  const handleCheck = useCallback(\n    (currentValue: string) => {\n      // Make life easier with debug mode\n      if (debug && currentValue === \"winston\") {\n        setValue(\"\");\n        dispatch({ type: Op.SetHeader, value: currentValue });\n        handleSubmit();\n        return;\n      }\n\n      // IDEA:  add an optional \"accept_multiple\" that will allow submission\n      //        of multiple segments at once.\n      const segment = word.segments[state.segment];\n      const match = matchSegment(currentValue, segment);\n      if (match.correct) {\n        dispatch({ type: Op.NextSegment, value: currentValue });\n        setValue(\"\"); // Clear the text box\n        if (segment.final) {\n          handleSubmit();\n        }\n      } else {\n        // If not a match, set the error text\n        dispatch({ type: Op.ErrorMessage, value: match.message });\n      }\n    },\n    [word, state.segment, setValue, handleSubmit, debug]\n  );\n\n  const { header, error, errorMessage } = state;\n\n  const headerValue = useMemo(() => header && <span className={classes.correct}>{header}</span>, [\n    header,\n    classes.correct,\n  ]);\n\n  return (\n    <StickyIPA\n      placeholder={`Transcribe \"${word.display}\"`}\n      value={value}\n      onDelete={handleDelete}\n      onType={handleType}\n      inputRef={ref}\n      onCheck={handleCheck}\n      header={headerValue}\n      error={error}\n      helpText={errorMessage}\n      headerTooltip=\"Correct!\"\n      handleKeyboard={handleKeyboard}\n    />\n  );\n};\n\nexport default WordInput;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport { DialogContentText } from \"@material-ui/core\";\n\nexport interface Props {\n  open: boolean;\n  onClose: (confirm: boolean) => void;\n  title: string;\n  body: string;\n}\n\nconst ConfirmDialog = (props: Props) => {\n  const { onClose, open, title, body } = props;\n\n  const handleCancel = () => {\n    onClose(false);\n  };\n\n  const handleOk = () => {\n    onClose(true);\n  };\n\n  return (\n    <Dialog\n      disableBackdropClick\n      disableEscapeKeyDown\n      maxWidth=\"xs\"\n      aria-labelledby=\"confirmation-dialog-title\"\n      open={open}\n    >\n      <DialogTitle id=\"confirmation-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{body}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={handleOk} color=\"primary\">\n          Ok\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ConfirmDialog;\n","import React from \"react\";\nimport { Button, Tooltip } from \"@material-ui/core\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\n\ninterface Props {\n  baseUrl: string;\n  file?: string;\n}\n\nconst PlayButton = (props: Props) => {\n  const { file, baseUrl } = props;\n\n  // hey, it's easier just to use the function than figure it out...\n  const audioFile = (() => {\n    if (file) {\n      const audioUrl = new URL(file, baseUrl).toString();\n      const element = new Audio(audioUrl);\n      return element;\n    }\n  })();\n\n  const playAudio = () => {\n    if (audioFile) {\n      try {\n        audioFile.currentTime = 0;\n        audioFile.play().catch((e) => {\n          console.error({ message: \"unable to play url\", src: audioFile.src, err: e });\n        });\n      } catch (e) {\n        console.error({ message: \"unable to play url\", src: audioFile.src, err: e });\n      }\n    }\n  };\n\n  // A more robust method would be checking if the audio file loads, but there's no easy way\n  // to check this until after the play button is pressed.\n  const disable = !audioFile;\n\n  return (\n    <Tooltip title={disable ? \"No sound file to play\" : \"\"}>\n      <div>\n        <Button\n          title=\"Play sound\"\n          variant=\"contained\"\n          color=\"secondary\"\n          startIcon={<PlayCircleFilledIcon />}\n          onClick={playAudio}\n          disabled={disable}\n        >\n          Play\n        </Button>\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default React.memo(PlayButton);\n","import React from \"react\";\n\nimport { Paper, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  codeBlock: {\n    fontSize: \"1rem\",\n    padding: `${theme.spacing(1)}px`,\n  },\n  inline: {\n    padding: theme.spacing(0.25, 0.5),\n    \"pre &\": {\n      padding: 0,\n      boxShadow: \"none\",\n      borderRadius: 0,\n    },\n  },\n}));\n\ninterface Props {\n  block?: boolean;\n  children: React.ReactNode;\n}\n\nconst CodeBlock = (props: Props) => {\n  const classes = useStyles();\n  const { block, children } = props;\n\n  const comp = block ? \"pre\" : \"code\";\n  const klass = block ? classes.codeBlock : classes.inline;\n\n  return (\n    <Paper className={klass} component={comp}>\n      {children}\n    </Paper>\n  );\n};\n\nexport default React.memo(CodeBlock);\n","import React from \"react\";\nimport Md, { MarkdownToJSX } from \"markdown-to-jsx\";\nimport { Typography } from \"@material-ui/core\";\nimport CodeBlock from \"./CodeBlock\";\n\ninterface Props {\n  children: string;\n}\n\ntype Var = Parameters<typeof Typography>[0][\"variant\"];\n\nconst typeTag = (v: Var) =>\n  ({\n    component: Typography,\n    props: { variant: v, component: \"p\", gutterBottom: true },\n  } as const);\n\nconst opts: MarkdownToJSX.Options = {\n  disableParsingRawHTML: true,\n  overrides: {\n    h1: typeTag(\"h1\"),\n    h2: typeTag(\"h2\"),\n    h3: typeTag(\"h3\"),\n    h4: typeTag(\"h4\"),\n    h5: typeTag(\"h5\"),\n    h6: typeTag(\"h6\"),\n    p: typeTag(\"body1\"),\n    pre: { component: CodeBlock, props: { block: true } },\n    code: { component: CodeBlock },\n  },\n};\n\nconst Markdown = (props: Props) => {\n  const { children } = props;\n\n  return <Md children={children} options={opts} />;\n};\n\nexport default React.memo(Markdown);\n","import React, { useCallback, useEffect, useReducer } from \"react\";\nimport {\n  Box,\n  Button,\n  Collapse,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Grid,\n  IconButton,\n  ListSubheader,\n  Menu,\n  MenuItem,\n  Typography,\n} from \"@material-ui/core\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nimport { useDebugContext } from \"../../utils/Debug\";\nimport { TaskDef } from \"../../utils/parsers/task\";\n\nimport SubmitCode from \"./SubmitCode\";\nimport WordInput from \"./WordInput\";\nimport ConfirmDialog from \"../ConfirmDialog\";\nimport { usePersistentState } from \"../../utils/usePersistentState\";\nimport PlayButton from \"./PlayButton\";\n\nimport Markdown from \"../Markdown\";\n\ninterface TaskProps {\n  baseUrl: string;\n  task: TaskDef;\n  noPersist?: boolean;\n}\n\nenum Op {\n  Reset,\n  ShowReset,\n  CloseReset,\n  DismissModal,\n  Submit,\n  ModalExit,\n}\n\ninterface State {\n  modalWord: number;\n  currWord: number;\n  showModal: boolean;\n  resetModal: boolean;\n  inputKey: string;\n}\n\nconst reducer = (state: State, action: Op): State => {\n  const { currWord } = state;\n  switch (action) {\n    case Op.DismissModal:\n      return { ...state, showModal: false, currWord: currWord + 1 };\n    case Op.Submit:\n      return { ...state, showModal: true, modalWord: currWord + 1 };\n    case Op.ModalExit:\n      // Callback unused, but still here.\n      return state;\n    case Op.ShowReset:\n      return { ...state, resetModal: true };\n    case Op.CloseReset:\n      return { ...state, resetModal: false };\n    case Op.Reset:\n      // Reset back to start\n      return {\n        modalWord: 0,\n        currWord: 0,\n        showModal: false,\n        resetModal: false,\n        inputKey: Math.random().toString(36), // Force the keyboard input to reload. avoids page refresh\n      };\n  }\n};\n\nconst useDispatch = <T,>(dispatch: React.Dispatch<T>, op: T) =>\n  useCallback(() => dispatch(op), [op, dispatch]);\n\nconst Task = (props: TaskProps) => {\n  const { task, baseUrl, noPersist } = props;\n  const { title, words, instructions } = task;\n\n  const persistKey = noPersist ? null : `persist-${baseUrl}`;\n\n  const [persist, setPersist] = usePersistentState(persistKey, { word: 0, name: \"\" });\n\n  const [{ currWord, modalWord, showModal, resetModal, ...rest }, dispatch] = useReducer(reducer, {\n    modalWord: persist.word, // Modal needs to lag behind a word because of exit button\n    currWord: persist.word,\n    showModal: false,\n    resetModal: false,\n    inputKey: \"original\", // This is a hacky way to force the inputWord to refresh on reset\n  });\n\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const debug = useDebugContext();\n  const showWord = currWord < words.length;\n\n  const word = showWord ? words[currWord] : words[words.length - 1];\n\n  const handleSubmit = useDispatch(dispatch, Op.Submit);\n  const dismissModal = useDispatch(dispatch, Op.DismissModal);\n  const handleModalExit = useDispatch(dispatch, Op.ModalExit);\n  const handleShowReset = useCallback(() => {\n    setAnchorEl(null);\n    dispatch(Op.ShowReset);\n  }, []);\n  const handleReset = useCallback((reset: boolean) => {\n    dispatch(reset ? Op.Reset : Op.CloseReset);\n  }, []);\n\n  const handleClickMore = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseMore = () => {\n    setAnchorEl(null);\n  };\n\n  // Scroll back to top at start of each word\n  useEffect(() => {\n    window.scroll({ top: 0, behavior: \"smooth\" });\n    setPersist((s) => {\n      // Make sure name is cleared when we reset\n      const name = modalWord === 0 ? \"\" : s.name;\n      return { name, word: modalWord };\n    });\n  }, [modalWord, setPersist]);\n\n  const controls = (\n    <>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClickMore}\n        title=\"More options\"\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleCloseMore}\n        MenuListProps={{ subheader: <ListSubheader>Options</ListSubheader> }}\n      >\n        <MenuItem onClick={handleShowReset}>Reset assignment</MenuItem>\n      </Menu>\n    </>\n  );\n\n  const wordInstructions = word.instructions && (\n    <Grid container justify=\"center\" spacing={2}>\n      <Grid item xs md={8}>\n        <Markdown children={word.instructions} />\n      </Grid>\n    </Grid>\n  );\n\n  return (\n    <div>\n      <Typography variant=\"h3\" component=\"h2\" gutterBottom align=\"center\">\n        {title}\n      </Typography>\n\n      <Collapse in={showWord}>\n        <Box mb={2}>\n          <Markdown children={instructions || \"\"} />\n        </Box>\n        <Grid container spacing={1} justify=\"center\" alignItems=\"center\">\n          <Grid item>\n            <Typography variant=\"h4\" component=\"p\" align=\"center\">\n              {Math.min(currWord + 1, words.length)}/{words.length}: Transcribe \"{word.display}\"\n            </Typography>\n          </Grid>\n          <Grid item>\n            <PlayButton file={word.audio} baseUrl={baseUrl} />\n          </Grid>\n          <Grid item>{controls}</Grid>\n        </Grid>\n\n        {wordInstructions}\n\n        {/* Setting key here lets us force clear the nested state when we need to */}\n        <WordInput word={word} onSubmit={handleSubmit} key={rest.inputKey} />\n      </Collapse>\n\n      {/* Finish splash screen. The mount/unmount are required for persist to work correctly */}\n      <Collapse in={!showWord} mountOnEnter unmountOnExit>\n        <SubmitCode\n          salt={task.salt}\n          debug={debug}\n          onSubmit={(name) => setPersist((s) => ({ ...s, name: name }))}\n          name={persist.name}\n          controls={controls}\n        />\n      </Collapse>\n\n      <Dialog\n        open={showModal}\n        onClose={dismissModal}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n        disableRestoreFocus={!debug}\n        onExited={handleModalExit}\n      >\n        <DialogTitle id=\"alert-dialog-title\">Congrats! You got it correct</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            You did a good job of getting the word correct!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={dismissModal}\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={!showModal}\n            autoFocus\n            disableFocusRipple\n          >\n            {modalWord < words.length ? \"Next word\" : \"Finish\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <ConfirmDialog\n        open={resetModal}\n        onClose={handleReset}\n        title=\"Reset Assignment\"\n        body=\"Are you sure you want to reset all progress on this assignment?\"\n      />\n    </div>\n  );\n};\n\nexport default React.memo(Task);\n","import React from \"react\";\n\nimport clsx from \"clsx\";\n\nimport CodeBlock from \"./CodeBlock\";\nimport { IPAError, isContextError } from \"../utils/error\";\nimport { Typography, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  fileDump: {\n    fontSize: theme.typography.h6.fontSize,\n    lineHeight: 1.3,\n  },\n  line: {\n    \"&::before\": {\n      content: 'attr(data-line) \"| \"',\n    },\n  },\n  errorLine: {\n    color: theme.palette.error.main,\n  },\n}));\n\ninterface Props {\n  error: IPAError | Error;\n  context?: number;\n  defaultHeader?: string;\n}\n\nconst ErrorMessage = (props: Props) => {\n  const classes = useStyles();\n\n  const { defaultHeader, error, context = 2 } = props;\n\n  console.error(error);\n\n  if (isContextError(error)) {\n    const issue = error.context(context);\n    return (\n      <div>\n        <Typography variant=\"h3\" component=\"p\" gutterBottom>\n          {error.headline}\n        </Typography>\n        <Typography variant=\"h5\" component=\"p\" gutterBottom>\n          {error.message}\n        </Typography>\n        <CodeBlock block children={error.message} />\n        <CodeBlock block>\n          <code className={classes.fileDump}>\n            {issue.map(({ num, contents, error }) => (\n              <span\n                className={clsx(classes.line, error && classes.errorLine)}\n                key={num}\n                data-line={num.toString().padStart(3, \"0\")}\n              >\n                {contents}\n                {\"\\n\"}\n              </span>\n            ))}\n          </code>\n        </CodeBlock>\n      </div>\n    );\n  } else {\n    return (\n      <>\n        <Typography variant=\"h3\" component=\"p\" gutterBottom>\n          {defaultHeader}\n        </Typography>\n        <Typography variant=\"h5\" component=\"p\" gutterBottom>\n          {error.message}\n        </Typography>\n      </>\n    );\n  }\n};\n\nexport default ErrorMessage;\n","import React from \"react\";\n\nimport { CircularProgress, Fade, Typography } from \"@material-ui/core\";\nimport { useAsync } from \"react-async-hook\";\nimport { parseTask } from \"../../utils/parsers/task\";\nimport Task from \"./Task\";\nimport { fullBaseUrl } from \"../../constants\";\n\nimport ErrorMessage from \"../ErrorMessage\";\nimport { ResourceError } from \"../../utils/error\";\n\nconst fetchTask = async (taskFileUrl: string) => {\n  if (!taskFileUrl) {\n    // Absurd. klass will actually always be defined\n    console.log(\"empty task\");\n    return;\n  }\n\n  const req = await fetch(taskFileUrl).catch((error) => {\n    if (error instanceof TypeError) {\n      console.error(error);\n      throw new ResourceError(\n        `Cannot fetch resource. Permissions may not be correctly configured.`,\n        error.message\n      );\n    } else {\n      throw error;\n    }\n  });\n\n  if (req.status !== 200) {\n    throw new ResourceError(`${req.statusText}: Resource cannot be retrieved`);\n  }\n\n  const body = await req.text();\n\n  return parseTask(body);\n};\n\ninterface StatusProps {\n  children: React.ReactNode;\n  error?: boolean;\n}\n\nconst Status = ({ children, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"p\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {children}\n  </Typography>\n);\n\ninterface LoadProps {\n  taskFileUrl: string;\n}\n\n/**\n * Wrapper around the Task with loading state\n */\nconst LoadTask = (props: LoadProps) => {\n  const { taskFileUrl } = props;\n  const task = useAsync(fetchTask, [taskFileUrl]);\n  const baseUrl = new URL(taskFileUrl, fullBaseUrl()).toString();\n\n  if (task.result) {\n    return <Task task={task.result} baseUrl={baseUrl} />;\n  } else if (task.loading) {\n    return (\n      <Fade\n        in\n        style={{\n          transitionDelay: \"500ms\",\n        }}\n        unmountOnExit\n      >\n        <Typography variant=\"h4\" component=\"h1\" align=\"center\">\n          <CircularProgress />\n        </Typography>\n      </Fade>\n    );\n  } else if (task.error) {\n    return <ErrorMessage error={task.error} context={3} defaultHeader=\"Cannot load task file\" />;\n  } else {\n    return <Status error children=\"Unreachable state???\" />;\n  }\n};\n\nexport default LoadTask;\n","import React, { useState } from \"react\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { fileUrl } from \"../../constants\";\nimport LoadTask from \"./LoadTask\";\n\nimport { decode, encode } from \"js-base64\";\n\nimport { Link } from \"react-router-dom\";\nimport { Button, Grid, InputAdornment, TextField, Typography } from \"@material-ui/core\";\n\nconst RouteTask = () => {\n  const { klass, assignment } = useParams<{ klass: string; assignment: string }>();\n  return <LoadTask taskFileUrl={fileUrl(klass, `${assignment}.yaml`)} />;\n};\n\nexport const RouteRemoteTask = () => {\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const config = params.get(\"config\");\n\n  if (config) {\n    const url = decode(config);\n    const target = url.includes(\"//\") ? url : `https://${url}`;\n\n    return <LoadTask taskFileUrl={target} />;\n  } else {\n    return <BuildTaskLink />;\n  }\n};\n\nconst BuildTaskLink = () => {\n  const [url, setUrl] = useState(\"\");\n  const params = new URLSearchParams({ config: encode(url, true) }).toString();\n\n  return (\n    <Grid container spacing={2} alignItems=\"center\" justify=\"center\">\n      <Grid item xs={12} sm md={8}>\n        <Typography variant=\"h6\" component=\"p\" gutterBottom>\n          Enter the URL of a task file below.\n        </Typography>\n        <TextField\n          label=\"Resource\"\n          variant=\"filled\"\n          fullWidth\n          onChange={(e) => setUrl(e.target.value)}\n          value={url}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <Button\n                  color=\"primary\"\n                  variant=\"contained\"\n                  component={Link}\n                  to={{ search: params }}\n                >\n                  Go!\n                </Button>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant=\"body1\" align=\"center\">\n          {window.location.href}?{params}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default RouteTask;\n","import React from \"react\";\n\nimport { Box, Button, Grid, Paper, Typography } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\ninterface TaskInfo {\n  name: string;\n  description: string;\n  file: string;\n  hidden?: boolean;\n}\n\ninterface Props {\n  tasks: TaskInfo[];\n  path: string;\n}\n\nconst taskLink = (path: string, file: string) => `${path}/${file.replace(\".yaml\", \"\")}`;\n\nconst TaskList = (props: Props) => {\n  const { tasks, path } = props;\n\n  if (tasks.length === 0) {\n    return <Typography>No tasks to do</Typography>;\n  } else {\n    return (\n      <Grid container spacing={4}>\n        {tasks.map(\n          (task: TaskInfo, i: number) =>\n            !task.hidden && (\n              <Grid item key={`tasklist-${i}`} lg={6} xs={12}>\n                <Box\n                  component={Paper}\n                  p={2}\n                  height=\"100%\"\n                  display=\"flex\"\n                  alignContent=\"space-between\"\n                  alignItems=\"flex-start\"\n                  flexWrap=\"wrap\"\n                >\n                  <Box>\n                    <Typography color=\"primary\" gutterBottom>\n                      {task.name}\n                    </Typography>\n                    <Typography variant=\"body2\" gutterBottom>\n                      {task.description}\n                    </Typography>\n                  </Box>\n                  <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"flex-end\" width=\"100%\">\n                    <Button\n                      component={Link}\n                      color=\"secondary\"\n                      variant=\"contained\"\n                      to={taskLink(path, task.file)}\n                    >\n                      Work on task\n                    </Button>\n                  </Box>\n                </Box>\n              </Grid>\n            )\n        )}\n      </Grid>\n    );\n  }\n};\n\nexport default TaskList;\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { useManifest } from \"../Manifest\";\n\nimport { useAsync } from \"react-async-hook\";\nimport { TASK_FILE, fileUrl } from \"../constants\";\nimport { Typography } from \"@material-ui/core\";\nimport { TaskList } from \"./Task\";\n\nimport { parseTaskList } from \"../utils/parsers\";\nimport { ResourceError } from \"../utils/error\";\nimport ErrorMessage from \"./ErrorMessage\";\n\ninterface MatchParams {\n  klass: string;\n}\n\ninterface Props extends RouteComponentProps<MatchParams> {}\n\nconst fetchClassTasks = async (classId: string) => {\n  if (!classId) {\n    // Absurd. klass will actually always be defined. but just in case\n    console.log(\"empty class\");\n    return;\n  }\n  const url = fileUrl(classId, TASK_FILE);\n\n  const req = await fetch(url).catch((error) => {\n    if (error instanceof TypeError) {\n      console.error(error);\n      throw new ResourceError(\n        `Cannot fetch resource. Permissions may not be correctly configured.`,\n        error.message\n      );\n    } else {\n      throw error;\n    }\n  });\n\n  if (req.status !== 200) {\n    throw new ResourceError(`${req.statusText}: Resource cannot be retrieved`);\n  }\n\n  const body = await req.text();\n\n  return parseTaskList(body);\n};\n\ninterface StatusProps {\n  msg: string;\n  error?: boolean;\n}\n\nconst Status = ({ msg, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {msg}\n  </Typography>\n);\nconst ClassPage = (props: Props) => {\n  const classId = props.match.params.klass;\n\n  const manifest = useManifest();\n  const klass = manifest?.result?.classes?.find(({ folder }) => classId === folder);\n  // classTasks can begin loading before we confirm classId\n  const classTasks = useAsync(fetchClassTasks, [classId]);\n\n  /**\n   * Cases:\n   * if classTasks.result : Good\n   * while loading class && manifest: Class name\n   * while loading manifest: Loading...\n   * if (classTasks.error) : \"cannot load class X\"\n   *\n   */\n\n  if (classTasks.result) {\n    const { title, description, tasks } = classTasks.result;\n    return (\n      <div>\n        <div>\n          <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n            {title}\n          </Typography>\n          <Typography variant=\"subtitle1\" gutterBottom align=\"center\">\n            {description}\n          </Typography>\n        </div>\n        <Typography variant=\"h5\" gutterBottom>\n          Assignments:\n        </Typography>\n        <TaskList tasks={tasks} path={props.location.pathname} />\n      </div>\n    );\n  } else if (classTasks.loading && klass) {\n    return (\n      <div>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Loading {klass.name}...\n        </Typography>\n      </div>\n    );\n  } else if (manifest.loading || classTasks.loading) {\n    return (\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n        Loading...\n      </Typography>\n    );\n  } else if (classTasks.error) {\n    return (\n      <ErrorMessage error={classTasks.error} context={3} defaultHeader=\"No such class exists\" />\n    );\n  } else {\n    return <Status error msg=\"Unreachable state???\" />;\n  }\n};\n\nexport default ClassPage;\n","import { TaskListDef, TaskListFile } from \"../../data/taskList\";\nimport { parse } from \"./parse\";\n\nexport type { TaskListDef } from \"../../data/taskList\";\n\nexport const parseTaskList = (contents: string): TaskListDef => parse(contents, TaskListFile);\n","import { Box, Link, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link as RLink } from \"react-router-dom\";\n\nconst Homepage = () => {\n  return (\n    <Box paddingY={2}>\n      <Typography align=\"center\" variant=\"h3\" component=\"h1\" gutterBottom>\n        Welcome to Int IPA\n      </Typography>\n      <Typography variant=\"h5\" component=\"p\">\n        This is just some place holder text right now. I'm not really sure what you want on this\n        page. One possible option is a self description, etc. I don't really know. Here's a link to\n        the{\" \"}\n        <Link component={RLink} to=\"/keyboard\" color=\"primary\">\n          the IPA keyboard\n        </Link>\n        .\n      </Typography>\n    </Box>\n  );\n};\n\nexport default Homepage;\n","import React from \"react\";\n\nimport useKeyboard from \"./keyboard/useKeyboard\";\n\nimport StickyIPA from \"./keyboard/StickyIPA\";\n\nconst TypeIPA = () => {\n  const { handleKeyboard, handleDelete, handleType, value, ref } = useKeyboard();\n\n  return (\n    <StickyIPA\n      value={value}\n      inputRef={ref}\n      onType={handleType}\n      onDelete={handleDelete}\n      handleKeyboard={handleKeyboard}\n    />\n  );\n};\n\nexport default TypeIPA;\n","import React, { Suspense, lazy } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\n\nconst ToolList = lazy(() => import(\"./ToolList\"));\n\ninterface Props extends RouteComponentProps {}\n\nconst ToolLoader = (props: Props) => (\n  <Suspense fallback={null}>\n    <ToolList match={props.match} />\n  </Suspense>\n);\n\nexport default ToolLoader;\n","import React from \"react\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\n\nimport ClassPage from \"./components/ClassPage\";\nimport Homepage from \"./components/Homepage\";\nimport NotFound from \"./components/NotFound\";\nimport { RouteRemoteTask, RouteTask } from \"./components/Task\";\nimport TypeIPA from \"./components/TypeIPA\";\nimport ToolLoader from \"./components/Tools/ToolLoader\";\n\nimport { allowRemote } from \"./config\";\n\nconst Router = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={Homepage} />\n      <Route path=\"/keyboard\" exact component={TypeIPA} />\n      <Route path=\"/class/:klass\" exact component={ClassPage} />\n      {/* Allow slashes for nested assignments */}\n      <Route path=\"/class/:klass/:assignment+\" exact component={RouteTask} />\n      {allowRemote && <Route path=\"/remote\" exact component={RouteRemoteTask} />}\n\n      {/* Old routes which have been moved */}\n      <Redirect from=\"/type\" exact to=\"/keyboard\" />\n\n      <Route path=\"/tools\" component={ToolLoader} />\n\n      {/* Catchall */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n};\n\nexport default Router;\n","import { Theme } from \"@material-ui/core\";\n\nexport const notchGutters = (theme: Theme) => ({\n  paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(2)}px)`,\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(3)}px)`,\n    paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(3)}px)`,\n  },\n});\n","import React, { useCallback, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Box,\n  Divider,\n  Drawer,\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Link as MatLink,\n  Switch,\n  Theme,\n  Toolbar,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\";\nimport CastIcon from \"@material-ui/icons/Cast\";\n\nimport { Link, matchPath, useLocation } from \"react-router-dom\";\n\nimport { useManifest } from \"../Manifest\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport { grey } from \"@material-ui/core/colors\";\nimport { notchGutters } from \"../utils/styles\";\nimport { REPO, VERSION, allowRemote } from \"../config\";\n\nconst DRAWER_WIDTH = 275;\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  itemGutters: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  },\n  gutters: notchGutters(theme),\n}));\n\nconst Loading = ({ error }: { error?: boolean }) => (\n  <>\n    <ListItem>\n      <ListItemText primary={error ? \"Error loading classes.\" : \"Loading classes...\"} />\n    </ListItem>\n    <LinearProgress />\n  </>\n);\n\ninterface ListLinkProps {\n  gutters: string;\n  to: string;\n  text: string;\n  exact?: boolean;\n  icon?: JSX.Element;\n}\n\nconst ListLink = (props: ListLinkProps) => {\n  const { pathname } = useLocation();\n  const { to, text, icon, exact, gutters } = props;\n\n  const selected = !!matchPath(pathname, { path: to, exact: exact });\n\n  return (\n    <ListItem button component={Link} to={to} selected={selected} classes={{ gutters: gutters }}>\n      {icon && <ListItemIcon>{icon}</ListItemIcon>}\n      <ListItemText primary={text} />\n    </ListItem>\n  );\n};\n\nconst DarkSwitch = withStyles({\n  switchBase: {\n    color: grey[100],\n    \"&$checked\": {\n      color: \"black\",\n    },\n    \"&$checked + $track\": {\n      backgroundColor: grey[500],\n    },\n  },\n  checked: {},\n  track: {},\n})(Switch);\n\ninterface Props {\n  darkMode: boolean;\n  changeDarkMode: (mode: boolean) => void;\n}\n\nconst Header = (props: Props) => {\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n\n  const { changeDarkMode } = props;\n\n  const { result, loading, error } = useManifest();\n\n  const openDrawer = useCallback(() => {\n    setDrawer(true);\n  }, []);\n  const closeDrawer = useCallback(() => {\n    setDrawer(false);\n  }, []);\n\n  const toggleDarkMode = useCallback(\n    (event) => {\n      changeDarkMode(event.target.checked);\n    },\n    [changeDarkMode]\n  );\n\n  const list = (\n    <div>\n      <List>\n        <ListLink to=\"/\" text=\"Home\" icon={<HomeIcon />} exact gutters={classes.itemGutters} />\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Classes</ListSubheader>\n        {error && <Loading error />}\n        {loading && <Loading />}\n        {result &&\n          result.classes.map(\n            ({ name, folder, hidden }, i) =>\n              !hidden && (\n                <ListLink\n                  key={`class-list-${i}`}\n                  to={`/class/${folder}`}\n                  text={name}\n                  gutters={classes.itemGutters}\n                />\n              )\n          )}\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Tools</ListSubheader>\n        {allowRemote && (\n          <ListLink\n            to=\"/remote\"\n            text=\"Hosted Task\"\n            icon={<CastIcon />}\n            exact\n            gutters={classes.itemGutters}\n          />\n        )}\n        <ListLink\n          to=\"/keyboard\"\n          text=\"IPA Keyboard\"\n          icon={<KeyboardIcon />}\n          exact\n          gutters={classes.itemGutters}\n        />\n      </List>\n    </div>\n  );\n\n  return (\n    <div>\n      <Drawer anchor=\"left\" open={drawer} onClose={closeDrawer}>\n        <Box\n          display=\"flex\"\n          minWidth={DRAWER_WIDTH}\n          flexDirection=\"column\"\n          justifyContent=\"space-between\"\n          height=\"100%\"\n          overflow=\"hidden\"\n          role=\"presentation\"\n        >\n          {list}\n          <Box mb={2}>\n            <Typography component=\"div\">\n              <Grid component=\"label\" container justify=\"center\" alignItems=\"center\" spacing={1}>\n                <Grid item>Light</Grid>\n                <Grid item>\n                  <DarkSwitch color=\"default\" checked={props.darkMode} onChange={toggleDarkMode} />\n                </Grid>\n                <Grid item>Dark</Grid>\n              </Grid>\n            </Typography>\n            <Typography variant=\"body2\" component=\"div\" align=\"center\" color=\"textSecondary\">\n              Int IPA –{\" \"}\n              <MatLink href={REPO} color=\"inherit\">\n                {VERSION}\n              </MatLink>\n            </Typography>\n          </Box>\n        </Box>\n      </Drawer>\n\n      <AppBar position=\"static\" color=\"secondary\">\n        <Toolbar classes={{ gutters: classes.gutters }}>\n          <IconButton onClick={openDrawer} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\">Int IPA</Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default Header;\n","// Central place for getting env based config\nexport const allowRemote = process.env.REACT_APP_ALLOW_REMOTE === \"true\";\nexport const browserRouter = process.env.REACT_APP_ROUTER === \"browser\";\n\nexport const VERSION = process.env.REACT_APP_VERSION;\nexport const REPO = process.env.REACT_APP_REPO;\n","export default window.AudioContext || window.webkitAudioContext;\n","import React, { useEffect } from \"react\";\n\nimport Router from \"./Router\";\nimport { Container, CssBaseline, Snackbar } from \"@material-ui/core\";\nimport Header from \"./components/Header\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { ThemeOptions, createMuiTheme } from \"@material-ui/core/styles\";\nimport { blue, indigo } from \"@material-ui/core/colors\";\nimport { Theme, makeStyles, useMediaQuery } from \"@material-ui/core\";\nimport { notchGutters } from \"./utils/styles\";\nimport { useDebugContext } from \"./utils/Debug\";\nimport { usePersistentState } from \"./utils/usePersistentState\";\n\nimport AudioContext from \"./utils/AudioContext\";\n\nconst lightTheme: ThemeOptions = {\n  palette: {\n    type: \"light\",\n    primary: {\n      main: blue[900],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst darkTheme: ThemeOptions = {\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: blue[500],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  // Modified from source\n  // https://github.com/mui-org/material-ui/blob/v4.11.0/packages/material-ui/src/Container/Container.js\n  containerRoot: {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    display: \"block\", // Fix IE 11 layout when used with main.\n    margin: theme.spacing(1, \"auto\", \"env(safe-area-inset-bottom, 0px)\"),\n    ...notchGutters(theme),\n  },\n  debug: {\n    pointerEvents: \"none\",\n    zIndex: 1150,\n  },\n  debugRoot: {\n    minWidth: 0,\n    background: \"rgba(240, 240, 240, 0.25)\",\n    color: theme.palette.text.disabled,\n  },\n}));\n\nconst DARK_KEY = \"useDarkMode\";\n\nexport default function App() {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const [dark, setDark] = usePersistentState<boolean | null>(DARK_KEY, null);\n\n  useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      document.title = `${process.env.NODE_ENV.slice(0, 3)} - ${document.title}`;\n    }\n  }, []);\n\n  // Create an audio context on first user interaction. Reduces audio playing delay\n  useEffect(() => {\n    const create = () => {\n      document.removeEventListener(\"click\", create);\n      new AudioContext({\n        latencyHint: \"interactive\",\n      });\n    };\n    document.addEventListener(\"click\", create);\n  }, []);\n\n  const darkMode = dark === null ? prefersDarkMode : dark;\n\n  const theme = React.useMemo(() => createMuiTheme(darkMode ? darkTheme : lightTheme), [darkMode]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Header darkMode={darkMode} changeDarkMode={setDark} />\n      <Container maxWidth=\"lg\" classes={{ root: classes.containerRoot }}>\n        <Router />\n      </Container>\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        open={debug}\n        message=\"Debug mode\"\n        className={classes.debug}\n        ContentProps={{ classes: { root: classes.debugRoot }, elevation: darkMode ? 1 : 0 }}\n      />\n    </ThemeProvider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// import \"./index.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport Manifest from \"./Manifest\";\nimport Debug from \"./utils/Debug\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport { browserRouter } from \"./config\";\n\nconst Router = ({ children }: { children: React.ReactNode }) => {\n  if (browserRouter) {\n    return <BrowserRouter children={children} />;\n  } else {\n    return <HashRouter children={children} />;\n  }\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <Debug>\n      <Manifest>\n        <Router>\n          <App />\n        </Router>\n      </Manifest>\n    </Debug>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nsmoothscroll.polyfill();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","import { fromUint8Array } from \"js-base64\";\n\nconst INVALID = /[^a-zA-Z0-9-]/g;\n\nconst normName = (name: string) => {\n  return name.replace(/[\\s-]+/g, \"-\").replace(INVALID, \"\");\n};\n\nasync function sha1sum(bytes: ArrayBuffer) {\n  const buf = await crypto.subtle.digest(\"SHA-256\", bytes);\n  return fromUint8Array(new Uint8Array(buf));\n}\n\nconst EPOCH = new Date(\"2020-02-02\");\n\nconst SHA_LENGTH = 16;\n\nconst minuteOfYear = () => {\n  const now = new Date();\n  return Math.floor((now.getTime() - EPOCH.getTime()) / 1000 / 60).toString(36);\n};\n\nconst timestampToDate = (timestamp: string) => {\n  const minutes = parseInt(timestamp, 36);\n  const millis = minutes * 60 * 1000 + EPOCH.getTime();\n  return new Date(millis);\n};\n\n// Assume the second string is shorter\nexport const interleave = (longer: string, shorter: string): string => {\n  const interleaved: string[] = [shorter.length.toString(36)];\n  for (let i = 0; i < shorter.length; i++) {\n    interleaved.push(longer.charAt(i));\n    interleaved.push(shorter.charAt(i));\n  }\n  interleaved.push(longer.slice(shorter.length, longer.length));\n  return interleaved.join(\"\");\n};\n\n// Assume the second string is shorter\nexport const deinterleave = (encoded: string): [string, string] => {\n  const length = parseInt(encoded.charAt(0), 36);\n  const interleaved = encoded.slice(1, encoded.length);\n  const longer: string[] = [];\n  const shorter: string[] = [];\n  for (let i = 0; i < length * 2; i += 2) {\n    longer.push(interleaved.charAt(i));\n    shorter.push(interleaved.charAt(i + 1));\n  }\n  longer.push(interleaved.slice(length * 2, interleaved.length));\n  return [longer.join(\"\"), shorter.join(\"\")];\n};\n\nconst DEFAULT_SALT = \"vowelsAreCool!!!\";\n\nexport const computeHash = async (\n  name: string | undefined,\n  salt: string | undefined,\n  run: boolean = true,\n  time?: string\n) => {\n  if (typeof name === \"undefined\" || !run) {\n    return;\n  }\n\n  const effectiveSalt = salt || DEFAULT_SALT;\n\n  const outName = normName(name);\n  const hashName = outName.toLowerCase();\n  const outTime = (time || minuteOfYear()).toLowerCase();\n  const nameTime = `${hashName}_${outTime}`;\n  const input = [nameTime, effectiveSalt].join(\"_\");\n\n  const sha1 = await sha1sum(new TextEncoder().encode(input));\n\n  // Remove special characters and limit to the first 16 chars\n  const cleanupSha1 = sha1\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, \"\")\n    .slice(0, SHA_LENGTH);\n  const interleaved = interleave(cleanupSha1, outTime);\n  return [outName, interleaved].join(\"_\");\n};\n\ninterface HashResult {\n  correct: boolean;\n  name: string;\n  date?: Date;\n  message: string;\n}\n\nexport const checkHash = async (hash: string, salt?: string): Promise<HashResult> => {\n  const effectiveSalt = salt || DEFAULT_SALT;\n\n  const segments = hash.split(\"_\");\n  const [name, interleaved] = segments;\n  if (segments.length !== 2 || interleaved.match(INVALID)) {\n    const message =\n      segments.length < 2 ? \"Missing validation hash\" : \"Invalid characters in string\";\n    return { name: hash, correct: false, message };\n  }\n  const [sha, time] = deinterleave(interleaved.toLowerCase());\n  const date = timestampToDate(time);\n\n  if (sha?.length !== SHA_LENGTH) {\n    console.warn(\"sha segment differs from expected length.\");\n  }\n  const lowerHash = hash.toLowerCase();\n  const expected = (await computeHash(name, effectiveSalt, true, time))?.toLowerCase();\n  return { name, date, correct: expected === lowerHash, message: hash };\n};\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst NotFound = () => (\n  <Typography variant=\"h2\" align=\"center\">\n    The page you are looking for cannot be found 😫\n  </Typography>\n);\n\nexport default NotFound;\n"],"sourceRoot":""}