{"version":3,"sources":["constants.ts","utils/error.ts","data/manifest.ts","utils/parsers/parse.ts","utils/parsers/manifest.ts","utils/normalize.ts","data/keyboard.ts","data/task.ts","utils/ipa.ts","utils/parsers/task.ts","data/taskList.ts","data/ipaSounds.ts","Manifest.tsx","utils/konami.ts","utils/usePersistentState.ts","utils/Debug.tsx","components/Task/SubmitCode.tsx","components/keyboard/useKeyboard.ts","components/keyboard/IPAInput.tsx","components/keyboard/common.ts","components/keyboard/Pulmonics.tsx","components/keyboard/NonPulmonics.tsx","components/keyboard/trapezium.svg","components/keyboard/Vowels.tsx","components/keyboard/GridDisplay.tsx","components/keyboard/Diacritics.tsx","components/keyboard/Other.tsx","components/keyboard/Suprasegmentals.tsx","components/keyboard/Keyboard.tsx","components/keyboard/StickyIPA.tsx","components/Task/useWordInput.ts","components/Task/WordInput.tsx","components/ConfirmDialog.tsx","components/Task/PlayButton.tsx","components/CodeBlock.tsx","components/Markdown.tsx","components/Task/Task.tsx","components/ErrorMessage.tsx","components/Task/LoadTask.tsx","config.ts","components/Task/RouteTask.tsx","components/Task/TaskList.tsx","components/ClassPage.tsx","utils/parsers/taskList.ts","components/Homepage.tsx","components/Tools/ToolLoader.tsx","components/Listen/player.ts","components/Listen/Listen.tsx","components/Listen/ListenWrapper.tsx","utils/parsers/ipaSounds.ts","components/Chart/TypeIPA.tsx","components/Chart/LoadOnce.tsx","components/Chart/ChartRouter.tsx","Router.tsx","utils/styles.ts","components/Header.tsx","components/Footer.tsx","utils/AudioContext.ts","App.tsx","index.tsx","components/NotFound.tsx","utils/validation.ts","components/Link.tsx"],"names":["BASE_URL","fileUrl","folder","path","fullBaseUrl","URL","window","location","href","IPAError","Error","getLines","lines","lineIdx","context","lineArr","split","line","start","Math","max","errorLine","slice","map","contents","i","num","error","indexToLines","str","idx","findIndex","ln","this","pos","length","ParseError","constructor","data","err","super","message","dat","headline","n","linePos","ValidateError","document","doc","node","getIn","range","ResourceError","msg","orig","originalMessage","ManifestFile","object","homepage","title","string","body","classes","array","name","hidden","optional","boolean","ipaPlayer","enabled","url","parse","struct","YAML","parseDocument","prettyErrors","warnings","forEach","warning","console","warn","errors","fileContents","toJSON","valid","validate","parseManifest","CANONICAL_FORMS","Map","MATCHER","RegExp","Array","from","keys","join","normalize","replace","match","get","Section","columns","number","symbols","ipa","description","Keyboard","additionalSections","Macros","record","Segment","union","ValidateSegment","refine","segment","index","parent","branch","list","isArray","includes","isParentSegmentList","key","Object","values","reduce","run","curr","Word","display","audio","instructions","segments","TaskFile","author","salt","macros","words","keyboard","PLACES","MANNERS","IMPOSSIBLE","NUL","PULMONICS","CLICKS","IMPLOSIVES","EJECTIVES","NON_PULMONICS","v","VOWEL_HEIGHTS","VOWEL_FRONTEDNESS","VOWELS","DIACRITICS","examples","MISC","sym","SUPRASEGMENTALS","DEFAULT_MESSAGE","END_MESSAGE","KLEENE_REPLACE","escapeStringRegexp","ANY_REPLACE","matchSegment","rawInput","correct","input","explanations","wildcards","find","matcher","wildcard","kleene","wildcardToRegex","test","expandMacro","encountered","hasOwnProperty","newEncountered","results","value","expanded","concat","push","pickValues","ops","result","parseTask","metadata","getMacros","word","validSegments","hint","expand","set","lastElement","final","getSegments","definition","nonPulmonics","some","char","sections","TaskInfo","file","TaskListFile","tasks","commonSound","video","Sound","IpaSounds","type","baseUrl","packFile","footer","ManifestContext","createContext","fetchManifest","async","req","fetch","credentials","text","manifest","raw","useManifest","asyncManifest","useContext","MANIFEST_KEY","errorShown","Manifest","children","loading","useAsync","fetched","cachedBody","localStorage","getItem","YAMLError","alert","setItem","Provider","up","down","left","right","Pattern","buildHandler","action","reset","e","clearTimeout","setTimeout","usePersistentState","defaultValue","persistOnLoad","mount","useRef","setValue","useState","stored","JSON","useDebugValue","setter","useCallback","prevState","useEffect","current","stringify","DebugContext","useDebugContext","Debug","props","debug","setDebug","incorrect","handler","metaKey","shiftKey","d","addEventListener","removeEventListener","process","DEFAULTS","prompt","SubmitCode","Op","existingName","onSubmit","controls","setName","setRun","open","setOpen","inputRef","timer","computeHash","displayValue","copyText","select","setSelectionRange","execCommand","button","Button","variant","color","onClick","startIcon","preventDefault","trim","Grid","container","spacing","alignItems","justify","item","xs","sm","md","lg","Typography","component","gutterBottom","Tooltip","PopperProps","disablePortal","disableFocusListener","disableHoverListener","disableTouchListener","TextField","label","InputProps","readOnly","fullWidth","onChange","target","reducer","state","focused","ref","activeElement","MoveCursor","cursor","selectionStart","cursorAfter","selectionEnd","newState","updates","undefined","Delete","Append","Set","Type","useKeyboard","dispatch","useReducer","handleKeyboard","handleType","handleDelete","val","useLayoutEffect","currentFocus","currRef","updateRange","focus","preventScroll","moveCursor","useStyles","makeStyles","theme","breakpoints","fontSize","noRightMargin","marginRight","helpTextSize","IPAInput","placeholder","onType","onDelete","header","onCheck","checkDescription","helpText","headerTooltip","handleSubmit","handleEnter","check","enterDelay","IconButton","aria-label","onMouseDown","helperText","className","headerContent","InputAdornment","disablePointerEvents","disableTypography","position","positionStart","placement","TransitionComponent","Fade","TransitionProps","timeout","FormControl","InputLabel","htmlFor","OutlinedInput","id","onKeyPress","inputProps","spellCheck","autoCorrect","autoComplete","style","lineHeight","endAdornment","startAdornment","Collapse","in","FormHelperText","subsetFunc","subset","has","useSubset","useMemo","borderColor","palette","lighten","fade","divider","darken","colToWidth","c","symbol","padding","userSelect","disabled","clickable","primary","backgroundColor","hover","impossible","disabledBackground","leftSideBorder","borderLeft","rightSideBorder","borderRight","caps","minWidth","Pulmonics","canClick","clickCallback","Cell","x","y","voiceless","voiced","hasBorders","TableCell","align","clsx","TableContainer","Table","size","TableHead","TableRow","place","colSpan","TableBody","manner","memo","textAlign","descr","verticalAlign","NonPulmonics","sounds","click","handleClick","span","row","j","_extends","assign","arguments","source","prototype","call","apply","_ref","strokeWidth","fill","strokeLinecap","strokeLinejoin","SvgTrapezium","titleId","svgRef","xmlns","viewBox","preserveAspectRatio","fillRule","clipRule","ForwardRef","root","width","height","outerQuad","minHeight","fullRel","trapezium","stroke","quad","top","element","transform","overflow","rounded","unrounded","mid","borderRadius","paperBack","zIndex","content","background","paper","fullHeight","vowelPos","vowelHeight","vowelCoords","offset","Vowels","VowelElement","vowels","coords","vowel","Box","noCenter","center","vowelChart","wrap","direction","descriptionParent","justifyContent","flexDirection","bordered","boxShadow","GridDisplay","genSym","combine","combined","Diacritics","Other","Suprasegmentals","childOrder","orderChildren","styles","order","child","BaseKeyboard","ApplyClickableSubset","Item","React","Children","cloneElement","SubsetKeyboard","s","sizes","full","more","half","less","only","Paper","sticky","pointerEvents","marginBottom","default","StickyIPA","useTheme","elevation","paddingY","attempt","SoftReset","is","Reset","SetHeader","NextSegment","ClearError","ErrorMessage","errorMessage","success","main","dark","WordInput","useWordInput","handleCheck","currentValue","headerValue","ConfirmDialog","onClose","Dialog","disableBackdropClick","disableEscapeKeyDown","maxWidth","aria-labelledby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","PlayButton","playAudio","hasSeekingIssues","audioFile","audioUrl","toString","Audio","paused","currentTime","info","load","seeking","log","play","catch","src","useAudioFile","codeBlock","inline","CodeBlock","block","comp","klass","URL_PATTERN","typeTag","RelativeImg","imgProps","imgSrc","SmartLink","rest","Link","to","CustomInput","Checkbox","checked","Markdown","allowTags","paragraph","options","disableParsingRawHTML","forceBlock","overrides","img","h1","h2","h3","h4","h5","h6","p","a","pre","code","currWord","DismissModal","showModal","Submit","modalWord","ModalExit","ShowReset","resetModal","CloseReset","WordReset","inputKey","random","FullReset","useDispatch","op","Task","task","noPersist","persistKey","persist","setPersist","anchorEl","setAnchorEl","showWord","dismissModal","handleModalExit","resetWord","handleShowReset","handleReset","scroll","behavior","aria-controls","aria-haspopup","event","currentTarget","Menu","keepMounted","MenuListProps","subheader","ListSubheader","MenuItem","wordInstructions","mb","min","mountOnEnter","unmountOnExit","show","dismiss","onExited","NextWord","aria-describedby","disableFocusRipple","fileDump","typography","defaultHeader","o","issue","data-line","padStart","fetchTask","taskFileUrl","TypeError","status","statusText","Status","LoadTask","transitionDelay","CircularProgress","VERSION","SHORT_DOMAIN","RouteRemoteTask","useLocation","config","URLSearchParams","search","decode","BuildTaskLink","setUrl","params","encode","base","hostname","resultUrl","RouteTask","assignment","useParams","taskLink","TaskList","alignContent","flexWrap","fetchClassTasks","classId","ClassPage","classTasks","pathname","Homepage","ToolList","lazy","ToolLoader","fallback","fetchAsync","packUrl","res","decodeAsync","createContextAsync","AudioContext","latencyHint","promises","k","decodeAudioData","copyBuffer","buffers","Promise","all","buffer","byteOffset","byteLength","playNow","useAudioPlayer","response","downloadError","decodeError","stop","tag","pause","stopAudio","disconnect","stopBuffer","sound","resume","createBufferSource","connect","destination","playBuffer","playFallback","VideoDialog","close","autoPlay","Listen","setSound","validKeys","playSound","fetchSounds","ipaUrl","rawSymbols","addSound","extra","snd","section","parseIpaSounds","ListenWrapper","defaultBaseUrl","TypeIPA","LoadOnce","Pages","seen","visible","TABS","Video","NavTabs","tab","history","useHistory","square","Tabs","indicatorColor","textColor","_event","newValue","Tab","ChartRouter","page","NotFound","Router","exact","notchGutters","paddingLeft","paddingRight","itemGutters","gutters","Loading","ListItem","ListItemText","LinearProgress","ListLink","icon","selected","matchPath","ListItemIcon","DarkSwitch","withStyles","switchBase","grey","track","Switch","Header","drawer","setDrawer","changeDarkMode","playerEnabled","openDrawer","closeDrawer","toggleDarkMode","List","Divider","Drawer","anchor","role","darkMode","AppBar","Toolbar","edge","marginTop","Footer","Container","webkitAudioContext","lightTheme","blue","secondary","indigo","darkTheme","containerRoot","boxSizing","debugRoot","siteRoot","siteContent","flex","App","prefersDarkMode","useMediaQuery","setDark","create","createMuiTheme","ThemeProvider","CssBaseline","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","ReactDOM","render","getElementById","smoothscroll","polyfill","INVALID","EPOCH","Date","DEFAULT_SALT","time","effectiveSalt","outName","normName","hashName","toLowerCase","outTime","now","floor","getTime","minuteOfYear","longer","shorter","interleaved","charAt","interleave","bytes","buf","crypto","subtle","digest","fromUint8Array","Uint8Array","sha1sum","TextEncoder","checkHash","hash","sha","encoded","parseInt","deinterleave","date","timestamp","millis","timestampToDate","lowerHash","RouterLink"],"mappings":"oRAGO,MAAMA,EAAY,WASZC,EAAU,CAACC,EAAgBC,IAAkB,YAAcD,KAAUC,IAErEC,EAAc,IAAM,IAAIC,IAAIL,EAAUM,OAAOC,SAASC,MCV5D,MAAMC,UAAiBC,OAS9B,MAAMC,EAAW,CAACC,EAA0BC,EAAiBC,KAC3D,MAAMC,EAA2B,kBAAVH,EAAqBA,EAAMI,MAAM,MAAQJ,EAC1DK,EAAOJ,EAAU,EAEjBK,EAAQC,KAAKC,IAAIH,EAAOH,EAAS,GACjCO,EAAYF,KAAKC,IAAIH,EAAMA,EAAOH,GAAWI,EAEnD,OAAID,EAAO,EACF,GAEAF,EAAQO,MAAML,EAAOH,EAASG,EAAOH,EAAU,GAAGS,KAAI,CAACC,EAAUC,KAAX,CAC3DC,IAAKR,EAAQO,EAAI,EACjBD,WACAG,MAAOF,IAAMJ,OAKbO,EAAe,CAACC,EAAaC,EAAahB,KAC9C,MAAMF,EAAQiB,EAAIb,MAAM,MAGlBC,EAAOL,EAAMmB,WACjB,SAAiCC,GAE/B,OADAC,KAAKC,KAAOF,EAAGG,OAAS,EACjBL,EAAMG,KAAKC,MAEpB,CAAEA,IAAK,IAGT,OAAOvB,EAASC,EAAOK,EAAO,EAAGH,IAY5B,MAAMsB,UAAmB3B,EAK9B4B,YAAYC,EAAcC,GACxBC,MAAMD,EAAIE,SAD8B,KAJ1CC,SAI0C,OAH1CH,SAG0C,OAF1CI,SAAW,qBAITV,KAAKS,IAAMJ,EACXL,KAAKM,IAAMA,EAGbzB,QAAQ8B,EAAI,GAAI,IAAD,EACb,MAAMC,EAAO,UAAGZ,KAAKM,IAAIM,eAAZ,aAAG,EAAkB3B,MAClC,OAAI2B,EACKlC,EAASsB,KAAKS,IAAKG,EAAQ5B,KAAM2B,GAEjC,IAKN,MAAME,UAAsBrC,EAMjC4B,YAAYC,EAAcS,EAAoBR,GAC5CC,MAAMD,EAAIE,SADoD,KALhEC,SAKgE,OAJhEM,SAIgE,OAHhET,SAGgE,OAFhEI,SAAW,wBAITV,KAAKS,IAAMJ,EACXL,KAAKe,IAAMD,EACXd,KAAKM,IAAMA,EAGbzB,QAAQ8B,EAAI,GAEV,MAAMK,EAAQhB,KAAKe,IAAYE,MAAMjB,KAAKM,IAAIpC,MAAM,GACpD,OAAY,MAAR8C,GAAgC,kBAATA,GAAqB,UAAWA,EAClDrB,EAAaK,KAAKS,IAAKO,EAAKE,MAAM,GAAIP,GAEtC,IAKN,MAAMQ,UAAsB3C,EAGjC4B,YAAYgB,EAAaC,GACvBd,MAAMa,GADgC,KAFxCE,qBAEwC,EAEtCtB,KAAKsB,gBAAkBD,G,WCrGpB,MAAME,EAAeC,YAAO,CACjCC,SAAUD,YAAO,CAAEE,MAAOC,cAAUC,KAAMD,gBAC1CE,QAASC,YACPN,YAAO,CACLO,KAAMJ,cACN1D,OAAQ0D,cACRK,OAAQC,YAASC,kBAGrBC,UAAWF,YACTT,YAAO,CACLY,QAASF,cAETG,IAAKV,mB,sBCbJ,MAAMW,EAAQ,CAAO/C,EAAkBgD,KAC5C,MAAMxB,EAAMyB,IAAKC,cAAclD,EAAU,CAAEmD,cAAc,IAIzD,GAFA3B,EAAI4B,SAASC,SAASC,GAAYC,QAAQC,KAAKF,KAE3C9B,EAAIiC,OAAO9C,OAAS,EAGtB,MADAa,EAAIiC,OAAOJ,SAAStC,GAAQwC,QAAQpD,MAAMY,KACpC,IAAIH,EAAWZ,EAAUwB,EAAIiC,OAAO,IAE5C,MAAMC,EAAelC,EAAImC,UAElB5C,EAAK6C,GAASC,YAASH,EAAcV,GAC5C,IAAKY,EAAO,CACV,IAAK7C,EACH,MAAM,IAAI9B,EAAS,0CAErB,MAAM,IAAIqC,EAActB,EAAUwB,EAAKT,GAGzC,OAAO6C,GCnBIE,EAAiB9D,GAAkC+C,EAAM/C,EAAUgC,G,qBCFhF,MAAM+B,EAAkB,IAAIC,IAAI,CAC9B,CAAC,SAAK,iBACN,CAAC,SAAK,iBACN,CAAC,SAAK,gBACN,CAAC,SAAK,kBASFC,EAAU,IAAIC,OAAOC,MAAMC,KAAKL,EAAgBM,QAAQC,KAAK,KAAM,MAO1DC,MALIlE,GACEA,EAAIkE,UALZ,QAMOC,QAAQP,GAAUQ,GAAUV,EAAgBW,IAAID,IAAU,WClB9E,MAAME,EAAU1C,YAAO,CACrBO,KAAMJ,cACNwC,QAASlC,YAASmC,eAClBC,QAASvC,YACPN,YAAO,CACL8C,IAAK3C,cACL4C,YAAa5C,mBAON6C,EAAWhD,YAAO,CAI7B6C,QAASvC,YAAMH,eAEf8C,mBAAoBxC,YAASH,YAAMoC,MCH/BQ,EAASC,YAAOhD,cAAUG,YAAMH,gBAEhCiD,EAAUD,YAAOhD,cAAUkD,YAAM,CAAC3C,cAAWP,iBAO7CmD,EAAkBC,YAAOH,EAAS,WAAW,CAACI,EAASnG,KAC3D,MAAMoG,EAAQpG,EAAQX,KAAKW,EAAQX,KAAKgC,OAAS,GAE3CgF,EAASrG,EAAQsG,OAAOtG,EAAQsG,OAAOjF,OAAS,GAGtD,GAAqB,kBAAV+E,IATe,EAACG,EAAWJ,IACtCtB,MAAM2B,QAAQD,IAASA,EAAKE,SAASN,GAQHO,CAAoBL,EAAQF,GAC5D,MAAO,oCAGT,IAAK,MAAMQ,KAAOR,EAChB,IAAKQ,EAAIF,SAAS,QAAUE,EAAIF,SAAS,QAA0B,IAAjBN,EAAQQ,GACxD,MAAO,mDAIX,GAAIP,EAAQC,EAAOhF,OAAS,EAAG,CAC7B,IAAoB,IAAhB8E,EAAQ,IACV,MAAQ,qDAGV,GAAIS,OAAOC,OAAOV,GAASW,QAAO,CAACC,EAAcC,IAASD,IAAgB,IAATC,IAAe,GAC9E,MAAQ,0DAIV,IAAoB,IAAhBb,EAAQ,IACV,IAAK,MAAMQ,KAAOR,EAChB,GAAY,KAARQ,IAA+B,IAAjBR,EAAQQ,GACxB,MAAO,kFAMf,OAAO,KAGHM,EAAOtE,YAAO,CAClBuE,QAASpE,cACTqE,MAAO/D,YAASN,eAChBsE,aAAchE,YAASN,eACvBuE,SAAUpE,YAAMgD,KAGLqB,EAAW3E,YAAO,CAC7B4E,OAAQzE,cACRD,MAAOC,cACP0E,KAAMpE,YAASN,eACfsE,aAAchE,YAASN,eACvB2E,OAAQrE,YAASyC,GACjB6B,MAAOzE,YAAMgE,GACbU,SAAUvE,YAASuC,KC5ERiC,EAAS,CACpB,WACA,cACA,SACA,WACA,eACA,YACA,UACA,QACA,SACA,aACA,WAMWC,EAAU,CACrB,OACA,QACA,QACA,MACA,YACA,oBACA,cACA,uBAOWC,EAAa,IAGpBC,EADkB,GAIXC,EAAY,CACvB,CAAC,IAAK,IAAKD,EAAKA,EAAKA,EAAKA,EAAK,IAAK,IAAKA,EAAKA,EAAK,SAAK,SAAK,IAAK,SAAK,IAAK,IAAK,IAAK,SAAKA,EANjFD,EAM2F,SAN3FA,GAOV,CAACC,EAAK,IAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAK,IAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAK,SAAKA,EAAK,SAAKA,EAAK,SAP5ED,SAQV,CAACC,EAAK,SAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAK,IAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EARxDD,IAQuEC,EAAK,SAAKA,EAAKA,EARtFD,KASV,CAACC,EAAKA,EAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAKA,EATxDD,IASuEC,EAAKA,EAAKA,EAAKA,EATtFD,KAUV,CAAC,SAAK,SAAK,IAAK,IAAK,SAAK,OAAK,IAAK,IAAK,SAAK,SAAK,SAAK,SAAK,OAAK,SAAK,IAAK,SAAK,SAAK,SAAK,SAAK,SAAK,IAAK,UAC1G,CAXUA,QAWWC,EAAKA,EAAK,SAAK,SAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAX5ED,SAYV,CAACC,EAAKA,EAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAK,IAAKA,EAAK,SAAKA,EAAKA,EAAKA,EAAKA,EAZtFD,KAaV,CAbUA,QAaWC,EAAKA,EAAKA,EAAK,IAAKA,EAAKA,EAAKA,EAAK,SAAKA,EAAK,SAAKA,EAAK,SAAKA,EAAKA,EAb5ED,UAgBCG,EAAS,CACpB,CAAC,SAAK,YACN,CAAC,SAAK,UACN,CAAC,SAAK,kBACN,CAAC,SAAK,kBACN,CAAC,SAAK,qBAGKC,EAAa,CACxB,CAAC,SAAK,YACN,CAAC,SAAK,mBACN,CAAC,SAAK,WACN,CAAC,SAAK,SACN,CAAC,SAAK,WAMKC,EAAY,CACvB,CAAC,SAAK,aACN,CAAC,UAAM,YACP,CAAC,UAAM,mBACP,CAAC,UAAM,SACP,CAAC,UAAM,uBAGIC,GAAgB,IAAIH,KAAWC,KAAeC,GAAW1H,KAAK4H,GAAMA,EAAE,KAItEC,GAAgB,CAAC,QAAS,YAAa,WAAY,QACnDC,GAAoB,CAAC,QAAS,UAAW,QAkBzCC,GAAsB,CAEjC,CAAC,CAAC,IAAK,KAAM,CAAC,EAAG,IACjB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,IACnB,CAAC,CAAC,SAAK,KAAM,CAAC,EAAG,IAGjB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,GAAI,UAAM,CAAC,IAAM,EAAE,IAGrB,CAAC,CAAC,IAAK,QAAM,CAAC,EAAG,EAAE,IACnB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,SAAK,KAAM,CAAC,EAAG,EAAE,IAGnB,CAAC,SAAK,CAAC,GAAK,KAGZ,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,EAAE,IACnB,CAAC,CAAC,SAAK,UAAM,CAAC,GAAK,EAAE,IACrB,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,EAAE,IAGnB,CAAC,CAAC,OAAK,IAAK,CAAC,EAAG,EAAE,IAClB,CAAC,SAAK,CAAC,GAAK,EAAE,IAGd,CAAC,CAAC,IAAK,UAAM,CAAC,EAAG,IACjB,CAAC,CAAC,SAAK,UAAM,CAAC,EAAG,KAeNC,GAAuB,CAClC,CAAEhD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,IAAK,MAC3D,CAAEjD,IAAK,SAAUC,YAAa,SAAUgD,SAAU,CAAC,IAAK,MACxD,CAAEjD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,IAAK,MAC3D,CAAEjD,IAAK,SAAUC,YAAa,eAAgBgD,SAAU,CAAC,WACzD,CAAEjD,IAAK,SAAUC,YAAa,eAAgBgD,SAAU,CAAC,WACzD,CAAEjD,IAAK,SAAUC,YAAa,WAAYgD,SAAU,CAAC,MACrD,CAAEjD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,MACtD,CAAEjD,IAAK,SAAUC,YAAa,cAAegD,SAAU,CAAC,MACxD,CAAEjD,IAAK,SAAUC,YAAa,kBAAmBgD,SAAU,CAAC,MAC5D,CAAEjD,IAAK,SAAUC,YAAa,WAAYgD,SAAU,CAAC,MACrD,CAAEjD,IAAK,SAAUC,YAAa,eAAgBgD,SAAU,CAAC,MACzD,CAAEjD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,SAAK,MAC3D,CAAEjD,IAAK,SAAUC,YAAa,iBAAkBgD,SAAU,CAAC,IAAK,MAChE,CAAEjD,IAAK,SAAUC,YAAa,gBAAiBgD,SAAU,CAAC,IAAK,MAC/D,CAAEjD,IAAK,SAAUC,YAAa,eAAgBgD,SAAU,CAAC,IAAK,MAC9D,CAAEjD,IAAK,SAAUC,YAAa,aAAcgD,SAAU,CAAC,IAAK,MAC5D,CAAEjD,IAAK,SAAUC,YAAa,cAAegD,SAAU,CAAC,IAAK,MAC7D,CAAEjD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,IAAK,MAC3D,CAAEjD,IAAK,SAAUC,YAAa,iBAAkBgD,SAAU,CAAC,IAAK,MAEhE,CAAEjD,IAAK,SAAUC,YAAa,SAAUgD,SAAU,CAAC,IAAK,MACxD,CAAEjD,IAAK,SAAUC,YAAa,SAAUgD,SAAU,CAAC,IAAK,MACxD,CAAEjD,IAAK,SAAUC,YAAa,UAAWgD,SAAU,CAAC,IAAK,MACzD,CAAEjD,IAAK,SAAUC,YAAa,YAAagD,SAAU,CAAC,MACtD,CAAEjD,IAAK,SAAUC,YAAa,gBAAiBgD,SAAU,CAAC,MAC1D,CAAEjD,IAAK,SAAUC,YAAa,kBAAmBgD,SAAU,CAAC,MAC5D,CAAEjD,IAAK,SAAUC,YAAa,qBAAsBgD,SAAU,CAAC,MAE/D,CAAEjD,IAAK,SAAUC,YAAa,8BAA+BgD,SAAU,CAAC,MAExE,CAAEjD,IAAK,SAAUC,YAAa,SAAUgD,SAAU,CAAC,MACnD,CAAEjD,IAAK,SAAUC,YAAa,UAAWgD,SAAU,CAAC,MACpD,CAAEjD,IAAK,SAAUC,YAAa,uBAAwBgD,SAAU,CAAC,MACjE,CAAEjD,IAAK,SAAUC,YAAa,wBAAyBgD,SAAU,CAAC,OAGvDC,GAAiB,CAC5B,CACElD,IAAK,SACLmD,IAAM,qBACNlD,YAAa,UACbgD,SAAU,CAAC,gBAAO,kBAEpB,CAAEjD,IAAK,IAAKmD,IAAK,IAAKlD,YAAa,mCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,oCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,qCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,kCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,+BACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,sBACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,gCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,uCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,oCACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,8BAGxBmD,GAA4B,CACvC,CAAEpD,IArEkB,SAqELmD,IArEK,SAqEQlD,YAAa,kBACzC,CAAED,IArE4B,SAqELmD,IArEK,SAqEkBlD,YAAa,oBAC7D,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,OAAQgD,SAAU,CAAC,YACtD,CAAEjD,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,YAAagD,SAAU,CAAC,YAC3D,CAAEjD,IAAK,SAAUmD,IAAM,eAAkBlD,YAAa,cAAegD,SAAU,CAAC,YAChF,CAAEjD,IAAK,IAAKmD,IAAK,IAAKlD,YAAa,sBACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,4BACnC,CAAED,IAAK,IAAKmD,IAAK,IAAKlD,YAAa,kBACnC,CAAED,IAAK,SAAKmD,IAAK,SAAKlD,YAAa,+BClKxBoD,GAAkB,uCAClBC,GAAc,iDAErBC,GAAiB,IAAIpE,OAAOqE,IAAmBA,IAAmB,QAAS,KAC3EC,GAAc,IAAItE,OAAOqE,IAAmBA,IAAmB,MAAO,KAa/DE,GAAe,CAACC,EAAkBjD,KAC7C,IAAKA,EACH,MAAO,CAAEkD,SAAS,EAAO1H,QAASoH,IAGpC,MAAMO,EAAQrE,EAAUmE,GAExB,IAAIzH,EACJ,GAAIwE,EAAQkD,QAAQ5C,SAAS6C,GAC3B,MAAO,CAAED,SAAS,GACb,GAAK1H,EAAUwE,EAAQoD,aAAanE,IAAIkE,GAC7C,MAAO,CAAED,SAAS,EAAO1H,QAASA,GAC7B,GAAIwE,EAAQqD,UAAW,CAE5B,MAAMrE,EAAQgB,EAAQqD,UAAUC,MAAK,EAAGC,aAzBZC,KAC9B,MACMC,EADMX,IAAmBU,GACZzE,QAAQ8D,GAAgB,MAAM9D,QAAQgE,GAAa,KACtE,OAAO,IAAItE,OAAQ,IAAGgF,KAAW,MAuBtBC,CAAgBH,GAASI,KAAKR,KAEvC,GAAInE,EACF,MAAO,CAAEkE,SAAS,EAAO1H,QAASwD,EAAMxD,SAK5C,MAAO,CAAE0H,SAAS,EAAO1H,QAAoC,IAA3BwE,EAAQkD,QAAQhI,OAAe0H,GAAcD,KASpEiB,GAAc,CAAChJ,EAAY0G,EAAgBuC,EAAwB,MAC9E,GAAIvC,EAAOwC,eAAelJ,GAAM,CAE9B,MAAMmJ,EAAiB,IAAIF,EAAajJ,GACxC,IAAIoJ,EAAoB,GAWxB,OATA1C,EAAO1G,GAAKgD,SAASqG,IACnB,GAAI3C,EAAOwC,eAAeG,KAAWF,EAAezD,SAAS2D,GAAQ,CAEnE,MAAMC,EAAWN,GAAYK,EAAO3C,EAAQyC,GAC5CC,EAAUA,EAAQG,OAAOD,QAEzBF,EAAQI,KAAKH,MAGVD,EAGP,MAAO,CAACpJ,IAINyJ,GAAa,CAAuB3D,EAAW4D,KACnD,IAAIC,EAAS,GAIb,OAHAD,EAAI1G,SAAS4C,IACX+D,EAAO/D,GAAOE,EAAOF,MAEhB+D,GAgEIC,GAAajK,IACxB,MAAM4D,EAAQb,EAAM/C,EAAU4G,GAExBsD,EAAWJ,GAAWlG,EAAO,CAAC,SAAU,QAAS,OAAQ,iBACzDmD,EAjEWA,KACjB,GAAIA,EAAQ,CACV,IAAIiD,EAAiB,GAErB,IAAK,MAAM/D,KAAOc,EAEhBiD,EAAOzF,EAAU0B,IAAQc,EAAOd,GAAKlG,IAAIwE,GAE3C,OAAOyF,EAEP,MAAO,IAuDMG,CAAUvG,EAAMmD,QACzBC,EAAQpD,EAAMoD,MAAMjH,KAAKqK,IAGtB,IAFMN,GAAWM,EAAM,CAAC,UAAW,QAAS,iBAEjCzD,SAvDF,EAACA,EAA6BI,KAChD,MAAMsD,EAAgB1D,EAAS5G,KAAI,CAAC0F,EAASxF,KAC3C,IAAI0I,EAAoB,GACpBG,EAAwB,GAC5B,MAAMD,EAAe,IAAI7E,IACzB,IAAIsG,EAGJ,IAAK,MAAMrE,KAAOR,EAAS,CACzB,MAAMyC,EAAM3D,EAAU0B,GAChByD,EAAQjE,EAAQQ,IACR,IAAVyD,EAEFf,EAAUA,EAAQiB,OAAOP,GAAYnB,EAAKnB,IACjCmB,EAAInC,SAAS,QAAUmC,EAAInC,SAAS,KAE7C+C,EAAUe,KAAK,CAAEb,QAASd,EAAKjH,QAASyI,GAAStB,KAChC,SAARF,GAAmC,kBAAVwB,EAElCY,EAAOZ,EAGPL,GAAYnB,EAAKnB,GAAQ1D,SAASkH,IAChC1B,EAAa2B,IAAID,EAAQb,GAAStB,OAIxC,MAAO,CAAEO,UAASE,eAAcC,YAAWwB,WAIvCG,EAAcJ,EAAcA,EAAc1J,OAAS,GAazD,OAZmC,IAA/B8J,EAAY9B,QAAQhI,QAEtB8J,EAAY9B,QAAQkB,KAAK,IACzBY,EAAYC,OAAQ,GACXD,EAAY9B,QAAQ5C,SAAS,IAEtC0E,EAAYC,OAAQ,EAGpBL,EAAcR,KAAK,CAAElB,QAAS,CAAC,IAAKE,aAAc,IAAI7E,IAAO0G,OAAO,IAG/DL,GAUYM,CAAYP,EAAKzD,SAAUI,OAIxC6D,EAAsB,IAAKV,EAAUnD,SAAQC,SAEnD,GAAIpD,EAAMqD,SAAU,CAClB,MAAM,QAAEnC,EAAF,mBAAWI,GAAuBtB,EAAMqD,SACxC4D,EAAenD,GAAcoD,MAAMC,GAASjG,EAAQiB,SAASgF,KAEnEH,EAAW3D,SAAW,CACpBnC,UACA+F,eACAG,SAAU9F,GAId,OAAO0F,GChNHK,GAAWhJ,YAAO,CACtBO,KAAMJ,cACN4C,YAAa5C,cACb8I,KAAM9I,cACNK,OAAQC,YAASC,iBAGNwI,GAAelJ,YAAO,CACjCE,MAAOC,cACP4C,YAAa5C,cACbgJ,MAAO7I,YAAM0I,MCXTI,GAAc,CAElBtG,IAAK3C,cACLqE,MAAOrE,cACPkJ,MAAO5I,YAASN,eAChB4C,YAAatC,YAASN,gBAGlBmJ,GAAQtJ,YAAOoJ,IAOf1G,GAAU1C,YAAO,CACrBO,KAAMJ,cACNwC,QAASlC,YAASmC,eAClBC,QAASvC,YACPN,YAAO,IACFoJ,GACHrG,YAAa5C,mBAMNoJ,GAAYC,YAAK,CAC5BC,QAAShJ,YAASN,eAClBuJ,SAAUjJ,YAASN,eACnBwJ,OAAQlJ,YAASN,eACjB0C,QAASvC,YAAMgJ,IACfrG,mBAAoBxC,YAASH,YAAMoC,O,YCpBrC,MAAMkH,GAAkBC,wBAAoC,MAEtDC,GAAgBC,UACpB,MAAMC,QAAYC,MZbU,yBYaW,CAAEC,YAAa,gBAChD9J,QAAa4J,EAAIG,OACvB,MAAO,CAAEC,SAAUvI,EAAczB,GAAOiK,IAAKjK,IAGlCkK,GAAc,KACzB,MAAMC,EAAgBC,qBAAWZ,IACjC,IAAKW,EAEH,MAAM,IAAItN,MAAM,gDAElB,OAAOsN,GAOHE,GAAe,kBAGrB,IAAIC,IAAa,EA8CFC,OA5CE,EAAGC,eAClB,MAAM,OAAE7C,EAAF,MAAU7J,EAAV,QAAiB2M,GAAYC,YAAShB,GAAe,IAErDM,EAAW,CACfS,UACA3M,QACA6M,SAAS,EACThD,OAAM,OAAEA,QAAF,IAAEA,OAAF,EAAEA,EAAQqC,UAGlB,GAAIS,IAAY3M,EAEd,IACE,MAAM8M,EAAaC,aAAaC,QAAQT,IACpCO,IACFZ,EAASrC,OAASlG,EAAcmJ,GAChCZ,EAASW,SAAU,EACnBX,EAASS,SAAU,GAErB,YAGO3M,IAAUwM,IAEnBA,IAAa,EACbpJ,QAAQpD,MAAMA,GACVA,aAAiBiN,YAEnBC,MACG,8FAEMlN,aAAiBmB,EAC1B+L,MAAO,gCAA+BlN,EAAMc,WAE5CoM,MAAM,mDAEH,OAAIrD,QAAJ,IAAIA,OAAJ,EAAIA,EAAQsC,MAEjBY,aAAaI,QAAQZ,GAAc1C,EAAOsC,KAG5C,OAAO,eAACT,GAAgB0B,SAAjB,CAA0B7D,MAAO2C,EAAjC,SAA4CQ,K,0KCnFrD,MAAOW,GAAIC,GAAMC,GAAMC,IAAS,CAAC,UAAW,YAAa,YAAa,cAChEC,GAAU,CAACJ,GAAIA,GAAIC,GAAMA,GAAMC,GAAMC,GAAOD,GAAMC,GAAO,IAAK,KAEvDE,GAAgBC,IAC3B,IACIC,EADAzH,EAAO,EAGX,OAAQ0H,IACFA,EAAE/H,MAAQ2H,GAAQtH,IACpB2H,aAAaF,GACbA,EAAQG,YAAW,IAAO5H,EAAO,GAAI,KACrCA,GAAQ,EACJA,IAASsH,GAAQjN,SACnBmN,IACAxH,EAAO,IAGTA,EAAO,ICbA6H,GAAqB,CAChClI,EACAmI,EACAC,GAAgB,KAEhB,MAAMC,EAAQC,kBAAO,IACd7E,EAAO8E,GAAYC,oBAAS,KACjC,MAAMC,EAASzI,GAAOiH,aAAaC,QAAQlH,GAC3C,OAAe,OAAXyI,EACKN,EAEAO,KAAK5L,MAAM2L,MAItBE,wBAAc,CAAE,CAAC3I,GAAO,eAAgByD,IAExC,MAAMmF,EAASC,uBAAaC,IAC1BP,EAASO,KACR,IAUH,OARAC,qBAAU,KACJ/I,IAAQqI,EAAMW,SAAWZ,GAC3BnB,aAAaI,QAAQrH,EAAK0I,KAAKO,UAAUxF,IAEzC4E,EAAMW,SAAU,IAEjB,CAAChJ,EAAKyD,EAAO2E,IAET,CAAC3E,EAAOmF,IC7BXM,GAAerD,yBAAc,GAEtBsD,GAAkB,IAAM3C,qBAAW0C,IA8BjCE,OA5BAC,IACb,MAAOC,EAAOC,GAAYrB,GAAmB,cAAc,GAwB3D,OAtBAa,qBAAU,KACR,MAAMS,EAAY5B,IAAa,IAAMR,MAAM,oCACrCqC,EAAW1B,IACD,MAAVA,EAAE/H,KAAe+H,EAAE2B,SAAW3B,EAAE4B,UAClCJ,GAAUK,IAAOA,IAEnBJ,EAAUzB,IAIZ,OAFAzM,SAASuO,iBAAiB,UAAWJ,GAE9B,KACLnO,SAASwO,oBAAoB,UAAWL,MAEzC,CAACF,IAGJR,qBAAU,KACJgB,IAGH,CAACR,IAEG,eAACL,GAAa5B,SAAd,CAAuB7D,MAAO6F,EAA9B,SAAsCD,EAAMzC,Y,kDCjBrD,MAAMoD,GAAW,CACfC,OAAQ,OACRX,OAAO,GAgGMY,ICxGVC,GDwGUD,GA7FKb,IAClB,MAAM,KAAExI,EAAF,MAAQyI,EAAR,OAAeW,EAAQ1N,KAAM6N,EAA7B,SAA2CC,EAA3C,SAAqDC,GAAa,IAAKN,MAAaX,IACnF9M,EAAMgO,GAAW/B,mBAAiB4B,GAAgB,KAClDhK,EAAKoK,GAAUhC,qBAAW4B,IAC1BK,EAAMC,GAAWlC,oBAAS,GAC3BmC,EAAWrC,mBACXsC,EAAQtC,oBAER,OAAEvE,GAAW+C,YAAS+D,KAAa,CAACtO,EAAMsE,EAAMT,IAEhD0K,EAAe/G,GAAkBxH,EAEjCwO,EAAWlC,uBAAY,KAC3B,GAAI8B,EAAS3B,QAAS,CACpB,MAAMjB,EAAI4C,EAAS3B,QACnBjB,EAAEiD,SACFjD,EAAEkD,kBAAkB,EAAGlD,EAAEtE,MAAM/I,QAC/BY,SAAS4P,YAAY,QACrBR,GAAQ,GACR7R,OAAOmP,aAAa4C,EAAM5B,SAC1B4B,EAAM5B,QAAUnQ,OAAOoP,YAAW,IAAMyC,GAAQ,IAAQ,QAEzD,IAEGS,EAAS/K,EACb,eAACgL,GAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUC,QAASR,EAAUS,UAAW,eAAC,KAAD,IAA1E,kBAIA,eAACJ,GAAA,EAAD,CAAQ5F,KAAK,SAAS6F,QAAQ,YAAYC,MAAM,UAAhD,oBAeF,OACE,uBAAMjB,SAXctC,IACpBA,EAAE0D,iBACElP,EAAKmP,SACPlB,GAAO,GACHH,GACFA,EAAS9N,KAMb,SACE,gBAACoP,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,WAAW,SAASC,QAAQ,SAAxD,UACE,gBAACJ,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,EAAtC,UACE,gBAACC,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,qEAC2DtC,EAD3D,oEAIA,eAACuC,GAAA,EAAD,CACEC,YAAa,CACXC,eAAe,GAEjBjC,KAAMA,EACNkC,sBAAoB,EACpBC,sBAAoB,EACpBC,sBAAoB,EACpB3Q,MAAO,eAACmQ,GAAA,EAAD,CAAYhB,QAAQ,YAApB,0BART,SAUE,eAACyB,GAAA,EAAD,CACEC,MAAShJ,EAAS,kBAAoBkG,EACtCoB,QAAQ,SACR2B,WAAY,CACVC,WAAYlJ,GAEd4G,SAAUA,EACVuC,WAAS,EACTC,SAAWpF,GAAMwC,EAAQxC,EAAEqF,OAAO3J,OAClCA,MAAOqH,SAIb,eAACa,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAf,SACE,gBAACN,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAASD,WAAW,SAASD,QAAS,EAA9D,UACE,eAACF,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAYb,IACX7B,GACC,eAACqC,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACZ,GAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUC,QAAS,IAAMf,GAAO,GAAlE,qBAKHF,GAAY,eAACqB,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAY1B,eC1ErC,SAAS+C,GAAQC,EAAczF,GAAyB,IAAD,IACrD,MAAM,MAAEpE,GAAU6J,EAEZC,EAAUD,EAAME,IAAIxE,UAAY1N,SAASmS,eAAiB5F,EAAOrC,OAAS2E,GAAGuD,WAE7EC,EAASJ,GAAU,UAAAD,EAAME,IAAIxE,eAAV,eAAmB4E,iBAAkB,EAAIN,EAAMK,OAClEE,EAAcN,GAAU,UAAAD,EAAME,IAAIxE,eAAV,eAAmB8E,eAAgBH,EAASL,EAAMO,YAE1EE,EAAYC,IAChB,MAAMH,OACoBI,IAAxBD,EAAQH,YACJG,EAAQH,iBACWI,IAAnBD,EAAQL,OACRK,EAAQL,OACRL,EAAMO,YACZ,MAAO,IAAKP,KAAUU,EAASH,gBAGjC,OAAQhG,EAAOrC,MACb,KAAK2E,GAAG+D,OACN,GAAIP,IAAWE,EACb,OAAOE,EAAS,CACdJ,SACAE,YAAaF,EACblK,MAAOA,EAAM5J,MAAM,EAAG8T,GAAUlK,EAAM5J,MAAMgU,EAAapK,EAAM/I,UAE5D,GAAe,IAAXiT,EACT,OAAOL,EAMP,OAJUS,EAAS,CACjBJ,OAAQA,EAAS,EACjBlK,MAAOA,EAAM5J,MAAM,EAAG8T,EAAS,GAAKlK,EAAM5J,MAAM8T,EAAQlK,EAAM/I,UAIpE,KAAKyP,GAAGgE,OACN,OAAOJ,EAAS,CACdJ,OAAQA,EAAS9F,EAAOpE,MAAM/I,OAC9B+I,MAAOA,EAAM5J,MAAM,EAAG8T,GAAU9F,EAAOpE,MAAQA,EAAM5J,MAAMgU,EAAapK,EAAM/I,UAElF,KAAKyP,GAAGiE,IACN,OAAOL,EAAS,CAAEtK,MAAOoE,EAAOpE,MAAOkK,OAAQ9F,EAAOpE,MAAM/I,SAC9D,KAAKyP,GAAGkE,KACN,OAAON,EAAS,CAAEJ,SAAQE,cAAapK,MAAOoE,EAAOpE,QACvD,KAAK0G,GAAGuD,WACN,OAAOK,EAAS,CAAEJ,SAAQE,kB,SAnE3B1D,O,mBAAAA,I,mBAAAA,I,aAAAA,I,eAAAA,I,4BAAAA,Q,KAyHUmE,OAlDK,KAClB,MAAM3D,EAAWrC,iBAAyB,QACnC,OAAEqF,EAAF,YAAUE,EAAV,MAAuBpK,GAAS8K,GAAYC,qBAAWnB,GAAS,CACrEM,OAAQ,EACRE,YAAa,EACbpK,MAAO,GACP+J,IAAK7C,IAGD8D,EAAiB5F,uBACpB/D,GAAiByJ,EAAS,CAAE/I,KAAM2E,GAAGgE,OAAQ1K,MAAOqB,KACrD,IAEI4J,EAAa7F,uBAChBd,GAA2CwG,EAAS,CAAE/I,KAAM2E,GAAGkE,KAAM5K,MAAOsE,EAAEqF,OAAO3J,SACtF,IAEIkL,EAAe9F,uBAAY,IAAM0F,EAAS,CAAE/I,KAAM2E,GAAG+D,UAAW,IAChE3F,EAAWM,uBAAa+F,GAAgBL,EAAS,CAAE/I,KAAM2E,GAAGiE,IAAK3K,MAAOmL,KAAQ,IA6BtF,OA3BAC,2BAAgB,KACd,MAAMC,EAAexT,SAASmS,cACxBsB,EAAUpE,EAAS3B,QAEnBgG,EAAc,KAEX,OAAPD,QAAO,IAAPA,KAASE,MAAM,CAAEC,eAAe,IACzB,OAAPH,QAAO,IAAPA,KAAS9D,kBAAkB0C,EAAQE,IAE/BsB,EAAa,KACjBZ,EAAS,CAAE/I,KAAM2E,GAAGuD,cAStB,OANIoB,IAAiBC,GACnBC,IAGK,OAAPD,QAAO,IAAPA,KAASlF,iBAAiB,QAASmF,GAC5B,OAAPD,QAAO,IAAPA,KAASlF,iBAAiB,OAAQsF,GAC3B,KACE,OAAPJ,QAAO,IAAPA,KAASjF,oBAAoB,QAASkF,GAC/B,OAAPD,QAAO,IAAPA,KAASjF,oBAAoB,OAAQqF,MAEtC,CAACxB,EAAQE,IAEZlF,wBAAc,CAAEgF,OAAQA,EAAQlK,MAAOA,IAEhC,CAAEgL,iBAAgBE,eAAcD,aAAYnG,WAAU9E,QAAO+J,IAAK7C,I,+GC9G3E,MAAMyE,GAAYC,aAAYC,IAAD,CAC3BvC,MAAO,CACL,+BAAgC,CAC9B,CAACuC,EAAMC,YAAYhI,GAAG,OAAQ,CAC5BiI,SAAU,QAEZA,SAAU,WAGd7M,MAAO,CACL,CAAC2M,EAAMC,YAAYhI,GAAG,OAAQ,CAC5BiI,SAAU,QAEZA,SAAU,SACV,8BAA+B,CAC7BA,SAAU,YAGdC,cAAe,CACbC,YAAa,GAEfC,aAAc,CACZH,SAAU,OACV,CAACF,EAAMC,YAAYhI,GAAG,OAAQ,CAC5BiI,SAAU,eAKV/D,GAAkB1D,GAAWA,EAAE0D,iBA0ItBmE,OAxHGvG,IAChB,MAAMhN,EAAU+S,MACV,YACJS,EAAc,WADV,MAEJpM,EAFI,OAGJqM,EAHI,SAIJC,EAJI,SAKJpF,EALI,OAMJqF,EANI,QAOJC,EAPI,iBAQJC,EARI,MASJhW,EATI,SAUJiW,EAVI,cAWJC,GACE/G,GAEGoB,EAAMC,GAAWlC,oBAAS,GAG3B6H,EAAexH,uBAAY,KAAO,IAAD,EACrCoH,GAAWA,GAAQ,UAAAtF,EAAS3B,eAAT,eAAkBvF,QAAS,MAC7C,CAACwM,EAAStF,IAEP2F,EAAczH,uBACjBd,IACe,UAAVA,EAAE/H,KACJqQ,MAGJ,CAACA,IAGGE,EAAQN,GACZ,eAACzD,GAAA,EAAD,CAAStQ,MAAOgU,GAAoB,gCAAiCM,WAAY,IAAjF,SACE,eAACC,GAAA,EAAD,CAAYC,aAAW,QAAQC,YAAalF,GAAgBF,QAAS8E,EAArE,SACE,eAAC,KAAD,QAKAO,EAAaT,GACjB,eAAC9D,GAAA,EAAD,CAAYhB,QAAQ,QAAQiB,UAAU,OAAOuE,UAAWxU,EAAQsT,aAAhE,SACGQ,IAILpH,qBAAU,KACJiH,GAAUI,IACZ1F,GAAQ,GACR7R,OAAOoP,YAAW,IAAMyC,GAAQ,IAAQ,SAEzC,CAACsF,EAAQI,IAEZ,MAAMU,EAAgBd,GACpB,eAACe,GAAA,EAAD,CACEC,sBAAoB,EACpBC,mBAAiB,EACjBC,SAAS,QACT7U,QAAS,CAAE8U,cAAe9U,EAAQoT,eAJpC,SAMGW,EACC,eAAC5D,GAAA,EAAD,CACE/B,KAAMA,EACNkC,sBAAoB,EACpBC,sBAAoB,EACpBC,sBAAoB,EACpBuE,UAAU,aACVC,oBAAqBC,KACrBC,gBAAiB,CAAEC,QAAS,KAC5BtV,MAAO,eAACmQ,GAAA,EAAD,CAAYhB,QAAQ,YAApB,SAAiC+E,IAR1C,SAUE,gCAAOJ,MAGTA,IAKN,OACE,gBAACyB,GAAA,EAAD,CAAavE,WAAS,EAAChT,MAAOA,EAAOmR,QAAQ,WAA7C,UACE,eAACqG,GAAA,EAAD,CAAYC,QAAQ,YAAYd,UAAWxU,EAAQ0Q,MAAnD,SACG8C,IAEH,eAAC+B,GAAA,EAAD,CACEC,GAAG,YACH9E,MAAO8C,EACPiC,WAAYxB,EACZO,UAAWxU,EAAQsG,MACnBwK,SAAU2C,EACVrM,MAAOA,EACPkH,SAAUA,EACVoH,WAAY,CACVC,WAAY,QACZC,YAAa,MACbC,aAAc,MACdC,MAAO,CAAEC,WAAY,IAEvBC,aACE,gBAACtB,GAAA,EAAD,CAAgBG,SAAS,MAAzB,UACE,eAAC1E,GAAA,EAAD,CAAStQ,MAAM,SAASsU,WAAY,IAApC,SACE,eAACC,GAAA,EAAD,CAAYC,aAAW,SAASC,YAAalF,GAAgBF,QAASwE,EAAtE,SACE,eAAC,KAAD,QAGHQ,KAGL+B,eAAgBxB,IAGlB,eAACyB,GAAA,EAAD,CAAUC,GAAItY,EAAd,SACE,eAACuY,GAAA,EAAD,CAAgBvY,OAAK,EAACmR,QAAQ,WAA9B,SACGuF,U,iBCpKJ,MAAM8B,GAAcC,IACzB,QAAe1E,IAAX0E,EACF,MAAO,KAAM,EACR,GAAsB,oBAAXA,EAChB,OAAOA,EACF,GAAIzU,MAAM2B,QAAQ8S,GAAS,CAChC,MAAMpO,EAAM,IAAI6J,IAAIuE,GACpB,OAAQ7N,GAASP,EAAIqO,IAAI9N,GAEzB,OAAQA,GAAS6N,EAAOC,IAAI9N,IAInB+N,GAAaF,GACjBG,mBAAQ,IAAMJ,GAAWC,IAAS,CAACA,IAG/BI,GAAezD,GACH,UAAvBA,EAAM0D,QAAQxN,KACVyN,aAAQC,aAAK5D,EAAM0D,QAAQG,QAAS,GAAI,KACxCC,aAAOF,aAAK5D,EAAM0D,QAAQG,QAAS,GAAI,KAMhCE,GAAcC,GAAsB,IAANA,EAAU,EAAU,IAANA,EAAU,EAAI,G,gECvBvE,MAAMlE,GAAYC,aAAYC,IAAD,CAC3BiE,OAAQ,CACNC,QAASlE,EAAMzD,QAAQ,EAAG,IAC1B4H,WAAY,OACZjE,SAAU,SACV7B,OAAQ,UACRrC,MAAOgE,EAAM0D,QAAQnL,OAAO6L,UAE9BC,UAAW,CACTrI,MAAOgE,EAAM0D,QAAQ7M,KAAKyN,QAC1BjG,OAAQ,UACR,UAAW,CACTkG,gBAAiBvE,EAAM0D,QAAQnL,OAAOiM,QAG1CC,WAAY,CACVF,gBAAiBvE,EAAM0D,QAAQnL,OAAOmM,mBACtC1I,MAAO,cACPqC,OAAQ,UACR,UAAW,CACTkG,gBAAiBvE,EAAM0D,QAAQnL,OAAOmM,qBAG1CC,eAAgB,CACdC,WAAa,aAAYnB,GAAYzD,MAEvC6E,gBAAiB,CACfC,YAAc,aAAYrB,GAAYzD,MAExC+E,KAAM,CACJb,QAAS,aAEXxD,OAAQ,CACNsE,SAAU,OACVJ,WAAa,aAAYnB,GAAYzD,KACrC8E,YAAc,aAAYrB,GAAYzD,UAMpCiF,GAAalL,IACjB,MAAMhN,EAAU+S,MACV,QAAE7D,EAAF,OAAWoH,GAAWtJ,EACtBmL,EAAW3B,GAAUF,GACrB8B,EAAgB5L,uBACnB/D,GACCA,IAAS3D,GZ3BS,KY2BK2D,GAAqByG,GAAWiJ,EAAS1P,GAC5D,IAAMyG,EAAQzG,QACdmJ,GACN,CAAC1C,EAASiJ,IAGN/I,EAAiB5C,uBAAad,GAAMA,EAAE0D,kBAAkB,IAGxDiJ,EAAO7L,uBACX,EAAG8L,IAAGC,QAAmC,IAAD,IACtC,MAAMC,EAAS,UAAGxT,EAAUuT,UAAb,aAAG,EAAmB,EAAJD,GAC3BG,EAAM,UAAGzT,EAAUuT,UAAb,aAAG,EAAmB,EAAJD,EAAQ,GAGhCI,EAAaJ,EAAI,GAAKA,EAAI,GAAW,IAANC,EAErC,OACE,uCACE,eAACI,GAAA,EAAD,CACEC,MAAM,SACNpE,UAAWqE,aACT7Y,EAAQkX,OACRsB,GAAaL,EAASK,IAAcxY,EAAQsX,UAC5CkB,IAAc1T,GAAc9E,EAAQ0X,WACpCgB,GAAc1Y,EAAQ4X,gBAExBT,QAAQ,OACRjI,QAASkJ,EAAcI,GACvBlE,YAAalF,EAVf,SAYGoJ,IAEH,eAACG,GAAA,EAAD,CACEC,MAAM,SACNpE,UAAWqE,aACT7Y,EAAQkX,OACRuB,GAAUN,EAASM,IAAWzY,EAAQsX,UACtCmB,IAAW3T,GAAc9E,EAAQ0X,WACjCgB,GAAc1Y,EAAQ8X,iBAExBX,QAAQ,OACRjI,QAASkJ,EAAcK,GACvBnE,YAAalF,EAVf,SAYGqJ,SAKT,CAACN,EAAUnY,EAASoY,EAAehJ,IAGrC,OACE,eAAC0J,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,CAAOC,KAAK,QAAQ3E,aAAW,yBAA/B,UACE,eAAC4E,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,WACE,eAACP,GAAA,EAAD,IACC/T,EAAOnH,KAAK0b,GACX,eAACR,GAAA,EAAD,CAEEC,MAAM,SACNpE,UAAWqE,aAAK7Y,EAAQ2T,OAAQ3T,EAAQgY,MACxCoB,QAAS,EACTjC,QAAQ,OALV,SAOGgC,GANK,kBAAiBA,YAW/B,eAACE,GAAA,EAAD,UACGxU,EAAQpH,KAAI,CAAC6b,EAAQf,IACpB,gBAACW,GAAA,EAAD,WACE,eAACP,GAAA,EAAD,CAAWnE,UAAWxU,EAAQgY,KAA9B,SAAqCsB,IACpC1U,EAAOnH,KAAI,CAAC0b,EAAOb,IAClB,eAACD,EAAD,CAA4CC,EAAGA,EAAGC,EAAGA,GAAzC,cAAae,KAAUH,SAHvB,mBAAkBG,eAa/BC,sBAAKrB,ICvIpB,MAAMnF,GAAYC,aAAYC,IAAD,CAC3BiE,OAAQ,CACNC,QAASlE,EAAMzD,QAAQ,IAAM,GAC7BgK,UAAW,SACXpC,WAAY,OACZjE,SAAU,SACV0E,WAAa,aAAYnB,GAAYzD,MAEvCoE,SAAU,CACR/F,OAAQ,UACRrC,MAAOgE,EAAM0D,QAAQnL,OAAO6L,UAE9BC,UAAW,CACThG,OAAQ,UACR,UAAW,CACTkG,gBAAiBvE,EAAM0D,QAAQnL,OAAOiM,QAG1CgC,MAAO,CACLtG,SAAU,SACVuG,cAAe,SACfvC,QAASlE,EAAMzD,QAAQ,EAAG,IAC1BuI,YAAc,aAAYrB,GAAYzD,MAExCU,OAAQ,CACNwD,QAASlE,EAAMzD,QAAQ,IAAM,KAC7BqI,WAAa,aAAYnB,GAAYzD,KACrC8E,YAAc,aAAYrB,GAAYzD,UAMpC0G,GAAgB3M,IACpB,MAAMhN,EAAU+S,MACV,QAAE7D,EAAF,OAAWoH,GAAWtJ,EACtBmL,EAAW3B,GAAUF,GAErBsD,EAASnD,mBAAQ,IACdxR,EAAOxH,KAAI,CAACoc,EAAOlc,IAAM,CAACkc,EAAO3U,EAAWvH,GAAIwH,EAAUxH,OAChE,IAEGyR,EAAiB5C,uBAAad,GAAMA,EAAE0D,kBAAkB,IAExDiJ,EAAO7L,uBACX,EAAG0K,SAAQhX,WACT,MAAM4Z,EAAc5K,GAAWiJ,EAASjB,GAAU,IAAMhI,EAAQgI,QAAUtF,EAC1E,OACE,uCACE,eAAC+G,GAAA,EAAD,CACEnE,UAAWqE,aACT7Y,EAAQkX,OACRiB,EAASjB,GAAUlX,EAAQsX,UAAYtX,EAAQqX,UAEjDnI,QAAS4K,EACTxF,YAAalF,EANf,SAQG8H,IAEH,eAACyB,GAAA,EAAD,CAAWnE,UAAWxU,EAAQyZ,MAA9B,SAAsCvZ,SAI5C,CAACF,EAASkP,EAASE,EAAgB+I,IAGrC,OACE,eAACW,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,CAAOC,KAAK,QAAQ3E,aAAW,yBAA/B,UACE,2BAAU0F,KAAM,IAChB,2BAAUA,KAAM,IAChB,2BAAUA,KAAM,IAChB,eAACd,GAAA,EAAD,UACE,gBAACC,GAAA,EAAD,WACE,eAACP,GAAA,EAAD,CAAWC,MAAM,SAASpE,UAAWxU,EAAQ2T,OAAQyF,QAAS,EAA9D,oBAGA,eAACT,GAAA,EAAD,CAAWC,MAAM,SAASpE,UAAWxU,EAAQ2T,OAAQyF,QAAS,EAA9D,+BAGA,eAACT,GAAA,EAAD,CAAWC,MAAM,SAASpE,UAAWxU,EAAQ2T,OAAQyF,QAAS,EAA9D,4BAKJ,eAACC,GAAA,EAAD,UACGO,EAAOnc,KAAI,CAACuc,EAAKrc,IAChB,eAACub,GAAA,EAAD,UACGc,EAAIvc,KAAI,EAAEyZ,EAAQhX,GAAO+Z,IACxB,eAAC5B,EAAD,CAA6CnB,OAAQA,EAAQhX,KAAMA,GAAvD,wBAAuBvC,KAAKsc,QAF5B,wBAAuBtc,eAYpC4b,sBAAKI,ICnHpB,SAASO,KAA2Q,OAA9PA,GAAWtW,OAAOuW,QAAU,SAAUpJ,GAAU,IAAK,IAAIpT,EAAI,EAAGA,EAAIyc,UAAU/b,OAAQV,IAAK,CAAE,IAAI0c,EAASD,UAAUzc,GAAI,IAAK,IAAIgG,KAAO0W,EAAczW,OAAO0W,UAAUrT,eAAesT,KAAKF,EAAQ1W,KAAQoN,EAAOpN,GAAO0W,EAAO1W,IAAY,OAAOoN,IAA2ByJ,MAAMrc,KAAMic,WAIhT,IAAIK,GAAoB,gBAAoB,IAAK,CAC/CC,YAAa,EACbC,KAAM,OACNC,cAAe,OACfC,eAAgB,SACF,gBAAoB,OAAQ,CAC1CtN,EAAG,4GACY,gBAAoB,OAAQ,CAC3CA,EAAG,sCAGL,SAASuN,IAAa,MACpBjb,EAAK,QACLkb,KACG/N,GACFgO,GACD,OAAoB,gBAAoB,MAAOd,GAAS,CACtDe,MAAO,6BACPC,QAAS,eACTC,oBAAqB,OACrBC,SAAU,UACVC,SAAU,UACVT,cAAe,QACfC,eAAgB,QAChB1J,IAAK6J,EACL,kBAAmBD,GAClB/N,GAAQnN,EAAqB,gBAAoB,QAAS,CAC3D2V,GAAIuF,GACHlb,GAAS,KAAM4a,IAGpB,MAAMa,GAA0B,aAAiBR,IAClC,IC1Bf,MAAM/H,GAAYC,aAAYC,IAAD,CAC3BsI,KAAM,CACJC,MAAO,OACPC,OAAQ,QAEVC,UAAW,CACTvE,QAASlE,EAAMzD,QAAQ,EAAG,GAC1B2D,SAAU,SACV0B,SAAU,WACV4G,OAAQ,OACRE,UAAW,QACX1D,SAAU,SAEZ2D,QAAS,CACPH,OAAQ,OACRD,MAAO,OACP3G,SAAU,YAEZgH,UAAW,CACThH,SAAU,WACV4G,OAAQ,OACRD,MAAO,OACPM,OAAQ7I,EAAM0D,QAAQ7M,KAAKyN,SAE7BwE,KAAM,CACJlH,SAAU,WACV4G,OAAQ,MACRD,MAAO,MACPpQ,KAAM,OACN4Q,IAAK,SAEPC,QAAS,CACP7E,WAAY,OACZ9F,OAAQ,UACRuD,SAAU,WACVqH,UAAW,wBACXC,SAAU,UACVX,MAAO,QACPhC,UAAW,SACX,UAAW,CACTtV,QAAS,iBAGbkY,QAAS,CACPvH,SAAU,WACV2G,MAAO,QACPpQ,KAAM,UAERiR,UAAW,CACTxH,SAAU,WACV2G,MAAO,QACPnQ,MAAO,UAETiR,IAAK,CACHd,MAAO,QAETlE,UAAW,CACThG,OAAQ,UACR,UAAW,CACTiL,aAAc,MACd/E,gBAAiBvE,EAAM0D,QAAQnL,OAAOiM,QAG1CJ,SAAU,CAAEpI,MAAOgE,EAAM0D,QAAQnL,OAAO6L,UACxCmF,UAAW,CACT,YAAa,CACXC,OAAQ,KACRrR,KAAM,IACNsR,QAAS,KACTH,aAAc,MACd1H,SAAU,WACV3Q,QAAS,eACTsX,MAAO,QACPC,OAAQ,OACRjE,gBAAiBvE,EAAM0D,QAAQgG,WAAWC,QAG9CC,WAAY,CACVpB,OAAQ,QAEVqB,SAAU,CACR3F,QAASlE,EAAMzD,QAAQ,EAAG,IAE5BuN,YAAa,CACX5F,QAASlE,EAAMzD,QAAQ,GAAK,QAM1BwN,GAAc,EAAE1E,EAAGC,MACvB,MAAM0E,EAAa,GAAJ1E,EAEf,MAAO,CAAEnN,KAAe,KADZ6R,GAAU,EAAIA,GAAU3E,GACpB,IAAgB0D,IAAY,IAAJzD,EAAF,MAMlC2E,GAAUlQ,IACd,MAAMhN,EAAU+S,MACV,QAAE7D,EAAF,OAAWoH,GAAWtJ,EACtBmL,EAAW3B,GAAUF,GAErBlH,EAAiB5C,uBAAad,GAAMA,EAAE0D,kBAAkB,IACxDgJ,EAAgB5L,uBACnB0K,GAAYhI,GAAWiJ,EAASjB,GAAU,IAAMhI,EAAQgI,QAAUtF,GACnE,CAACuG,EAAUjJ,IAEPoI,EAAY9K,uBACf0K,GAAYiB,EAASjB,GAAUlX,EAAQsX,UAAYtX,EAAQqX,UAC5D,CAACc,EAAUnY,IAGPmd,EAAe3Q,uBACnB,EAAG4Q,SAAQC,aACT,GAAsB,kBAAXD,EAAqB,CAC9B,MAAME,EAAQF,EACd,OACE,eAACG,GAAA,EAAD,CAAK/I,UAAWqE,aAAK7Y,EAAQic,QAASjc,EAAQwc,WAAY1G,MAAOkH,GAAYK,GAA7E,SACE,sBACE7I,UAAWqE,aAAK7Y,EAAQsc,IAAKhF,EAAUgG,IACvCpO,QAASkJ,EAAckF,GACvBhJ,YAAalF,EAHf,SAKGkO,MAIF,CACL,MAAME,EAAWJ,EAAOpb,KAAK,IAAI3D,OAAS,EAEpCof,EAASD,EAAW,OAAW,UAC9BnB,EAAWD,GAAWgB,EAC7B,OACE,gBAACG,GAAA,EAAD,CACE/I,UAAWqE,aAAK7Y,EAAQic,QAAS,CAAE,CAACjc,EAAQwc,YAAagB,IACzD1H,MAAOkH,GAAYK,GAFrB,UAIGI,EACD,sBACEjJ,UAAWqE,aAAK7Y,EAAQqc,UAAW/E,EAAU+E,GAAYrc,EAAQwc,WACjEtN,QAASkJ,EAAciE,GACvB/H,YAAalF,EAHf,SAKGiN,IAEH,sBACE7H,UAAWqE,aAAK7Y,EAAQoc,QAAS9E,EAAU8E,GAAUpc,EAAQwc,WAC7DtN,QAASkJ,EAAcgE,GACvB9H,YAAalF,EAHf,SAKGgN,UAMX,CAAC9E,EAAWtX,EAASoY,EAAehJ,IAGhCsO,EAAajH,mBACjB,IACE,eAAC8G,GAAA,EAAD,CAAK/I,UAAWxU,EAAQ0b,UAAxB,SACE,uBAAKlH,UAAWxU,EAAQ4b,QAAxB,UACE,eAAC,GAAD,CAAWpH,UAAWxU,EAAQ6b,YAC9B,sBAAKrH,UAAWxU,EAAQ+b,KAAxB,SACGvW,GAAO/H,KAAI,EAAE2f,EAAQC,KACpB,eAACF,EAAD,CAAyCC,OAAQA,EAAQC,OAAQA,GAA7C,YAAWD,eAMzC,CAACpd,EAASmd,IAGZ,OACE,eAACI,GAAA,EAAD,CAAK/H,GAAG,YAAYhB,UAAWxU,EAAQub,KAAvC,SACE,gBAACjM,GAAA,EAAD,CAAMC,WAAS,EAACiF,UAAWxU,EAAQ6c,WAAYc,KAAK,SAApD,UACE,eAACrO,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,gBAACL,GAAA,EAAD,CAAMC,WAAS,EAACqO,UAAU,SAASpJ,UAAWqE,aAAK7Y,EAAQ6c,YAA3D,UACE,eAAC7M,GAAA,EAAD,CAAYhB,QAAQ,QAAQiB,UAAU,IAAtC,oBAGA,eAACX,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,eAACN,GAAA,EAAD,CACEC,WAAS,EACTqO,UAAU,SACVlO,QAAQ,gBACR8E,UAAWqE,aAAK7Y,EAAQ6c,WAAY7c,EAAQ+c,aAJ9C,SAMGzX,GAAc7H,KAAKge,GAClB,eAACzL,GAAA,EAAD,CAAyBhB,QAAQ,QAAQiB,UAAU,IAAnD,SACGwL,GADcA,cAQ3B,eAACnM,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,gBAACN,GAAA,EAAD,CAAMC,WAAS,EAACqO,UAAU,SAASpJ,UAAWxU,EAAQ6c,WAAtD,UACE,eAACvN,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACL,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,gBAAgB8E,UAAWxU,EAAQ8c,SAA3D,SACGvX,GAAkB9H,KAAKW,GACtB,eAAC4R,GAAA,EAAD,CAAsBhB,QAAQ,QAAQiB,UAAU,IAAhD,SACG7R,GADcA,SAMvB,eAACkR,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACG8N,eASAnE,sBAAK2D,IC/NpB,MAAMnK,GAAYC,aAAYC,IAAD,OAC3BsI,KAAM,CACJC,MAAO,OACPC,OAAQ,QAEVvE,OAAQ,CACNE,WAAY,OACZoC,UAAW,SACXrG,SAAU,SACV7B,OAAQ,UACRrC,MAAOgE,EAAM0D,QAAQnL,OAAO6L,UAE9BC,UAAW,CACTrI,MAAOgE,EAAM0D,QAAQ7M,KAAKyN,QAC1BjG,OAAQ,UACR,UAAW,CACTkG,gBAAiBvE,EAAM0D,QAAQnL,OAAOiM,QAG1C/U,YAAa,CACXyU,QAAS,MACThE,SAAU,UAEZ0K,kBAAmB,CACjB3Z,QAAS,OACT4Z,eAAgB,SAChBC,cAAe,SACftC,OAAQ,QAEVuC,SAAU,CACRC,WLHyBjF,EKGD,MLHe/J,EKGRyH,GAAYzD,GLFrC,GAAE+F,WAAc/J,QAAY+J,SAAY/J,MAAU+J,KAAQA,SAAY/J,MAAU+J,WAAc/J,cAAkB+J,SAAY/J,aAD1G,IAAC+J,EAAc/J,KKgBrCiP,GAAelR,IACnB,MAAMhN,EAAU+S,MACV,QAAE7D,EAAF,QAAWwN,EAAX,YAAoBxJ,EAAc,GAAlC,OAAsCiL,EAAU1b,IAAQA,GAAxD,QAA6D2b,EAA7D,OAAsE9H,GAAWtJ,EACjFmL,EAAW3B,GAAUF,GACrBlH,EAAiB5C,uBAAad,GAAMA,EAAE0D,kBAAkB,IAExDgJ,EAAgB5L,uBACnB0K,GAAYhI,GAAWiJ,EAASjB,GAAU,IAAMhI,EAAQgI,QAAUtF,GACnE,CAACuG,EAAUjJ,IAGb,OACE,eAACI,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACGkN,EAAQjf,KAAI,EAAGgF,MAAKmD,MAAKlD,cAAagD,cACrC,wBAAC4J,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,MAAQsD,EAAavP,IAAKjB,EAAa8R,UAAWxU,EAAQge,UACvE,gBAAC1O,GAAA,EAAD,CAAMC,WAAS,EAAf,UACE,eAACD,GAAA,EAAD,CACEK,MAAI,EAEJC,GAAKhK,GAAOA,EAAIvH,OAAS,GAAM,EAC/BmW,UAAWqE,aAAK7Y,EAAQkX,OAAQiB,EAAS1V,IAAQzC,EAAQsX,WACzDpI,QAASkJ,EAAc3V,GACvB6R,YAAalF,EANf,SAQGxJ,GAAOuY,EAAO1b,KAEjB,eAAC6M,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAAb,SACE,sBAAK4E,UAAWxU,EAAQ6d,kBAAxB,SACE,sBAAKrJ,UAAWxU,EAAQ0C,YAAxB,SAAsCA,QAb5C,OAiBGgD,QAjBH,IAiBGA,OAjBH,EAiBGA,EAAUjI,KAAKgL,IACd,MAAM4V,EAAWD,EAAW,GAAE3V,IAAOhG,IAAQgG,EAC7C,OACE,eAAC6G,GAAA,EAAD,CAEEK,MAAI,EACJC,GAAI,EACJ4E,UAAWqE,aAAK7Y,EAAQkX,OAAQiB,EAASkG,IAAare,EAAQsX,WAC9DpI,QAASkJ,EAAciG,GACvB/J,YAAalF,EANf,SAQGiP,GAPIA,eAkBR9E,sBAAK2E,ICrGb,MAAMhL,GAAc,CAAEpD,GAAI,EAAGD,GAAI,GAElCyO,GAActR,GAEhB,eAAC,GAAD,IACMA,EACJ0P,QAASjX,GACTyN,YAAaA,GACbiL,OAAS1b,GAAS,SAAWA,IAC7B2b,SAAO,IAKE7E,sBAAK+E,ICdb,MAAMpL,GAAc,CAAErD,GAAI,GAE3B0O,GAASvR,GACN,eAAC,GAAD,IAAiBA,EAAO0P,QAAS/W,GAAMuN,YAAaA,KAG9CqG,sBAAKgF,ICNb,MAAMrL,GAAc,CAAEpD,GAAI,GAAID,GAAI,EAAGD,GAAI,IAE1C4O,GAAmBxR,GAChB,eAAC,GAAD,IAAiBA,EAAO0P,QAAS7W,GAAiBqN,YAAaA,KAGzDqG,sBAAKiF,ICIpB,MAAMzL,GAAYC,aAAYC,IAAD,CAC3B2J,MAAO,CACLzF,QAASlE,EAAMzD,QAAQ,GACvBiM,OAAQ,QAEVgD,WAAY,CAIV,CAACxL,EAAMC,YAAYhI,GAAG,OAAQwT,GAAc,EAAG,EAAG,QAIhDA,GAAgB,IAAInU,KACxB,IAAIoU,EAAwB,CAAE,QAAS,CAAEC,MAAO,MAIhD,OAHArU,EAASxJ,SAAQ,CAAC8d,EAAOlhB,KACvBghB,EAAQ,kBAAiBhhB,EAAI,MAAQ,CAAEihB,MAAOC,MAEzCF,GAUIG,GAAgB9R,IAC3B,MAAMhN,EAAU+S,MACV,QAAE7D,EAAF,OAAWoH,EAAX,SAAmB/L,GAAayC,EAEtC,OAEE,eADA,CACCsC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGgF,UAAWxU,EAAQye,WAA/C,UACE,gBAACM,GAAD,CAAsBzI,OAAQA,EAAQpH,QAASA,EAA/C,UACE,eAAC8P,GAAD,CACEhG,KAAK,OACLrF,OAAO,yBACPrK,OAAO,6HAHT,SAKE,eAAC,GAAD,MAEF,eAAC0V,GAAD,CAAMhG,KAAK,OAAX,SACE,eAAC,GAAD,MAEF,eAACgG,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,QAAzB,SACE,eAAC,GAAD,SAGJ,eAACoL,GAAD,CAAsBzI,OAAQA,EAAQpH,QAASA,EAA/C,SACG3E,QAWHwU,GAAwB/R,IAC5B,MAAM,QAAEkC,EAAF,OAAWoH,EAAX,SAAmB/L,GAAayC,EACtC,OACE,qCACGiS,IAAMC,SAASzhB,IACd8M,GACCsU,GAAUA,GAASI,IAAME,aAAaN,EAAO,CAAEvI,SAAQpH,iBAM1DkQ,GAAkBpS,IAA8C,IAAD,EACnE,MAAM,QAAEkC,EAAF,KAAWnN,GAASiL,EAEpBtE,EAA+B,GACjC3G,EAAKwG,cACPG,EAASnB,KACP,eAACyX,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,6BAAzB,SACE,eAAC,GAAD,OAIN,MAAMlR,EAAM,IAAIV,EAAKS,SACrB,UAAAT,EAAK2G,gBAAL,SAAe3H,SAAQ,EAAGyB,UAASF,UAASpC,WAC1CsC,EAAQzB,SAAQ,EAAG0B,IAAK4c,KAAQ5c,EAAI8E,KAAK8X,KACzC,MAAM9b,EAAOf,EAAQ/E,KAAI,EAAGgF,MAAKC,kBAAR,CACvBD,MACAmD,IAAKnD,EACLC,kBAGI8Y,EAAQxE,GAAW1U,GAEzBoG,EAASnB,KACP,eAACyX,GAAD,CAAMhG,KAAK,OAAOrF,OAAQzT,EAA1B,SACE,eAAC,GAAD,CAAawc,QAASnZ,EAAM2P,YAAa,CAAEtD,GAAI4L,MADZtb,OAKzC,MAAMoW,EAASD,GAAW5T,GAC1B,OAAO,eAACqc,GAAD,CAAc5P,QAASA,EAASoH,OAAQA,EAAQ/L,SAAU7B,KAO7D/F,GAAYqK,IAChB,MAAM,QAAEkC,EAAF,OAAWoH,EAAX,KAAmBvU,GAASiL,EAClC,OAAIjL,GAAQA,EAAKS,QAAQnE,OAAS,EACzB,eAAC+gB,GAAD,CAAgBlQ,QAASA,EAASnN,KAAMA,IAK/C,eADA,CACC+c,GAAD,CAAc5P,QAASA,EAASoH,OAAQA,EAAxC,UACE,eAAC0I,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,aAAzB,SACE,eAAC,GAAD,MAGF,eAACqL,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,kBAAzB,SACE,eAAC,GAAD,MAGF,eAACqL,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,6BAAzB,SACE,eAAC,GAAD,UAMF2L,GAAQ,CACZC,UAAM3N,EACN4N,KAAM,EACNC,KAAM,EACNC,KAAM,GASKV,GAAO,EAAGrL,SAAQrK,SAAQiB,WAAUyO,OAAM1C,SAAQpH,cAC7D,MAAMlP,EAAU+S,KAEV8L,EAAQI,IAAMC,SAASS,KAAKpV,GAClC,OACE,eAAC+E,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIE,GAAIkJ,GAAQsG,GAAMtG,GAArC,SACE,gBAAC4G,GAAA,EAAD,CAAOpL,UAAWxU,EAAQ4c,MAA1B,UACGjJ,GACC,eAAC3D,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,SACGyD,IAGJsL,IAAME,aAAaN,EAAO,CAAEvI,SAAQpH,YACpC5F,GACC,eAAC0G,GAAA,EAAD,CAAYhB,QAAQ,UAAU4J,MAAM,SAAS3I,UAAU,IAAvD,SACG3G,UAQEiQ,sBAAK5W,IC/KpB,MAAMoQ,GAAYC,aAAYC,IAAD,CAC3B4M,OAAQ,CACNC,cAAe,OACfrD,OAAQ,GACR5H,SAAU,SACVmH,IAAM,GAAE/I,EAAMzD,SAAS,OACvBuQ,aAAe,GAAE9M,EAAMzD,QAA+B,SAAvByD,EAAM0D,QAAQxN,KAAkB,EAAI,QAErE7C,MAAO,CACLwZ,cAAe,OACftI,gBACyB,SAAvBvE,EAAM0D,QAAQxN,KACV8J,EAAM0D,QAAQgG,WAAWqD,QACzB/M,EAAM0D,QAAQgG,WAAWC,MAC/BL,aAAc,WAkCH0D,OAxBIjT,IACjB,MAAMiG,EAAQiN,eACRlgB,EAAU+S,MAEV,eAAEX,EAAF,OAAkBkE,EAAlB,KAA0BvU,KAAS2T,GAAe1I,EAGlDmT,EAAmC,SAAvBlN,EAAM0D,QAAQxN,KAAkB,EAAI,EAEtD,OACE,iCACE,eAACoU,GAAA,EAAD,CAAK6C,SAAU,EAAG5L,UAAWxU,EAAQ6f,OAArC,SACE,eAACvQ,GAAA,EAAD,CAAMC,WAAS,EAACE,WAAW,SAASC,QAAQ,SAASF,QAAS,EAA9D,SACE,eAACF,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAACE,GAAI,EAAGG,UAAW2P,KAAOO,UAAWA,EAAW3L,UAAWxU,EAAQsG,MAAhF,SACE,eAAC,GAAD,IAAcoP,UAKpB,eAAC,GAAD,CAAUxG,QAASkD,EAAgBkE,OAAQA,EAAQvU,KAAMA,QC/CxD,IAAK+L,I,SAAAA,O,iBAAAA,I,yBAAAA,I,yBAAAA,I,6BAAAA,I,+BAAAA,I,4BAAAA,Q,KAkCZ,MAAMrC,GAAS3D,IACN,CACLA,OACA3E,QAAS,EACTwQ,OAAQ,GACR9V,OAAO,EACPwiB,QAAS,IAIPrP,GAAU,CAACC,EAAczF,KAC7B,OAAQA,EAAOrC,MACb,KAAK2E,GAAGwS,UACN,OAAO1c,OAAO2c,GAAG/U,EAAOpE,MAAO6J,EAAMnJ,MAAQmJ,EAAQxF,GAAMD,EAAOpE,OACpE,KAAK0G,GAAG0S,MACN,OAAO/U,GAAMD,EAAOpE,OACtB,KAAK0G,GAAG2S,UACN,MAAO,IAAKxP,EAAO0C,OAAQnI,EAAOpE,OACpC,KAAK0G,GAAG4S,YACN,MAAO,IACFzP,EACH9N,QAAS8N,EAAM9N,QAAU,EACzBwQ,OAAQ1C,EAAM0C,OAASnI,EAAOpE,MAC9BiZ,QAAS,GAEb,KAAKvS,GAAG6S,WACN,OAAO1P,EAAMpT,MAAQ,IAAKoT,EAAOpT,OAAO,GAAUoT,EACpD,KAAKnD,GAAG8S,aACN,MAAM,QAAEP,GAAYpP,GACd,KAAEjJ,GAASiJ,EAAMnJ,KAAKzD,SAAS4M,EAAM9N,SAErC0d,EAAeR,GAnEE,GAmEiCrY,EAAOA,EAAOwD,EAAOpE,MAC7E,MAAO,IAAK6J,EAAOpT,OAAO,EAAMgjB,eAAcR,QAASA,EAAU,KC7DjEtN,GAAYC,aAAYC,IAAD,CAC3B5M,QAAS,CACP4I,MAA8B,SAAvBgE,EAAM0D,QAAQxN,KAAkB8J,EAAM0D,QAAQmK,QAAQC,KAAO9N,EAAM0D,QAAQmK,QAAQE,UA0E/EC,OAhEIjU,IACjB,MAAMhN,EAAU+S,KACV9F,EAAQH,MAER,KAAEhF,EAAMkG,SAAUgG,EAAlB,KAAgCjS,GAASiL,GACzC,eAAEoF,EAAF,aAAkBE,EAAlB,WAAgCD,EAAhC,SAA4CnG,EAA5C,MAAsD9E,EAAtD,IAA6D+J,GAAQc,MACpEhB,EAAOiB,GD+CapK,IACpBqK,qBAAWnB,GAASlJ,EAAM2D,IChDPyV,CAAapZ,GAEvC4E,qBAAU,IAAMwF,EAAS,CAAE/I,KAAM2E,GAAGwS,UAAWlZ,MAAOU,KAAS,CAACA,EAAMoK,IACtExF,qBAAU,IAAMwF,EAAS,CAAE/I,KAAM2E,GAAG6S,cAAe,CAACvZ,EAAO8K,IAE3D,MAAMiP,EAAc3U,uBACjB4U,IAEC,GAAInU,GAA0B,YAAjBmU,EAIX,OAHAlV,EAAS,IACTgG,EAAS,CAAE/I,KAAM2E,GAAG2S,UAAWrZ,MAAOga,SACtCpN,IAMF,MAAM7Q,EAAU2E,EAAKzD,SAAS4M,EAAM9N,SAC9BhB,EAAQgE,GAAaib,EAAcje,GACrChB,EAAMkE,SACR6L,EAAS,CAAE/I,KAAM2E,GAAG4S,YAAatZ,MAAOga,IACxClV,EAAS,IACL/I,EAAQiF,OACV4L,KAIF9B,EAAS,CAAE/I,KAAM2E,GAAG8S,aAAcxZ,MAAOjF,EAAMxD,YAGnD,CAACmJ,EAAMmJ,EAAM9N,QAAS+I,EAAU8H,EAAc/G,EAAOiF,KAGjD,OAAEyB,EAAF,MAAU9V,EAAV,aAAiBgjB,GAAiB5P,EAElCoQ,EAAc5K,mBAClB,IAAM9C,GAAU,uBAAMa,UAAWxU,EAAQqG,QAAzB,SAAmCsN,KACnD,CAACA,EAAQ3T,EAAQqG,UAGnB,OACE,eAAC,GAAD,CACEmN,YAAc,eAAc1L,EAAK5D,WACjCkD,MAAOA,EACPsM,SAAUpB,EACVmB,OAAQpB,EACR/D,SAAU6C,EACVyC,QAASuN,EACTxN,OAAQ0N,EACRxjB,MAAOA,EACPiW,SAAU+M,EACV9M,cAAc,WACd3B,eAAgBA,EAChBrQ,KAAMA,KC/BGuf,OAnCQtU,IACrB,MAAM,QAAEuU,EAAF,KAAWnT,EAAX,MAAiBvO,EAAjB,KAAwBE,GAASiN,EAUvC,OACE,gBAACwU,GAAA,EAAD,CACEC,sBAAoB,EACpBC,sBAAoB,EACpBC,SAAS,KACTC,kBAAgB,4BAChBxT,KAAMA,EALR,UAOE,eAACyT,GAAA,EAAD,CAAarM,GAAG,4BAAhB,SAA6C3V,IAC7C,eAACiiB,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,UAAoBhiB,MAEtB,gBAACiiB,GAAA,EAAD,WACE,eAACjT,GAAA,EAAD,CAAQkT,WAAS,EAAC/S,QArBH,KACnBqS,GAAQ,IAoBqCtS,MAAM,UAA/C,oBAGA,eAACF,GAAA,EAAD,CAAQG,QApBG,KACfqS,GAAQ,IAmBuBtS,MAAM,UAAjC,uB,qBCvCD,MAuDDiT,GAAclV,IAClB,MAAM,KAAEpE,EAAF,QAAQQ,GAAY4D,EACpBmV,EAzDoB,EAACvZ,EAAeQ,KAC1C,MAAMgZ,EAAmBnW,kBAAO,GAEhC,OAAOwK,mBAAQ,KACb2L,EAAiBzV,SAAU,EAE3B,MAAM0V,EAAY,MAChB,GAAIzZ,EAAM,CACR,MAAM0Z,EAAW,IAAI/lB,IAAIqM,EAAMQ,GAASmZ,WAExC,OADgB,IAAIC,MAAMF,KAHZ,GAQlB,GAAKD,EAEL,MAAO,KACL,IACOA,EAAUI,SACbJ,EAAUK,YAAc,GAOtBN,EAAiBzV,SACnB1L,QAAQ0hB,KAAK,gDACbN,EAAUO,QAEVhX,YAAW,KACLyW,EAAUQ,UACZ5hB,QAAQ6hB,IAAI,yDACZV,EAAiBzV,SAAU,EAC3B0V,EAAUO,OACVP,EAAUU,UAEX,IAGLV,EAAUU,OAAOC,OAAOtX,IACtBzK,QAAQpD,MAAM,CAAEc,QAAS,qBAAsBskB,IAAKZ,EAAUY,IAAKxkB,IAAKiN,OAE1E,MAAOA,GACPzK,QAAQpD,MAAM,CAAEc,QAAS,qBAAsBskB,IAAKZ,EAAUY,IAAKxkB,IAAKiN,QAG3E,CAAC9C,EAAMQ,KAUQ8Z,CAAata,EAAMQ,GAI/BiO,GAAY8K,EAElB,OACE,eAAChS,GAAA,EAAD,CAAStQ,MAAOwX,EAAW,wBAA0B,GAArD,SACE,+BACE,eAACtI,GAAA,EAAD,CACElP,MAAM,aACNmP,QAAQ,YACRC,MAAM,YACNE,UAAW,eAAC,KAAD,IACXD,QAASiT,EACT9K,SAAUA,EANZ,uBAeOkC,sBAAK2I,I,uCCjFpB,MAAMnP,GAAYC,aAAYC,IAAD,CAC3BkQ,UAAW,CACThQ,SAAU,OACVgE,QAAU,GAAElE,EAAMzD,QAAQ,QAE5B4T,OAAQ,CACNjM,QAASlE,EAAMzD,QAAQ,IAAM,IAC7B,QAAS,CACP2H,QAAS,EACT8G,UAAW,OACX1B,aAAc,QAUd8G,GAAarW,IACjB,MAAMhN,EAAU+S,MACV,MAAEuQ,EAAF,SAAS/Y,GAAayC,EAEtBuW,EAAOD,EAAQ,MAAQ,OACvBE,EAAQF,EAAQtjB,EAAQmjB,UAAYnjB,EAAQojB,OAElD,OACE,eAACxD,GAAA,EAAD,CAAOpL,UAAWgP,EAAOvT,UAAWsT,EAApC,SACGhZ,KAKQgP,sBAAK8J,IC9BpB,MAAMI,GAAc,mBAWdC,GAAWre,IAAD,CAEZ4K,UAAWD,KACXhD,MAAO,CAAEgC,QAAS3J,EAAG4K,UAAW,IAAKC,cAAc,KAOjDyT,GAAe3W,IACnB,MAAM,QAAE5D,EAAF,IAAW6Z,KAAQW,GAAa5W,EAChC6W,EAASza,GAAW6Z,EAAM,IAAI1mB,IAAI0mB,EAAK7Z,GAASmZ,WAAaU,EAEnE,OAAO,yBAASW,EAAUX,IAAKY,KAG3BC,GAAa9W,IACjB,MAAM,KAAEtQ,KAASqnB,GAAS/W,EAC1B,cAAItQ,QAAJ,IAAIA,OAAJ,EAAIA,EAAMyF,MAAMshB,KACP,eAACO,GAAA,EAAD,CAAMtnB,KAAMA,KAAUqnB,IAEtB,eAAC,KAAD,CAASE,GAAIvnB,GAAQ,OAASqnB,KAInCG,GAAelX,GACA,aAAfA,EAAM7D,KACD,eAACgb,GAAA,EAAD,CAAUC,QAASpX,EAAMoX,QAASxT,SAAU5D,EAAM4D,SAAUyG,SAAUrK,EAAM4D,WAE5E,2BAAW5D,IAIhBqX,GAAYrX,IAChB,MAAM,SAAEzC,EAAF,QAAYnB,EAAZ,UAAqBkb,EAArB,UAAgCC,EAAY,SAAYvX,EACxDwX,EAAU,CACdC,uBAAwBH,EACxBI,YAAY,EACZC,UAAW,CACTC,IAAK,CAAE3U,UAAW0T,GAAa3W,MAAO,CAAE5D,YACxCyb,GAAInB,GAAQ,MACZoB,GAAIpB,GAAQ,MACZqB,GAAIrB,GAAQ,MACZsB,GAAItB,GAAQ,MACZuB,GAAIvB,GAAQ,MACZwB,GAAIxB,GAAQ,MACZyB,EAAGzB,GAAQa,GACXa,EAAG,CAAEnV,UAAW6T,IAChBuB,IAAK,CAAEpV,UAAWoT,GAAWrW,MAAO,CAAEsW,OAAO,IAC7CgC,KAAM,CAAErV,UAAWoT,IACnB/c,MAAO,CAAE2J,UAAWiU,MAIxB,OAAO,eAAC,KAAD,CAAI3Z,SAAUA,EAAUia,QAASA,KAG3BjL,ICxCVzL,GDwCUyL,kBAAK8K,K,SCxCfvW,O,yBAAAA,I,yBAAAA,I,yBAAAA,I,2BAAAA,I,+BAAAA,I,mBAAAA,I,0BAAAA,Q,KAkBL,MAAMkD,GAAU,CAACC,EAAczF,KAC7B,MAAM,SAAE+Z,GAAatU,EACrB,OAAQzF,GACN,KAAKsC,GAAG0X,aACN,MAAO,IAAKvU,EAAOwU,WAAW,EAAOF,SAAUA,EAAW,GAC5D,KAAKzX,GAAG4X,OACN,MAAO,IAAKzU,EAAOwU,WAAW,EAAME,UAAWJ,EAAW,GAC5D,KAAKzX,GAAG8X,UAEN,OAAO3U,EACT,KAAKnD,GAAG+X,UACN,MAAO,IAAK5U,EAAO6U,YAAY,GACjC,KAAKhY,GAAGiY,WACN,MAAO,IAAK9U,EAAO6U,YAAY,GACjC,KAAKhY,GAAGkY,UACN,MAAO,IAAK/U,EAAOgV,SAAU5oB,KAAK6oB,SAAS3D,SAAS,KACtD,KAAKzU,GAAGqY,UAEN,MAAO,CACLR,UAAW,EACXJ,SAAU,EACVE,WAAW,EACXK,YAAY,EACZG,SAAU5oB,KAAK6oB,SAAS3D,SAAS,OAKnC6D,GAAc,CAAKlU,EAA6BmU,IACpD7Z,uBAAY,IAAM0F,EAASmU,IAAK,CAACA,EAAInU,IAEjCoU,GAAQtZ,IACZ,MAAM,KAAEuZ,EAAF,QAAQnd,EAAR,UAAiBod,GAAcxZ,GAC/B,MAAEnN,EAAF,MAAS6E,EAAT,aAAgBN,EAAhB,SAA8BO,GAAa4hB,EAE3CE,EAAaD,EAAY,KAAQ,WAAUpd,KAE1Csd,EAASC,GAAc9a,GAAmB4a,EAAY,CAAE3e,KAAM,EAAG5H,KAAM,OAEvE,SAAEqlB,EAAF,UAAYI,EAAZ,UAAuBF,EAAvB,WAAkCK,KAAe/B,GAAQ7R,GAAYC,qBAAWnB,GAAS,CAC9F2U,UAAWe,EAAQ5e,KACnByd,SAAUmB,EAAQ5e,KAClB2d,WAAW,EACXK,YAAY,EACZG,SAAU,cAGLW,EAAUC,GAAe1a,mBAA6B,MAEvDc,EAAQH,KACRga,EAAWvB,EAAW7gB,EAAMrG,OAE5ByJ,EAAOgf,EAAWpiB,EAAM6gB,GAAY7gB,EAAMA,EAAMrG,OAAS,GAEzD2V,EAAeoS,GAAYlU,EAAUpE,GAAG4X,QACxCqB,EAAeX,GAAYlU,EAAUpE,GAAG0X,cACxCwB,EAAkBZ,GAAYlU,EAAUpE,GAAG8X,WAC3CqB,EAAYza,uBAAY,KAC5Bqa,EAAY,MACZ3U,EAASpE,GAAGkY,aACX,IACGkB,EAAkB1a,uBAAY,KAClCqa,EAAY,MACZ3U,EAASpE,GAAG+X,aACX,IACGsB,EAAc3a,uBAAaf,IAC/ByG,EAASzG,EAAQqC,GAAGqY,UAAYrY,GAAGiY,cAClC,IAWHrZ,qBAAU,KACRlQ,OAAO4qB,OAAO,CAAEpL,IAAK,EAAGqL,SAAU,WAClCV,GAAYtH,IAGH,CAAEnf,KADkB,IAAdylB,EAAkB,GAAKtG,EAAEnf,KACvB4H,KAAM6d,QAEtB,CAACA,EAAWgB,IAEf,MAAM1Y,EACJ,uCACE,eAACmG,GAAA,EAAD,CACEkT,gBAAc,cACdC,gBAAc,OACdrY,QAvBmBsY,IACvBX,EAAYW,EAAMC,gBAuBd5nB,MAAM,eAJR,SAME,eAAC,KAAD,MAEF,gBAAC6nB,GAAA,EAAD,CACElS,GAAG,cACHoR,SAAUA,EACVe,aAAW,EACXvZ,OAAQwY,EACR5R,oBAAqBC,KACrBsM,QA9BkB,KACtBsF,EAAY,OA8BRe,cAAe,CAAEC,UAAW,eAACC,GAAA,EAAD,uBAP9B,UASE,eAACC,GAAA,EAAD,CAAU7Y,QAASgY,EAAnB,8BACA,eAACa,GAAA,EAAD,CAAU7Y,QAAS+X,EAAnB,uCAKAe,EAAmBlgB,EAAK1D,cAC5B,eAACkL,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAASF,QAAS,EAA1C,SACE,eAACF,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAACE,GAAI,EAAlB,SACE,eAAC,GAAD,CAAUvF,SAAUzC,EAAK1D,mBAK/B,OACE,iCACE,eAAC4L,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAC0I,MAAM,SAA3D,SACG/Y,IAGH,gBAACqW,GAAA,EAAD,CAAUC,GAAI2Q,EAAd,UACE,eAACvJ,GAAA,EAAD,CAAK0K,GAAI,EAAT,SACE,eAAC,GAAD,CAAU1d,SAAUnG,GAAgB,GAAIgF,QAASA,MAEnD,gBAACkG,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGE,QAAQ,SAASD,WAAW,SAAxD,UACE,eAACH,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,gBAACK,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAI2I,MAAM,SAA7C,UACGvb,KAAK6qB,IAAI3C,EAAW,EAAG7gB,EAAMrG,QADhC,IAC0CqG,EAAMrG,OADhD,iBACsEyJ,EAAK5D,QAD3E,SAIF,eAACoL,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAAC,GAAD,CAAY/G,KAAMd,EAAK3D,MAAOiF,QAASA,MAEzC,eAACkG,GAAA,EAAD,CAAMK,MAAI,EAAV,SAAY1B,OAGb+Z,EAGD,eAAC,GAAD,CAAWlgB,KAAMA,EAAMkG,SAAUgG,EAAkCjS,KAAM4C,GAArBof,EAAKkC,aAI3D,eAAC/P,GAAA,EAAD,CAAUC,IAAK2Q,EAAUqB,cAAY,EAACC,eAAa,EAAnD,SACE,eAAC,GAAD,CACE5jB,KAAM+hB,EAAK/hB,KACXyI,MAAOA,EACPe,SAAW9N,GAASymB,GAAYtH,IAAD,IAAaA,EAAGnf,KAAMA,MACrDA,KAAMwmB,EAAQxmB,KACd+N,SAAUA,MAId,eAAC,GAAD,CACEoa,KAAM5C,EACN6C,QAASvB,EACTwB,SAAUvB,EACVxb,OAAQma,EAAYjhB,EAAMrG,OAAS,YAAc,WAEnD,eAAC,GAAD,CACE+P,KAAM0X,EACNvE,QAAS4F,EACTtnB,MAAM,mBACNE,KAAK,wEAYPyoB,GAAWjP,gBAAK,SAAkBvM,GACtC,OACE,gBAACwU,GAAA,EAAD,CACEpT,KAAMpB,EAAMqb,KACZ9G,QAASvU,EAAMsb,QACf1G,kBAAgB,qBAChB6G,mBAAiB,2BACjBF,SAAUvb,EAAMub,SALlB,UAOE,eAAC1G,GAAA,EAAD,CAAarM,GAAG,qBAAhB,0CACA,eAACsM,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAmBvM,GAAG,2BAAtB,+DAIF,eAACwM,GAAA,EAAD,UACE,eAACjT,GAAA,EAAD,CACEG,QAASlC,EAAMsb,QACftZ,QAAQ,YACRC,MAAM,UACNoI,UAAWrK,EAAMqb,KACjBpG,WAAS,EACTyG,oBAAkB,EANpB,SAQG1b,EAAMxB,iBAOF+N,sBAAK+M,I,UCrQpB,MAAMvT,GAAYC,aAAYC,IAAD,CAC3B0V,SAAU,CACRxV,SAAUF,EAAM2V,WAAW1D,GAAG/R,SAC9B4C,WAAY,KAEd5Y,KAAM,CACJ,YAAa,CACXuf,QAAS,yBAGbnf,UAAW,CACT0R,MAAOgE,EAAM0D,QAAQ9Y,MAAMkjB,UA0DhBH,OAhDO5T,IACpB,MAAMhN,EAAU+S,MAEV,cAAE8V,EAAF,MAAiBhrB,EAAjB,QAAwBb,EAAU,GAAMgQ,EAI9C,GAFA/L,QAAQpD,MAAMA,IpCmBeirB,EoCjBVjrB,apCkBClB,GAAY,YAAamsB,EoClBlB,CACzB,MAAMC,EAAQlrB,EAAMb,QAAQA,GAC5B,OACE,iCACE,eAACgT,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,SACGrS,EAAMgB,WAET,eAACmR,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,SACGrS,EAAMc,UAET,eAAC,GAAD,CAAW2kB,OAAK,EAAC/Y,SAAU1M,EAAMc,UACjC,eAAC,GAAD,CAAW2kB,OAAK,EAAhB,SACE,uBAAM9O,UAAWxU,EAAQ2oB,SAAzB,SACGI,EAAMtrB,KAAI,EAAGG,MAAKF,WAAUG,WAC3B,wBACE2W,UAAWqE,aAAK7Y,EAAQ7C,KAAMU,GAASmC,EAAQzC,WAE/CyrB,YAAWprB,EAAI2kB,WAAW0G,SAAS,EAAG,KAHxC,UAKGvrB,EACA,OAJIE,YAYjB,OACE,uCACE,eAACoS,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,SACG2Y,IAEH,eAAC7Y,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,SACGrS,EAAMc,apCjBcmqB,OqC1C/B,MAAMI,GAAYxf,UAChB,IAAKyf,EAGH,YADAloB,QAAQ6hB,IAAI,cAId,MAAMnZ,QAAYC,MAAMuf,GAAanG,OAAOnlB,IAC1C,MAAIA,aAAiBurB,WACnBnoB,QAAQpD,MAAMA,GACR,IAAIyB,EACP,sEACDzB,EAAMc,UAGFd,KAIV,GAAmB,MAAf8L,EAAI0f,OACN,MAAM,IAAI/pB,EAAe,GAAEqK,EAAI2f,4CAGjC,MAAMvpB,QAAa4J,EAAIG,OAEvB,OAAOnC,GAAU5H,IAQbwpB,GAAS,EAAGhf,WAAU1M,WAC1B,gBAACmS,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAC0I,MAAM,SAA1D,UACG/a,GAAS,UACT0M,KAuCUif,OA5BGxc,IAChB,MAAM,YAAEmc,GAAgBnc,EAClBuZ,EAAO9b,YAASye,GAAW,CAACC,IAC5B/f,EAAU,IAAI7M,IAAI4sB,EAAa7sB,KAAeimB,WAEpD,OAAIgE,EAAK7e,OACA,eAAC,GAAD,CAAM6e,KAAMA,EAAK7e,OAAQ0B,QAASA,IAChCmd,EAAK/b,QAEZ,eAACyK,GAAA,EAAD,CACEkB,IAAE,EACFL,MAAO,CACL2T,gBAAiB,SAEnBrB,eAAa,EALf,SAOE,eAACpY,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAK2I,MAAM,SAA9C,SACE,eAAC8Q,GAAA,EAAD,QAIGnD,EAAK1oB,MACP,eAAC,GAAD,CAAcA,MAAO0oB,EAAK1oB,MAAOb,QAAS,EAAG6rB,cAAc,0BAE3D,eAACU,GAAD,CAAQ1rB,OAAK,EAAC0M,SAAS,0B,kBC/E3B,MAIMof,GAAUjc,SAKVkc,GAAelc,kBCMfmc,GAAkB,KAC7B,MAAMptB,EAAWqtB,cAEXC,EADS,IAAIC,gBAAgBvtB,EAASwtB,QACtB7nB,IAAI,UAE1B,GAAI2nB,EAAQ,CACV,MAAMvpB,EAAM0pB,aAAOH,GACbhZ,EAASvQ,EAAIiD,SAAS,OAASjD,EAAO,WAAUA,IAEtD,OAAO,eAAC,GAAD,CAAU2oB,YAAapY,IAE9B,OAAO,eAACoZ,GAAD,KAILA,GAAgB,KACpB,MAAO3pB,EAAK4pB,GAAUje,mBAAS,IACzBke,EAAS,IAAIL,gBAAgB,CAAED,OAAQO,aAAO9pB,GAAK,KAAS+hB,WAE5DgI,EAAO,IAAIhuB,IAAIC,OAAOC,SAASC,MAEnC6tB,EAAKC,SAAWZ,GAElB,MAAMa,EAAa,GAAEF,KAAQF,IAE7B,OACE,gBAAC/a,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGC,WAAW,SAASC,QAAQ,SAAxD,UACE,gBAACJ,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAIC,IAAE,EAACC,GAAI,EAA1B,UACE,eAACE,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAnD,iDAGA,eAACO,GAAA,EAAD,CACEC,MAAM,WACN1B,QAAQ,SACR6B,WAAS,EACTC,SAAWpF,GAAM0e,EAAO1e,EAAEqF,OAAO3J,OACjCA,MAAO5G,EACPmQ,WAAY,CACVqF,aACE,eAACtB,GAAA,EAAD,CAAgBG,SAAS,MAAzB,SACE,eAAC9F,GAAA,EAAD,CACEE,MAAM,UACND,QAAQ,YACRiB,UAAW+T,KACXC,GAAI,CAAEgG,OAAQI,GAJhB,yBAaV,eAAC/a,GAAA,EAAD,CAAMK,MAAI,EAACC,GAAI,GAAf,SACE,eAACI,GAAA,EAAD,CAAYhB,QAAQ,QAAQ4J,MAAM,SAAlC,SACG6R,UAOIC,OAnEG,KAChB,MAAM,MAAElH,EAAF,WAASmH,GAAeC,cAC9B,OAAO,eAAC,GAAD,CAAUzB,YAAahtB,EAAQqnB,EAAQ,GAAEmH,aCElD,MAAME,GAAW,CAACxuB,EAAcuM,IAAkB,GAAEvM,KAAQuM,EAAK1G,QAAQ,QAAS,MAkDnE4oB,OAhDG9d,IAChB,MAAM,MAAElE,EAAF,KAASzM,GAAS2Q,EAExB,OAAqB,IAAjBlE,EAAMzK,OACD,eAAC2R,GAAA,EAAD,6BAGL,eAACV,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACG1G,EAAMrL,KACL,CAAC8oB,EAAgB5oB,KACd4oB,EAAKpmB,QACJ,eAACmP,GAAA,EAAD,CAAMK,MAAI,EAAuBI,GAAI,EAAGH,GAAI,GAA5C,SACE,gBAAC2N,GAAA,EAAD,CACEtN,UAAW2P,KACXuF,EAAG,EACH1J,OAAO,OACPvX,QAAQ,OACR6mB,aAAa,gBACbtb,WAAW,aACXub,SAAS,OAPX,UASE,gBAACzN,GAAA,EAAD,WACE,eAACvN,GAAA,EAAD,CAAYf,MAAM,UAAUiB,cAAY,EAAxC,SACGqW,EAAKrmB,OAER,eAAC8P,GAAA,EAAD,CAAYhB,QAAQ,QAAQkB,cAAY,EAAxC,SACGqW,EAAK7jB,iBAGV,eAAC6a,GAAA,EAAD,CAAKrZ,QAAQ,OAAO4Z,eAAe,WAAWrO,WAAW,WAAW+L,MAAM,OAA1E,SACE,eAACzM,GAAA,EAAD,CACEkB,UAAW+T,KACX/U,MAAM,YACND,QAAQ,YACRiV,GAAI4G,GAASxuB,EAAMkqB,EAAK3d,MAJ1B,gCAnBW,YAAWjL,UCV1C,MAAMstB,GAAkBvhB,UACtB,IAAKwhB,EAGH,YADAjqB,QAAQ6hB,IAAI,eAGd,MAAMtiB,EAAMrE,EAAQ+uB,E1CfG,c0CiBjBvhB,QAAYC,MAAMpJ,GAAKwiB,OAAOnlB,IAClC,MAAIA,aAAiBurB,WACnBnoB,QAAQpD,MAAMA,GACR,IAAIyB,EACP,sEACDzB,EAAMc,UAGFd,KAIV,GAAmB,MAAf8L,EAAI0f,OACN,MAAM,IAAI/pB,EAAe,GAAEqK,EAAI2f,4CAGjC,MAAMvpB,QAAa4J,EAAIG,OAEvB,OCvC8DrJ,EDuCzCV,ECvCyD8I,KD+C1E0gB,GAAS,EAAGhqB,MAAK1B,WACrB,gBAACmS,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAC0I,MAAM,SAA3D,UACG/a,GAAS,UACT0B,KA6DU4rB,OA1DIne,IAAkB,IAAD,IAClC,MAAMke,EAAUle,EAAM7K,MAAMkoB,OAAO7G,MAE7BzZ,EAAWE,KACXuZ,EAAK,OAAGzZ,QAAH,IAAGA,GAAH,UAAGA,EAAUrC,cAAb,iBAAG,EAAkB1H,eAArB,aAAG,EAA2ByG,MAAK,EAAGrK,YAAa8uB,IAAY9uB,IAEpEgvB,EAAa3gB,YAASwgB,GAAiB,CAACC,IAW9C,GAAIE,EAAW1jB,OAAQ,CACrB,MAAM,MAAE7H,EAAF,YAAS6C,EAAT,MAAsBoG,GAAUsiB,EAAW1jB,OACjD,OACE,iCACE,iCACE,eAACsI,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAC0I,MAAM,SAA3D,SACG/Y,IAEH,eAACmQ,GAAA,EAAD,CAAYhB,QAAQ,YAAYkB,cAAY,EAAC0I,MAAM,SAAnD,SACGlW,OAGL,eAACsN,GAAA,EAAD,CAAYhB,QAAQ,KAAKkB,cAAY,EAArC,0BAGA,eAAC,GAAD,CAAUpH,MAAOA,EAAOzM,KAAM2Q,EAAMvQ,SAAS4uB,cAG5C,OAAID,EAAW5gB,SAAWgZ,EAE7B,+BACE,gBAACxT,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAC0I,MAAM,SAA3D,qBACW4K,EAAMtjB,KADjB,WAKK6J,EAASS,SAAW4gB,EAAW5gB,QAEtC,eAACwF,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAC0I,MAAM,SAA3D,wBAIOwS,EAAWvtB,MAElB,eAAC,GAAD,CAAcA,MAAOutB,EAAWvtB,MAAOb,QAAS,EAAG6rB,cAAc,yBAG5D,eAAC,GAAD,CAAQhrB,OAAK,EAAC0B,IAAI,0BElFd+rB,OA1BE,KACf,MAAM,OAAE5jB,EAAF,QAAU8C,GAAYP,KAE5B,GAAIvC,EAAQ,CACV,MAAM,MAAE7H,EAAF,KAASE,GAAS2H,EAAO9H,SAC/B,OACE,gBAAC2d,GAAA,EAAD,CAAK6C,SAAU,EAAf,UACE,eAACpQ,GAAA,EAAD,CAAY4I,MAAM,SAAS5J,QAAQ,KAAKiB,UAAU,KAAKC,cAAY,EAAnE,SACGrQ,IAEH,eAACyP,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAAxB,SACE,eAACJ,GAAA,EAAD,CAAMK,MAAI,EAACC,IAAE,EAACE,GAAI,GAAIC,GAAI,EAA1B,SACE,eAAC,GAAD,CAAUxF,SAAUxK,EAAMwkB,UAAU,cAM5C,OACE,eAACvU,GAAA,EAAD,CAAYhB,QAAQ,KAAK4J,MAAM,SAA/B,SACGpO,EAAU,UAAY,W,SCrB/B,MAAM+gB,GAAWC,gBAAK,IAAM,gCAUbC,OANKze,GAClB,eAAC,WAAD,CAAU0e,SAAU,KAApB,SACE,eAACH,GAAD,CAAUppB,MAAO6K,EAAM7K,U,8BCJ3B,MAAMwpB,GAAajiB,UACjB,IAAKkiB,EAAS,OACd3qB,QAAQgM,MAAM,oBAAqB2e,GAEnC,MAAMC,QAAYjiB,MAAMgiB,GAExB,GAAmB,MAAfC,EAAIxC,QAA8B,MAAZwC,EAAI9rB,KAC5B,MAAM,IAAInD,MAAM,2BAMlB,aAFwBkvB,aAAYD,EAAI9rB,OAUpCgsB,GAAqBriB,MACzBhM,IAEA,IAAKA,EAAU,OACfuD,QAAQgM,MAAM,0BAEd,MAAMjQ,EAAU,IAAIgvB,aAAa,CAAEC,YAAa,gBAC1CC,EAAWtoB,OAAO7B,KAAKrE,GAAUD,KAAIiM,SAElC,CAACyiB,QADWnvB,EAAQovB,gBAAgBC,GAAW3uB,EAASyuB,QAG3DG,EAAU,IAAI5qB,UAA+B6qB,QAAQC,IAAIN,IAE/D,MAAO,CAAElvB,UAASsvB,YAUdD,GAAcI,GAClBA,EAAOA,OAAOjvB,MAAMivB,EAAOC,WAAYD,EAAOC,WAAaD,EAAOE,YAK9DC,GAAWlhB,GAAWA,EAAEqF,OAAOgS,OAC/ByE,GAAQ,iBA+CDqF,GAAiB,CAACjT,EAAyBxQ,KACtD,MAAQ1B,OAAQolB,EAAUjvB,MAAOkvB,GAAkBtiB,YAASkhB,GAAY,QAAC/R,QAAD,IAACA,OAAD,EAACA,EAAQvQ,YAC3E,OAAE3B,EAAQ7J,MAAOmvB,GAAgBviB,YAASshB,GAAoB,CAACe,IAC/DzS,EAASpO,iBAAqC,MAC9C9H,EAAQ8H,iBAAgC,MAG1C8gB,GAAe9rB,QAAQpD,MAAMkvB,GAC7BC,GAAa/rB,QAAQpD,MAAMmvB,GAE/B,MAAMC,EAAOzgB,uBAAY,KAvDR0gB,KAAsB,IAAD,IACtC,UAAAA,EAAIvgB,eAAJ,SAAawgB,QACb,UAAAD,EAAIvgB,eAAJ,SAAac,oBAAoB+Z,GAAOoF,IACxCM,EAAIvgB,QAAU,MAqDZygB,CAAUjpB,GAlDMsoB,KAA0B,IAAD,IAC3C,UAAAA,EAAO9f,eAAP,SAAgBsgB,KAAK,GACrB,UAAAR,EAAO9f,eAAP,SAAgB0gB,aAChBZ,EAAO9f,QAAU,MAgDf2gB,CAAWjT,KACV,IAkBH,MAAO,CAAE0I,KAhBIvW,uBACV5G,IACCqnB,IACA,MAAMM,EAAQ3T,EAAOpX,QAAQJ,IAAIwD,GACjC,QAAK2nB,IAKF7lB,GAzDU,EAAC2S,EAAsB3S,EAAuB/D,KAC/D,MAAM,QAAE3G,EAAF,QAAWsvB,GAAY5kB,EACvB+kB,EAASH,EAAQlqB,IAAIuB,GAC3B,IAAK8oB,EAAQ,OAAO,EAEpBzvB,EAAQwwB,SAER,MAAMruB,EAAOnC,EAAQywB,qBAOrB,OANAtuB,EAAKstB,OAASA,EACdttB,EAAKuuB,QAAQ1wB,EAAQ2wB,aACrBxuB,EAAK/B,MAAM,GAEXid,EAAO1N,QAAUxN,GAEV,GA2CUyuB,CAAWvT,EAAQ3S,EAAQ6lB,EAAMppB,QAxC/B,EAACA,EAAoB8e,KACxC,MAAMjf,EAAO,IAAIwe,MAAMS,GAKvB,OAJA9e,EAAMwI,QAAU3I,EAEhBA,EAAKwJ,iBAAiBga,GAAOoF,KAEtB,GAmCDiB,CAAa1pB,EAAO,IAAI5H,IAAIgxB,EAAMppB,MAAOiF,GAASmZ,eAGtD,CAAC0K,EAAMrT,EAAOpX,QAASkF,EAAQ0B,IAGlB6jB,SCtCXa,GAAc,EAAGP,QAAOnkB,UAAS2kB,WAEnC,gBAACvM,GAAA,EAAD,CACEpT,OAAQmf,EACRhM,QAASwM,EACTnM,kBAAgB,qBAChB6G,mBAAiB,2BAJnB,UAME,gBAAC5G,GAAA,EAAD,CAAarM,GAAG,qBAAhB,0BAA4C+X,QAA5C,IAA4CA,OAA5C,EAA4CA,EAAO9qB,IAAnD,OACA,eAACqf,GAAA,EAAD,UACGyL,GACC,wBACEtf,UAAQ,EACR+f,UAAQ,EACRlY,MAAO,CAAE0F,MAAO,QAChByH,IAAK,IAAI1mB,IAAIgxB,EAAMvkB,QAAN,OAAeukB,QAAf,IAAeA,OAAf,EAAeA,EAAOppB,OAAOiF,GAASmZ,kBAQhD0L,OAtGA,EAAGrU,SAAQxQ,UAASJ,YACjC,MAAM,KAAE+Z,GAAS8J,GAAejT,EAAQxQ,IACjCmkB,EAAOW,GAAY/hB,qBAEpBgiB,EAAY3hB,uBACf7I,GACQiW,EAAOpX,QAAQ+T,IAAI5S,IAE5B,CAACiW,IAGGwU,EAAY5hB,uBACf/D,IACKO,EACFklB,EAAStU,EAAOpX,QAAQJ,IAAIqG,IAE5Bsa,EAAKta,KAGT,CAACsa,EAAMnJ,EAAOpX,QAASwG,IAGnBN,EAAW+N,mBAAQ,KAAO,IAAD,EAC7B,MAAM/N,EAAW,CACf,eAACsW,GAAD,CAAMhG,KAAK,OAAOrF,OAAO,6BAAzB,SACE,eAAC,GAAD,KADwD,iBAqB5D,OAhBM,OAANiG,QAAM,IAANA,GAAA,UAAAA,EAAQlR,gBAAR,SAAkB3H,SAAQ,EAAGb,OAAMsC,UAASF,cAC1C,MAAMiB,EAAiBf,EAAQ/E,KAAI,EAAGgF,MAAKC,kBAAR,CACjCD,MACAmD,IAAKnD,EACLC,kBAGI8Y,EAAQxE,GAAW1U,GAEzBoG,EAASnB,KACP,eAACyX,GAAD,CAAMhG,KAAK,OAAOrF,OAAQzT,EAA1B,SACE,eAAC,GAAD,CAAawc,QAASnZ,EAAM2P,YAAa,CAAEtD,GAAI4L,MADZtb,OAMlCwI,IACN,CAACkR,EAAOlR,WAEX,OACE,iCACE,eAAC4G,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGE,QAAQ,SAApC,SACE,eAACJ,GAAA,EAAD,CAAMK,MAAI,EAACG,GAAI,EAAf,SACE,eAACE,GAAA,EAAD,CAAYE,cAAY,EAAxB,2HAMHlH,GAAS,eAAC8kB,GAAD,CAAaP,MAAOA,EAAOnkB,QAASA,EAAS2kB,MAAO,IAAMG,OAAStc,KAC7E,eAACkN,GAAD,CAAcxI,OAAQ6X,EAAWjf,QAASkf,EAA1C,SACG1lB,IAGFkR,EAAOtQ,QACN,eAACgG,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAGE,QAAQ,SAApC,SACE,eAACJ,GAAA,EAAD,CAAMK,MAAI,EAACG,GAAI,EAAGF,GAAI,GAAtB,SACE,eAAC,GAAD,CAAUrF,SAAUqP,EAAOtQ,iBCxEvC,MAAM+kB,GAAc3kB,UAClB,IAAK4kB,EAGH,YADArtB,QAAQgM,MAAM,8BAIhB,MAAMtD,QAAYC,MAAM0kB,GAAQtL,OAAOnlB,IACrC,MAAIA,aAAiBurB,UACb,IAAI9pB,EACP,sEACDzB,EAAMc,SAGFd,KAIV,GAAmB,MAAf8L,EAAI0f,OACN,MAAM,IAAI/pB,EAAe,GAAEqK,EAAI2f,4CAKjC,MC9B6B5rB,KAC7B,MACE8E,QAAS+rB,EADL,SAEJllB,EAFI,QAGJD,EAHI,OAIJE,EAJI,mBAKJ1G,GACEnC,EAAM/C,EAAUwL,IAEd1G,EAAU,IAAId,IAEd8sB,EAAYC,GAAoBC,IACpC,MAAM,IAAEjsB,GAAQisB,EAChB,GAAIlsB,EAAQ+T,IAAI9T,GACd,MAAM,IAAI7F,MAAO,uBAAsB6F,KAEvCD,EAAQ0F,IAAIzF,EAAK,IAAKisB,EAAKD,WAQ/B,OAJAF,EAAWxtB,QAAQytB,GAAS,IAEV,OAAlB5rB,QAAkB,IAAlBA,KAAoB7B,SAAS4tB,GAAYA,EAAQnsB,QAAQzB,QAAQytB,GAAS,MAEnE,CAAEhsB,UAAS4G,UAASC,WAAUC,SAAQZ,SAAU9F,IDMhDgsB,OAFYjlB,EAAIG,SAUnByf,GAAS,EAAGhf,WAAU1M,WAC1B,gBAACmS,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,IAAIC,cAAY,EAAC0I,MAAM,SAA1D,UACG/a,GAAS,UACT0M,KA0CUskB,OAnCO,EAAG7lB,YAAoB,IAAD,MAC1C,MAAMe,EAAWE,KACX2P,EAASnP,YAAS4jB,GAAa,WAACtkB,EAASrC,cAAV,iBAAC,EAAiBpH,iBAAlB,aAAC,EAA4BE,MAElE,GAAIuJ,EAASrC,SAAT,UAAmBqC,EAASrC,OAAOpH,iBAAnC,aAAmB,EAA2BC,UAAWqZ,EAAOlS,OAAQ,CAE1E,MAAMonB,EAAiB,IAAIvyB,IACzBqd,EAAOlS,OAAO0B,SAAWW,EAASrC,OAAOpH,UAAUE,IACnDlE,KACAimB,WAEF,OAAO,eAAC,GAAD,CAAQnZ,QAAS0lB,EAAgBlV,OAAQA,EAAOlS,OAAQsB,MAAOA,IACjE,OAAIe,EAASlM,MACX,eAAC,GAAD,CAAcA,MAAOkM,EAASlM,MAAOb,QAAS,EAAG6rB,cAAc,oBAC7DjP,EAAO/b,MACT,eAAC,GAAD,CAAcA,MAAO+b,EAAO/b,MAAOb,QAAS,EAAG6rB,cAAc,2BAC3D9e,EAASS,SAAWoP,EAAOpP,QAElC,eAACyK,GAAA,EAAD,CACEkB,IAAE,EACFL,MAAO,CACL2T,gBAAiB,SAEnBrB,eAAa,EALf,SAOE,eAACpY,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAK2I,MAAM,SAA9C,SACE,eAAC8Q,GAAA,EAAD,QAKC,eAAC,GAAD,CAAQ7rB,OAAK,EAAC0M,SAAS,wCElEnBwkB,OAdC,KACd,MAAM,eAAE3c,EAAF,aAAkBE,EAAlB,WAAgCD,EAAhC,MAA4CjL,EAA5C,IAAmD+J,GAAQc,KAEjE,OACE,eAAC,GAAD,CACE7K,MAAOA,EACPkH,SAAU6C,EACVsC,OAAQpB,EACRqB,SAAUpB,EACVF,eAAgBA,KCSP4c,ICdVC,GDcUD,GAZGhiB,IAChB,MAAMkiB,EAAOjjB,iBAAgBe,EAAMmiB,SAGnC,OAFqBniB,EAAMmiB,SAAWD,EAAKviB,SAGzCuiB,EAAKviB,SAAU,EACR,sBAAKxM,QAAS6M,EAAMmiB,QAApB,SAA8BniB,EAAMzC,YAEpC,sBAAKpK,QAAM,M,SCVjB8uB,K,YAAAA,E,cAAAA,E,eAAAA,Q,KAML,MAAMG,GAAO,CACX,CAAElvB,KAAM,OAAQ7D,KAAM4yB,GAAMjd,MAC5B,CAAE9R,KAAM,QAAS7D,KAAM4yB,GAAMzM,OAC7B,CAAEtiB,KAAM,gBAAiB7D,KAAM4yB,GAAMI,QA4BjCC,GAAU,EAAGC,UACjB,MAAMC,EAAUC,cAMhB,OACE,eAACngB,GAAA,EAAD,CAAMC,WAAS,EAACG,QAAQ,SAASO,UAAWsN,KAAK0K,GAAI,EAArD,SACE,eAAC3Y,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACiQ,GAAA,EAAD,CAAO8P,QAAM,EAAb,SACE,eAACC,GAAA,EAAD,CAAMC,eAAe,UAAUC,UAAU,UAAU/e,SARzC,CAACgf,EAA+BC,KAChDP,EAAQjoB,KAAM,aAAY6nB,GAAKW,GAAU1zB,SAOqC+K,MAAOmoB,EAA/E,SACGH,GAAK3xB,KAAI,EAAGyC,OAAM7D,UACjB,eAAC2zB,GAAA,EAAD,CAAKtf,MAAOxQ,GAAW7D,cAStB4zB,OA/CK,KAAO,IAAD,EACxB,MAAM,KAAEC,GAAStF,eACTljB,OAAQqC,GAAaE,KAEvBslB,EAAMW,EAAOd,GAAKnxB,WAAU,EAAG5B,UAAWA,IAAS6zB,IAAQ,EACjE,GAAIX,EAAM,EAAG,OAAO,eAACY,GAAA,EAAD,IACpB,MAAM,KAAE9zB,GAAS+yB,GAAKG,GAEtB,OACE,iCACE,eAACvf,GAAA,EAAD,CAAYhB,QAAQ,KAAKiB,UAAU,KAAK2I,MAAM,SAA9C,oCAGS,OAAR7O,QAAQ,IAARA,GAAA,UAAAA,EAAUzJ,iBAAV,eAAqBC,UAAW,eAAC+uB,GAAD,CAASC,IAAKA,IAE/C,eAAC,GAAD,CAAUJ,QAAS9yB,IAAS4yB,GAAMjd,KAAlC,SACE,eAAC,GAAD,MAEF,eAAC,GAAD,CAAUmd,QAAS9yB,IAAS4yB,GAAMzM,OAASnmB,IAAS4yB,GAAMI,MAA1D,SACE,eAAC,GAAD,CAAermB,MAAO3M,IAAS4yB,GAAMI,cCJ9Be,OAxBA,IAEX,gBAAC,IAAD,WACE,eAAC,IAAD,CAAO/zB,KAAK,IAAIg0B,OAAK,EAACpgB,UAAWqb,KACjC,eAAC,IAAD,CAAOjvB,KAAK,gBAAgBg0B,OAAK,EAACpgB,UAAWkb,KAE7C,eAAC,IAAD,CAAO9uB,KAAK,6BAA6Bg0B,OAAK,EAACpgB,UAAWya,KAC1C,eAAC,IAAD,CAAOruB,KAAK,UAAUg0B,OAAK,EAACpgB,UAAW4Z,KAEvD,eAAC,IAAD,CAAOxtB,KAAK,mBAAmBg0B,OAAK,EAACpgB,UAAWggB,KAGhD,eAAC,IAAD,CAAUnuB,KAAK,QAAQuuB,OAAK,EAACpM,GAAG,mBAChC,eAAC,IAAD,CAAUniB,KAAK,UAAUuuB,OAAK,EAACpM,GAAG,oBAClC,eAAC,IAAD,CAAUniB,KAAK,cAAcuuB,OAAK,EAACpM,GAAG,oBAEtC,eAAC,IAAD,CAAO5nB,KAAK,SAAS4T,UAAWwb,KAGhC,eAAC,IAAD,CAAOxb,UAAWkgB,U,8NC5BjB,MAAMG,GAAgBrd,IAAD,CAC1Bsd,YAAc,uCAAsCtd,EAAMzD,QAAQ,QAClEghB,aAAe,wCAAuCvd,EAAMzD,QAAQ,QACpE,CAACyD,EAAMC,YAAYhI,GAAG,OAAQ,CAC5BqlB,YAAc,uCAAsCtd,EAAMzD,QAAQ,QAClEghB,aAAe,wCAAuCvd,EAAMzD,QAAQ,WC+BlEuD,GAAYC,aAAYC,IAAD,CAC3Bwd,YAAa,CACXF,YAAc,uCAAsCtd,EAAMzD,QAAQ,SAEpEkhB,QAASJ,GAAard,OAGlB0d,GAAU,EAAG9yB,WACjB,uCACE,eAAC+yB,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAActZ,QAAS1Z,EAAQ,yBAA2B,yBAE5D,eAACizB,GAAA,EAAD,OAYEC,GAAY/jB,IAChB,MAAM,SAAEqe,GAAavB,eACf,GAAE7F,EAAF,KAAMna,EAAN,KAAYknB,EAAZ,MAAkBX,EAAlB,QAAyBK,GAAY1jB,EAErCikB,IAAaC,YAAU7F,EAAU,CAAEhvB,KAAM4nB,EAAIoM,MAAOA,IAE1D,OACE,gBAACO,GAAA,EAAD,CAAU9hB,QAAM,EAACmB,UAAW+T,KAAMC,GAAIA,EAAIgN,SAAUA,EAAUjxB,QAAS,CAAE0wB,QAASA,GAAlF,UACGM,GAAQ,eAACG,GAAA,EAAD,UAAeH,IACxB,eAACH,GAAA,EAAD,CAActZ,QAASzN,QAKvBsnB,GAAaC,aAAW,CAC5BC,WAAY,CACVriB,MAAOsiB,KAAK,KACZ,YAAa,CACXtiB,MAAO,SAET,qBAAsB,CACpBuI,gBAAiB+Z,KAAK,OAG1BnN,QAAS,GACToN,MAAO,IAXUH,CAYhBI,MAkIYC,OA3HC1kB,IAAkB,IAAD,EAC/B,MAAO2kB,EAAQC,GAAazlB,oBAAS,GAC/BnM,EAAU+S,MAEV,eAAE8e,GAAmB7kB,GAErB,OAAEtF,EAAF,QAAU8C,EAAV,MAAmB3M,GAAUoM,KAC7B6nB,EAAa,OAAGpqB,QAAH,IAAGA,GAAH,UAAGA,EAAQpH,iBAAX,aAAG,EAAmBC,QAEnCwxB,EAAavlB,uBAAY,KAC7BolB,GAAU,KACT,IACGI,EAAcxlB,uBAAY,KAC9BolB,GAAU,KACT,IAEGK,EAAiBzlB,uBACpBgb,IACCqK,EAAerK,EAAMzW,OAAOqT,WAE9B,CAACyN,IAGGtuB,EACJ,iCACE,eAAC2uB,GAAA,EAAD,UACE,eAACnB,GAAD,CAAU9M,GAAG,IAAIna,KAAK,OAAOknB,KAAM,eAAC,KAAD,IAAcX,OAAK,EAACK,QAAS1wB,EAAQywB,gBAE1E,eAAC0B,GAAA,EAAD,IACA,gBAACD,GAAA,EAAD,WACE,eAACpK,GAAA,EAAD,CAAe9nB,QAAS,CAAE0wB,QAAS1wB,EAAQywB,aAA3C,qBACC5yB,GAAS,eAAC8yB,GAAD,CAAS9yB,OAAK,IACvB2M,GAAW,eAACmmB,GAAD,IACXjpB,GACCA,EAAO1H,QAAQvC,KACb,EAAGyC,OAAM9D,SAAQ+D,UAAUxC,KACxBwC,GACC,eAAC4wB,GAAD,CAEE9M,GAAK,UAAS7nB,IACd0N,KAAM5J,EACNwwB,QAAS1wB,EAAQywB,aAHX,cAAa9yB,UAQ/B,eAACw0B,GAAA,EAAD,IACA,gBAACD,GAAA,EAAD,WACE,eAACpK,GAAA,EAAD,CAAe9nB,QAAS,CAAE0wB,QAAS1wB,EAAQywB,aAA3C,mBAEE,eAACM,GAAD,CACE9M,GAAG,UACHna,KAAK,cACLknB,KAAM,eAAC,KAAD,IACNX,OAAK,EACLK,QAAS1wB,EAAQywB,cAGrB,eAACM,GAAD,CACE9M,GAAG,iBACHna,KAAK,eACLknB,KAAM,eAAC,KAAD,IACNX,OAAK,EACLK,QAAS1wB,EAAQywB,cAElBqB,GACC,eAACf,GAAD,CACE9M,GAAG,kBACHna,KAAK,aACLknB,KAAM,eAAC,KAAD,IACNX,OAAK,EACLK,QAAS1wB,EAAQywB,oBAO3B,OACE,iCACE,eAAC2B,GAAA,EAAD,CAAQC,OAAO,OAAOjkB,KAAMujB,EAAQpQ,QAASyQ,EAA7C,SACE,gBAACzU,GAAA,EAAD,CACErZ,QAAQ,OACR+T,SA9IW,IA+IX8F,cAAc,SACdD,eAAe,gBACfrC,OAAO,OACPU,SAAS,SACTmW,KAAK,eAPP,UASG/uB,EACD,gBAACga,GAAA,EAAD,CAAK0K,GAAI,EAAT,UACE,eAACjY,GAAA,EAAD,CAAYC,UAAU,MAAtB,SACE,gBAACX,GAAA,EAAD,CAAMW,UAAU,QAAQV,WAAS,EAACG,QAAQ,SAASD,WAAW,SAASD,QAAS,EAAhF,UACE,eAACF,GAAA,EAAD,CAAMK,MAAI,EAAV,mBACA,eAACL,GAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAACyhB,GAAD,CAAYniB,MAAM,UAAUmV,QAASpX,EAAMulB,SAAUzhB,SAAUmhB,MAEjE,eAAC3iB,GAAA,EAAD,CAAMK,MAAI,EAAV,uBAGJ,gBAACK,GAAA,EAAD,CAAYhB,QAAQ,QAAQiB,UAAU,MAAM2I,MAAM,SAAS3J,MAAM,gBAAjE,2BACY,IACV,eAAC,KAAD,CAASvS,KhB9LqD,IgB8LrCuS,MAAM,UAA/B,SACG0a,gBAOX,eAAC6I,GAAA,EAAD,CAAQ3d,SAAS,SAAS5F,MAAM,YAAhC,SACE,gBAACwjB,GAAA,EAAD,CAASzyB,QAAS,CAAE0wB,QAAS1wB,EAAQ0wB,SAArC,UACE,eAACtc,GAAA,EAAD,CAAYlF,QAAS6iB,EAAYW,KAAK,QAAQzjB,MAAM,UAAUoF,aAAW,OAAzE,SACE,eAAC,KAAD,MAEF,eAACrE,GAAA,EAAD,CAAYhB,QAAQ,KAApB,8BC9MV,MAAM+D,GAAYC,aAAW,MAC3BuI,KAAM,CACJoX,UAAW,OACX5S,aAAc,YA+BH6S,OAxBA,KACb,MAAM5yB,EAAU+S,KAEhB,OACE,eAAC8f,EAAA,EAAD,CAAWlR,SAAS,KAAK1R,UAAU,SAASjQ,QAAS,CAAEub,KAAMvb,EAAQub,MAArE,SACE,gBAACvL,GAAA,EAAD,CAAY4I,MAAM,SAAS5J,QAAQ,QAAQC,MAAM,gBAAjD,UAP0B,6BASxB,eAAC+U,GAAA,EAAD,CAAMtnB,KAAK,kCAAkCuS,MAAM,cAAnD,4BAFF,gDAKgD,IAC9C,eAAC+U,GAAA,EAAD,CAAMtnB,KAAK,sDAAsDuS,MAAM,cAAvE,iBAEQ,IARV,oDASoD,IAClD,eAAC+U,GAAA,EAAD,CAAMtnB,KAAK,+CAA+CuS,MAAM,cAAhE,uBAVF,UCpBSzS,UAAOwvB,cAAgBxvB,OAAOs2B,mB,qBCoB7C,MAAMC,GAA2B,CAC/Bpc,QAAS,CACPxN,KAAM,QACNoO,QAAS,CACPwJ,KAAMiS,IAAK,MAEbC,UAAW,CACTlS,KAAMmS,IAAO,QAKbC,GAA0B,CAC9Bxc,QAAS,CACPxN,KAAM,OACNoO,QAAS,CACPwJ,KAAMiS,IAAK,MAEbC,UAAW,CACTlS,KAAMmS,IAAO,QAKbngB,GAAYC,aAAYC,IAAD,CAG3BmgB,cAAe,CACbT,UAAY,GAAE1f,EAAMzD,QAAQ,OAC5BgM,MAAO,OACP6X,UAAW,aACXnvB,QAAS,WACNosB,GAAard,IAElBhG,MAAO,CACL6S,cAAe,OACfrD,OAAQ,MAEV6W,UAAW,CACTrb,SAAU,EACV0E,WAAY,4BACZ1N,MAAOgE,EAAM0D,QAAQ7M,KAAKuN,UAE5Bkc,SAAU,CACRxT,aAAc,mCACd7b,QAAS,OACTyX,UAAW,QACXoC,cAAe,UAEjByV,YAAa,CACXC,KAAM,OAMK,SAASC,KACtB,MAAM1zB,EAAU+S,KACV9F,EAAQH,KAER6mB,EAAkBC,YAAc,iCAC/B5S,EAAM6S,GAAWhoB,GAPT,cAOsD,MAErEa,qBAAU,KACJgB,IAGH,IAGHhB,qBAAU,KACR,MAAMonB,EAAS,KACb70B,SAASwO,oBAAoB,QAASqmB,GACtC,IAAI9H,GAAa,CACfC,YAAa,iBAGjBhtB,SAASuO,iBAAiB,QAASsmB,KAClC,IAEH,MAAMvB,EAAoB,OAATvR,EAAgB2S,EAAkB3S,EAE7C/N,EAAQwD,mBAAQ,IAAMsd,YAAexB,EAAWY,GAAYJ,KAAa,CAACR,IAEhF,OACE,sBAAK/d,UAAWxU,EAAQuzB,SAAxB,SACE,gBAACS,EAAA,EAAD,CAAe/gB,MAAOA,EAAtB,UACE,eAAC,KAAD,UACE,uBAAM/S,KAAK,cAAcwc,QAASzJ,EAAM0D,QAAQsc,UAAUlS,SAG5D,eAACkT,EAAA,EAAD,IACA,eAAC,GAAD,CAAQ1B,SAAUA,EAAUV,eAAgBgC,IAC5C,eAAChB,EAAA,EAAD,CACElR,SAAS,KACT3hB,QAAS,CAAEub,KAAMvb,EAAQozB,eACzB5e,UAAWxU,EAAQwzB,YAHrB,SAKE,eAAC,GAAD,MAEF,eAAC,GAAD,IACA,eAACU,EAAA,EAAD,CACEC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdjmB,KAAMnB,EACNtO,QAAQ,aACR6V,UAAWxU,EAAQiN,MACnBqnB,aAAc,CAAEt0B,QAAS,CAAEub,KAAMvb,EAAQszB,WAAanT,UAAWoS,EAAW,EAAI,U,gCCnH1F,MAAMnC,GAAS,EAAG7lB,cAIP,eAAC,KAAD,CAAYA,SAAUA,IAIjCgqB,IAASC,OACP,eAAC,aAAD,UACE,eAAC,GAAD,UACE,eAAC,GAAD,UACE,eAAC,GAAD,UACE,eAACd,GAAD,YAKRz0B,SAASw1B,eAAe,SAG1BC,KAAaC,Y,gCCnCb,mBAQexE,IANE,IACf,cAAC,IAAD,CAAYnhB,QAAQ,KAAK4J,MAAM,SAA/B,wE,gCCHF,gFAEA,MAAMgc,EAAU,iBAWhB,MAAMC,EAAQ,IAAIC,KAAK,cAwCjBC,EAAe,mBAERvmB,EAAc9E,MACzBxJ,EACAsE,EACAT,GAAe,EACfixB,KAEA,GAAoB,qBAAT90B,IAAyB6D,EAClC,OAGF,MAAMkxB,EAAgBzwB,GAAQuwB,EAExBG,EA/DUh1B,IACTA,EAAKgC,QAAQ,UAAW,KAAKA,QAAQ0yB,EAAS,IA8DrCO,CAASj1B,GACnBk1B,EAAWF,EAAQG,cACnBC,GAAWN,GApDE,MACnB,MAAMO,EAAM,IAAIT,KAChB,OAAOz3B,KAAKm4B,OAAOD,EAAIE,UAAYZ,EAAMY,WAAa,IAAO,IAAIlT,SAAS,KAkDjDmT,IAAgBL,cAEnC/uB,EAAQ,CADI,GAAE8uB,KAAYE,IACPL,GAAejzB,KAAK,KAU7C,MAAO,CAACkzB,EApDgB,EAACS,EAAgBC,KACzC,MAAMC,EAAwB,CAACD,EAAQv3B,OAAOkkB,SAAS,KACvD,IAAK,IAAI5kB,EAAI,EAAGA,EAAIi4B,EAAQv3B,OAAQV,IAClCk4B,EAAYtuB,KAAKouB,EAAOG,OAAOn4B,IAC/Bk4B,EAAYtuB,KAAKquB,EAAQE,OAAOn4B,IAGlC,OADAk4B,EAAYtuB,KAAKouB,EAAOn4B,MAAMo4B,EAAQv3B,OAAQs3B,EAAOt3B,SAC9Cw3B,EAAY7zB,KAAK,KA4CJ+zB,QAxEtBrsB,eAAuBssB,GACrB,MAAMC,QAAYC,OAAOC,OAAOC,OAAO,UAAWJ,GAClD,OAAOK,YAAe,IAAIC,WAAWL,IA+DlBM,EAAQ,IAAIC,aAAclM,OAAOhkB,KAIjD+uB,cACAnzB,QAAQ,aAAc,IACtB1E,MAAM,EAhEQ,IAiE2B83B,IACdtzB,KAAK,MAUxBy0B,EAAY/sB,MAAOgtB,EAAclyB,KAAwC,IAAD,EACnF,MAAMywB,EAAgBzwB,GAAQuwB,EAExB1wB,EAAWqyB,EAAKx5B,MAAM,MACrBgD,EAAM21B,GAAexxB,EAC5B,GAAwB,IAApBA,EAAShG,QAAgBw3B,EAAY1zB,MAAMyyB,GAAU,CAGvD,MAAO,CAAE10B,KAAMw2B,EAAMrwB,SAAS,EAAO1H,QADnC0F,EAAShG,OAAS,EAAI,0BAA4B,gCAGtD,MAAOs4B,EAAK3B,GA7De4B,KAC3B,MAAMv4B,EAASw4B,SAASD,EAAQd,OAAO,GAAI,IACrCD,EAAce,EAAQp5B,MAAM,EAAGo5B,EAAQv4B,QACvCs3B,EAAmB,GACnBC,EAAoB,GAC1B,IAAK,IAAIj4B,EAAI,EAAGA,EAAa,EAATU,EAAYV,GAAK,EACnCg4B,EAAOpuB,KAAKsuB,EAAYC,OAAOn4B,IAC/Bi4B,EAAQruB,KAAKsuB,EAAYC,OAAOn4B,EAAI,IAGtC,OADAg4B,EAAOpuB,KAAKsuB,EAAYr4B,MAAe,EAATa,EAAYw3B,EAAYx3B,SAC/C,CAACs3B,EAAO3zB,KAAK,IAAK4zB,EAAQ5zB,KAAK,MAmDlB80B,CAAajB,EAAYR,eACvC0B,EAhFiBC,KACvB,MACMC,EAAmB,GADTJ,SAASG,EAAW,IACN,IAAOnC,EAAMY,UAC3C,OAAO,IAAIX,KAAKmC,IA6EHC,CAAgBlC,GAvFZ,MAyFV,OAAH2B,QAAG,IAAHA,OAAA,EAAAA,EAAKt4B,SACP4C,QAAQC,KAAK,6CAEf,MAAMi2B,EAAYT,EAAKrB,cAEvB,MAAO,CAAEn1B,OAAM62B,OAAM1wB,SADP,gBAAUmI,EAAYtO,EAAM+0B,GAAe,EAAMD,UAAjD,aAAG,EAAsDK,iBAC5B8B,EAAWx4B,QAAS+3B,K,gCC7GjE,4BAOe1S,IAFDhX,GAAiB,cAAC,IAAD,CAASiD,UAAWmnB,OAAgBpqB,M","file":"static/js/main.7611542c.chunk.js","sourcesContent":["// A list of constants for the project\n\n// PUBLIC_URL access\nexport const BASE_URL = `${process.env.PUBLIC_URL}/config`;\n\n// URL of teh manifest file\nexport const MANIFEST_FILE = `${BASE_URL}/manifest.yaml`;\n\n// Name of the task file\nexport const TASK_FILE = \"tasks.yaml\";\n\n// Generate a full file URL given the folder and the pathname\nexport const fileUrl = (folder: string, path: string) => `${BASE_URL}/${folder}/${path}`;\n\nexport const fullBaseUrl = () => new URL(BASE_URL, window.location.href);\n","import { Document } from \"yaml\";\nimport { StructError } from \"superstruct\";\nimport { YAMLError } from \"yaml/util\";\n\nexport class IPAError extends Error {}\n\ninterface Line {\n  num: number;\n  contents: string;\n  error: boolean;\n}\n\n// Note: line is assumed one indexed\nconst getLines = (lines: string | string[], lineIdx: number, context: number): Line[] => {\n  const lineArr = typeof lines === \"string\" ? lines.split(\"\\n\") : lines;\n  const line = lineIdx - 1;\n\n  const start = Math.max(line - context, 0);\n  const errorLine = Math.max(line, line - context) - start;\n\n  if (line < 0) {\n    return [];\n  } else {\n    return lineArr.slice(line - context, line + context + 1).map((contents, i) => ({\n      num: start + i + 1,\n      contents,\n      error: i === errorLine,\n    }));\n  }\n};\n\nconst indexToLines = (str: string, idx: number, context: number): Line[] => {\n  const lines = str.split(\"\\n\");\n\n  // Yes, we need this here from function\n  const line = lines.findIndex(\n    function (this: { pos: number }, ln) {\n      this.pos += ln.length + 1;\n      return idx < this.pos;\n    },\n    { pos: 0 }\n  );\n\n  return getLines(lines, line + 1, context);\n};\n\ninterface ContextError {\n  headline: string;\n  context(n?: number): Line[];\n}\n\nexport const isContextError = (o: any): o is ContextError => {\n  return o instanceof IPAError && \"context\" in o;\n};\n\nexport class ParseError extends IPAError implements ContextError {\n  dat: string;\n  err: YAMLError;\n  headline = \"File parsing error\";\n\n  constructor(data: string, err: YAMLError) {\n    super(err.message);\n    this.dat = data;\n    this.err = err;\n  }\n\n  context(n = 1) {\n    const linePos = this.err.linePos?.start;\n    if (linePos) {\n      return getLines(this.dat, linePos.line, n);\n    } else {\n      return [];\n    }\n  }\n}\n\nexport class ValidateError extends IPAError implements ContextError {\n  dat: string;\n  doc: Document;\n  err: StructError;\n  headline = \"File validation error\";\n\n  constructor(data: string, document: Document, err: StructError) {\n    super(err.message);\n    this.dat = data;\n    this.doc = document;\n    this.err = err;\n  }\n\n  context(n = 1) {\n    // issues importing type Node and function Document#getIn\n    const node = (this.doc as any).getIn(this.err.path, true) as { range: [number, number] };\n    if (node != null && typeof node === \"object\" && \"range\" in node) {\n      return indexToLines(this.dat, node.range[0], n);\n    } else {\n      return [];\n    }\n  }\n}\n\nexport class ResourceError extends IPAError {\n  originalMessage?: string;\n\n  constructor(msg: string, orig?: string) {\n    super(msg);\n    this.originalMessage = orig;\n  }\n}\n","import { Infer, array, boolean, object, optional, string } from \"superstruct\";\n\nexport type ManifestDef = Infer<typeof ManifestFile>;\n\nexport const ManifestFile = object({\n  homepage: object({ title: string(), body: string() }),\n  classes: array(\n    object({\n      name: string(),\n      folder: string(),\n      hidden: optional(boolean()),\n    })\n  ),\n  ipaPlayer: optional(\n    object({\n      enabled: boolean(),\n      // Like everything, this is resolved relative to the base of the install\n      url: string(),\n    })\n  ),\n});\n","import YAML from \"yaml\";\nimport { Struct, validate } from \"superstruct\";\nimport { IPAError, ParseError, ValidateError } from \"../error\";\n\nexport const parse = <T, S>(contents: string, struct: Struct<T, S>): T => {\n  const doc = YAML.parseDocument(contents, { prettyErrors: true });\n\n  doc.warnings.forEach((warning) => console.warn(warning));\n\n  if (doc.errors.length > 0) {\n    // Log all of the errors, but only throw the first one.\n    doc.errors.forEach((err) => console.error(err));\n    throw new ParseError(contents, doc.errors[0]);\n  }\n  const fileContents = doc.toJSON();\n\n  const [err, valid] = validate(fileContents, struct);\n  if (!valid) {\n    if (!err) {\n      throw new IPAError(\"Bad state. Both No valid and no error!\");\n    }\n    throw new ValidateError(contents, doc, err);\n  }\n\n  return valid;\n};\n","import { ManifestDef, ManifestFile } from \"../../data/manifest\";\nimport { parse } from \"./parse\";\n\nexport type { ManifestDef } from \"../../data/manifest\";\n\nexport const parseManifest = (contents: string): ManifestDef => parse(contents, ManifestFile);\n","// import { STRESS } from \"./ipa\";\n\n// We will always prefer the multi char version of a symbol, so always expand it\nconst CANONICAL_FORMS = new Map([\n  [\"\", \"t\"],\n  [\"\", \"d\"],\n  [\"\", \"\"],\n  [\"\", \"\"],\n  // coerce an exclamation point to postalveolar click\n  // [\"!\", \"\"],\n  // coerce an apostrophe to the ejective\n  // [\"'\", STRESS],\n]);\n\nconst NORM = \"NFKD\";\n\nconst MATCHER = new RegExp(Array.from(CANONICAL_FORMS.keys()).join(\"|\"), \"gu\");\n\nconst normalize = (str: string) => {\n  const normalized = str.normalize(NORM);\n  return normalized.replace(MATCHER, (match) => CANONICAL_FORMS.get(match) || \"\");\n};\n\nexport default normalize;\n","import { Infer, array, number, object, optional, string } from \"superstruct\";\n\nconst Section = object({\n  name: string(),\n  columns: optional(number()),\n  symbols: array(\n    object({\n      ipa: string(),\n      description: string(),\n    })\n  ),\n});\n\nexport type SectionDef = Infer<typeof Section>;\n\nexport const Keyboard = object({\n  // Filter the symbols in Pulmonics, Vowels, and Other.\n  // If any Non-Pulmonic consanants are included, that section will appear,\n  // otherwise it is automatically hidden.\n  symbols: array(string()),\n  // Any additional sections to include\n  additionalSections: optional(array(Section)),\n});\n","import {\n  Infer,\n  array,\n  boolean,\n  object,\n  optional,\n  record,\n  refine,\n  string,\n  union,\n} from \"superstruct\";\nimport { Keyboard } from \"./keyboard\";\n\nexport type TaskFileDef = Infer<typeof TaskFile>;\nexport type TaskFileWord = Infer<typeof Word>;\nexport type TaskFileMacros = Infer<typeof Macros>;\nexport type TaskFileSegment = Infer<typeof Segment>;\n\nconst Macros = record(string(), array(string()));\n\nconst Segment = record(string(), union([boolean(), string()]));\n\n// ensure the segment is a member of the parent (guard against version changes)\n// and get typescript guarantees later on.\nconst isParentSegmentList = (list: any, segment: TaskFileSegment): list is TaskFileSegment[] =>\n  Array.isArray(list) && list.includes(segment);\n\nconst ValidateSegment = refine(Segment, \"Segment\", (segment, context) => {\n  const index = context.path[context.path.length - 1];\n  // Grab the parent object so we can check against it for certain rules\n  const parent = context.branch[context.branch.length - 2];\n\n  // Slightly hacky way of checking for current segment number and if last segment\n  if (typeof index === \"string\" || !isParentSegmentList(parent, segment)) {\n    return \"Segments may only occur in arrays\";\n  }\n\n  for (const key in segment) {\n    if ((key.includes(\"...\") || key.includes(\"%\")) && segment[key] === true) {\n      return \"Correct options are not allowed to use wildcards\";\n    }\n  }\n\n  if (index < parent.length - 1) {\n    if (segment[\"\"] === true) {\n      return `You may only terminate with \"\" on the last segment`;\n    }\n\n    if (Object.values(segment).reduce((run: boolean, curr) => run && curr !== true, true)) {\n      return `There must be at least one valid value per segment`;\n    }\n  } else {\n    // Last segment\n    if (segment[\"\"] === true) {\n      for (const key in segment) {\n        if (key !== \"\" && segment[key] === true) {\n          return \"You cannot have both a termination and another valid option in the last segment\";\n        }\n      }\n    }\n  }\n  // Validation successful\n  return true;\n});\n\nconst Word = object({\n  display: string(),\n  audio: optional(string()),\n  instructions: optional(string()),\n  segments: array(ValidateSegment),\n});\n\nexport const TaskFile = object({\n  author: string(),\n  title: string(),\n  salt: optional(string()),\n  instructions: optional(string()),\n  macros: optional(Macros),\n  words: array(Word),\n  keyboard: optional(Keyboard),\n});\n","/**\n * Places of articulation\n */\nexport const PLACES = [\n  \"Bilabial\",\n  \"Labiodental\",\n  \"Dental\",\n  \"Alveolar\",\n  \"Postalveolar\",\n  \"Retroflex\",\n  \"Palatal\",\n  \"Velar\",\n  \"Uvular\",\n  \"Pharyngeal\",\n  \"Glottal\",\n] as const;\n\n/**\n * Manners of articulation\n */\nexport const MANNERS = [\n  \"Stop\",\n  \"Nasal\",\n  \"Trill\",\n  \"Tap\",\n  \"Fricative\",\n  \"Lateral fricative\",\n  \"Approximant\",\n  \"Lateral approximant\",\n] as const;\n\nexport type PlaceOfArt = typeof PLACES[number];\nexport type MannerOfArt = typeof MANNERS[number];\n\n// The sounds that are either impossible or not used\nexport const IMPOSSIBLE = \"_\";\nconst IMP = IMPOSSIBLE;\nexport const NOT_USED = \"\";\nconst NUL = NOT_USED;\n\n// prettier-ignore\nexport const PULMONICS = [\n  [\"p\", \"b\", NUL, NUL, NUL, NUL, \"t\", \"d\", NUL, NUL, \"\", \"\", \"c\", \"\", \"k\", \"g\", \"q\", \"\", NUL, IMP, \"\", IMP],\n  [NUL, \"m\", NUL, \"\", NUL, NUL, NUL, \"n\", NUL, NUL, NUL, \"\", NUL, \"\", NUL, \"\", NUL, \"\", IMP, IMP, IMP, IMP],\n  [NUL, \"\", NUL, NUL, NUL, NUL, NUL, \"r\", NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, NUL, \"\", NUL, NUL, IMP, IMP],\n  [NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, IMP, IMP, NUL, NUL, NUL, NUL, IMP, IMP],\n  [\"\", \"\", \"f\", \"v\", \"\", \"\", \"s\", \"z\", \"\", \"\", \"\", \"\", \"\", \"\", \"x\", \"\", \"\", \"\", \"\", \"\", \"h\", \"\"],\n  [IMP, IMP, IMP, IMP, NUL, NUL, \"\", \"\", NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, IMP, IMP],\n  [NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, \"j\", NUL, \"\", NUL, NUL, NUL, NUL, IMP, IMP],\n  [IMP, IMP, IMP, IMP, NUL, NUL, NUL, \"l\", NUL, NUL, NUL, \"\", NUL, \"\", NUL, \"\", NUL, NUL, IMP, IMP, IMP, IMP]\n] as const;\n\nexport const CLICKS = [\n  [\"\", \"Bilabial\"],\n  [\"\", \"Dental\"],\n  [\"\", \"(Post)alveolar\"],\n  [\"\", \"Palatoalveolar\"],\n  [\"\", \"Alveolar lateral\"],\n] as const;\n\nexport const IMPLOSIVES = [\n  [\"\", \"Bilabial\"],\n  [\"\", \"Dental/alveolar\"],\n  [\"\", \"Palatal\"],\n  [\"\", \"Velar\"],\n  [\"\", \"Uvular\"],\n] as const;\n\n// U+02BC\nexport const EJECTIVE = \"\";\n\nexport const EJECTIVES = [\n  [\"\", \"Examples:\"],\n  [\"p\", \"Bilabial\"],\n  [\"t\", \"Dental/alveolar\"],\n  [\"k\", \"Velar\"],\n  [\"s\", \"Alveolar fricative\"],\n] as const;\n\nexport const NON_PULMONICS = [...CLICKS, ...IMPLOSIVES, ...EJECTIVES].map((v) => v[0]);\n\nexport const FILLER = \"\";\n\nexport const VOWEL_HEIGHTS = [\"Close\", \"Close-mid\", \"Open-mid\", \"Open\"] as const;\nexport const VOWEL_FRONTEDNESS = [\"Front\", \"Central\", \"Back\"] as const;\n\nexport type VowelLiteral = readonly [string, string] | string;\nexport type Coords = readonly [number, number];\n\ntype VowelCoords = readonly (readonly [VowelLiteral, Coords])[];\n\n/**\n * Associative array of Vowel pairs and ~coordinates\n *\n * Coords are specified on the range [0, 1]\n * x = frontedness\n * y = height\n *\n * Upper left (close front) is origin. Everything is translated afterwards to be\n * in the trapezium shape\n */\n// prettier-ignore\nexport const VOWELS: VowelCoords = [\n  // Close vowels\n  [[\"i\", \"y\"], [0, 0]],\n  [[\"\", \"\"], [0.5, 0]],\n  [[\"\", \"u\"], [1, 0]],\n\n  // Near close vowels\n  [[\"\", \"\"], [0.2, 1/6]],\n  [[\"\", \"\"], [0.75, 1/6]],\n\n  // Close-mid\n  [[\"e\", \"\"], [0, 1/3]],\n  [[\"\", \"\"], [0.5, 1/3]],\n  [[\"\", \"o\"], [1, 1/3]],\n\n  // Mid\n  [\"\", [0.5, 0.5]],\n\n  // Open-mid\n  [[\"\", \"\"], [0, 2/3]],\n  [[\"\", \"\"], [0.5, 2/3]],\n  [[\"\", \"\"], [1, 2/3]],\n\n  // Near-open\n  [[\"\", \"\"], [0, 5/6]],\n  [\"\", [0.5, 5/6]],\n\n  // Open\n  [[\"a\", \"\"], [0, 1]],\n  [[\"\", \"\"], [1, 1]],\n];\n\nexport const STRESS = \"\";\nexport const SECONDARY_STRESS = \"\";\n\ninterface MiscChar {\n  ipa: string;\n  sym?: string;\n  description: string;\n  examples?: readonly string[];\n}\n\nexport type MiscList = readonly Readonly<MiscChar>[];\n\nexport const DIACRITICS: MiscList = [\n  { ipa: \"\\u0325\", description: \"Voiceless\", examples: [\"n\", \"d\"] },\n  { ipa: \"\\u032C\", description: \"Voiced\", examples: [\"s\", \"t\"] },\n  { ipa: \"\\u02B0\", description: \"Aspirated\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0339\", description: \"More rounded\", examples: [\"\"] },\n  { ipa: \"\\u031C\", description: \"Less rounded\", examples: [\"\"] },\n  { ipa: \"\\u031F\", description: \"Advanced\", examples: [\"u\"] },\n  { ipa: \"\\u0320\", description: \"Retracted\", examples: [\"e\"] },\n  { ipa: \"\\u0308\", description: \"Centralized\", examples: [\"e\"] },\n  { ipa: \"\\u033D\", description: \"Mid-centralized\", examples: [\"e\"] },\n  { ipa: \"\\u0329\", description: \"Syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u032F\", description: \"Non-syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u02DE\", description: \"Rhoticity\", examples: [\"\", \"a\"] },\n  { ipa: \"\\u0324\", description: \"Breathy voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u0330\", description: \"Creaky voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u033C\", description: \"Linguolabial\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B7\", description: \"Labialized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B2\", description: \"Palatalized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E0\", description: \"Velarized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E4\", description: \"Pharyngealized\", examples: [\"t\", \"d\"] },\n\n  { ipa: \"\\u032A\", description: \"Dental\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033A\", description: \"Apical\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033B\", description: \"Laminal\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0303\", description: \"Nasalized\", examples: [\"e\"] },\n  { ipa: \"\\u207F\", description: \"Nasal release\", examples: [\"d\"] },\n  { ipa: \"\\u02E1\", description: \"Lateral release\", examples: [\"d\"] },\n  { ipa: \"\\u031A\", description: \"No audible release\", examples: [\"d\"] },\n\n  { ipa: \"\\u0334\", description: \"Velarized or pharyngealized\", examples: [\"l\"] },\n\n  { ipa: \"\\u031D\", description: \"Raised\", examples: [\"e\"] },\n  { ipa: \"\\u031E\", description: \"Lowered\", examples: [\"e\"] },\n  { ipa: \"\\u0318\", description: \"Advanced tongue root\", examples: [\"e\"] },\n  { ipa: \"\\u0319\", description: \"Retracted tongue root\", examples: [\"e\"] },\n];\n\nexport const MISC: MiscList = [\n  {\n    ipa: \"\\u0361\",\n    sym: `${FILLER}\\u0361${FILLER}`,\n    description: \"Tie bar\",\n    examples: [\"t\", \"d\"],\n  },\n  { ipa: \"w\", sym: \"w\", description: \"Voiced labial-velar approximant\" },\n  { ipa: \"\", sym: \"\", description: \"Voiceless labial-velar fricative\" },\n  { ipa: \"\", sym: \"\", description: \"Voiced labial-palatal approximant\" },\n  { ipa: \"\", sym: \"\", description: \"Voiceless epiglottal fricative\" },\n  { ipa: \"\", sym: \"\", description: \"Voiced epiglottal fricative\" },\n  { ipa: \"\", sym: \"\", description: \"Epiglottal plosive\" },\n  { ipa: \"\", sym: \"\", description: \"Voiced alveolar lateral flap\" },\n  { ipa: \"\", sym: \"\", description: \"Voiceless alveolo-palatal fricative\" },\n  { ipa: \"\", sym: \"\", description: \"Voiced alveolo-palatal fricative\" },\n  { ipa: \"\", sym: \"\", description: \"Simultaneous  and x\" },\n] as const;\n\nexport const SUPRASEGMENTALS: MiscList = [\n  { ipa: STRESS, sym: STRESS, description: \"Primary stress\" },\n  { ipa: SECONDARY_STRESS, sym: SECONDARY_STRESS, description: \"Secondary stress\" },\n  { ipa: \"\", sym: \"\", description: \"Long\", examples: [\"e\"] },\n  { ipa: \"\", sym: \"\", description: \"Half-long\", examples: [\"e\"] },\n  { ipa: \"\\u0306\", sym: `${FILLER}\\u0306`, description: \"Extra-short\", examples: [\"e\\u0306\"] },\n  { ipa: \"|\", sym: \"|\", description: \"Minor (foot) group\" },\n  { ipa: \"\", sym: \"\", description: \"Major (intonation) group\" },\n  { ipa: \".\", sym: \".\", description: \"Syllable break\" },\n  { ipa: \"\", sym: \"\", description: \"Linking (absence of break)\" },\n] as const;\n","import escapeStringRegexp from \"escape-string-regexp\";\nimport normalize from \"../normalize\";\nimport { TaskFile, TaskFileMacros, TaskFileSegment } from \"../../data/task\";\nimport { parse } from \"./parse\";\nimport { SectionDef } from \"../../data/keyboard\";\nimport { NON_PULMONICS } from \"../ipa\";\n\nexport interface TaskDef {\n  author: string;\n  title: string;\n  instructions?: string;\n  salt?: string;\n  macros: Macros;\n  words: Word[];\n  keyboard?: KeyboardDef;\n}\n\ntype Explanations = Map<string, string>;\ninterface Wildcard {\n  matcher: string;\n  message: string;\n}\n\nexport interface WordSegment {\n  final?: boolean;\n  correct: string[];\n  explanations: Explanations;\n  wildcards?: Wildcard[];\n  hint?: string;\n}\n\nexport interface Word {\n  display: string;\n  audio?: string;\n  instructions?: string;\n  segments: WordSegment[];\n}\n\nexport interface KeyboardDef {\n  symbols: string[];\n  nonPulmonics: boolean;\n  sections?: SectionDef[];\n}\n\ninterface SegmentMatch {\n  correct: boolean;\n  message?: string;\n}\n\nexport const DEFAULT_MESSAGE = \"Whoops, that's not right. Try again!\";\nexport const END_MESSAGE = \"Hmmm... Are you sure there's more sounds here?\";\n// replaceAll is not supported in Github actions because we need node 15.x for that :'(\nconst KLEENE_REPLACE = new RegExp(escapeStringRegexp(escapeStringRegexp(\"...\")), \"g\");\nconst ANY_REPLACE = new RegExp(escapeStringRegexp(escapeStringRegexp(\"%\")), \"g\");\n\nexport const wildcardToRegex = (wildcard: string) => {\n  const str = escapeStringRegexp(wildcard);\n  const kleene = str.replace(KLEENE_REPLACE, \".*\").replace(ANY_REPLACE, \".\");\n  return new RegExp(`^${kleene}$`, \"u\");\n};\n\n/**\n * Attempt to match a word segment\n * @param input The user inputted value to check\n * @param segment The word segment we are matching\n */\nexport const matchSegment = (rawInput: string, segment?: WordSegment): SegmentMatch => {\n  if (!segment) {\n    return { correct: false, message: END_MESSAGE };\n  }\n\n  const input = normalize(rawInput);\n\n  let message: string | undefined;\n  if (segment.correct.includes(input)) {\n    return { correct: true };\n  } else if ((message = segment.explanations.get(input))) {\n    return { correct: false, message: message };\n  } else if (segment.wildcards) {\n    // Do the wildcard lookup :(\n    const match = segment.wildcards.find(({ matcher }) => {\n      return wildcardToRegex(matcher).test(input);\n    });\n    if (match) {\n      return { correct: false, message: match.message };\n    }\n  }\n\n  // Return a the end message if there are no correct options\n  return { correct: false, message: segment.correct.length === 0 ? END_MESSAGE : DEFAULT_MESSAGE };\n};\n\ntype Macro = string;\n\ninterface Macros {\n  [k: string]: string[];\n}\n\nexport const expandMacro = (str: Macro, macros: Macros, encountered: string[] = []): string[] => {\n  if (macros.hasOwnProperty(str)) {\n    // Key exists\n    const newEncountered = [...encountered, str];\n    let results: string[] = [];\n\n    macros[str].forEach((value) => {\n      if (macros.hasOwnProperty(value) && !newEncountered.includes(value)) {\n        // If we find another macro we haven't encountered, append it's expansion\n        const expanded = expandMacro(value, macros, newEncountered);\n        results = results.concat(expanded);\n      } else {\n        results.push(value);\n      }\n    });\n    return results;\n  } else {\n    // Resolve the base case of no macros\n    return [str];\n  }\n};\n\nconst pickValues = <T, K extends keyof T>(values: T, ops: K[]): Pick<T, K> => {\n  let result = {} as Pick<T, K>;\n  ops.forEach((key) => {\n    result[key] = values[key];\n  });\n  return result;\n};\n\nconst getMacros = (macros: TaskFileMacros | undefined): Macros => {\n  if (macros) {\n    let result: Macros = {};\n    // iterate over record\n    for (const key in macros) {\n      // Todo: raise an error if a key is defined twice\n      result[normalize(key)] = macros[key].map(normalize);\n    }\n    return result;\n  } else {\n    return {};\n  }\n};\n\nconst getSegments = (segments: TaskFileSegment[], macros: Macros): WordSegment[] => {\n  const validSegments = segments.map((segment, i): WordSegment => {\n    let correct: string[] = [];\n    let wildcards: Wildcard[] = [];\n    const explanations = new Map<string, string>();\n    let hint: string | undefined;\n\n    // Record iteration\n    for (const key in segment) {\n      const sym = normalize(key);\n      const value = segment[key];\n      if (value === true) {\n        // Correct value(s)\n        correct = correct.concat(expandMacro(sym, macros));\n      } else if (sym.includes(\"...\") || sym.includes(\"%\")) {\n        // Wildcard matcher\n        wildcards.push({ matcher: sym, message: value || DEFAULT_MESSAGE });\n      } else if (sym === \"HINT\" && typeof value === \"string\") {\n        // Require the optional hint to be all caps\n        hint = value;\n      } else {\n        // We just have a normal explanation\n        expandMacro(sym, macros).forEach((expand) => {\n          explanations.set(expand, value || DEFAULT_MESSAGE);\n        });\n      }\n    }\n    return { correct, explanations, wildcards, hint };\n  });\n\n  // Ensure we have a final element listed\n  const lastElement = validSegments[validSegments.length - 1];\n  if (lastElement.correct.length === 0) {\n    // Final element exists, but we don't have a termination identifier\n    lastElement.correct.push(\"\");\n    lastElement.final = true;\n  } else if (lastElement.correct.includes(\"\")) {\n    // All data is good. Mark as final\n    lastElement.final = true;\n  } else {\n    // No final element existed, so we create one\n    validSegments.push({ correct: [\"\"], explanations: new Map(), final: true });\n  }\n\n  return validSegments;\n};\n\nexport const parseTask = (contents: string): TaskDef => {\n  const valid = parse(contents, TaskFile);\n\n  const metadata = pickValues(valid, [\"author\", \"title\", \"salt\", \"instructions\"]);\n  const macros = getMacros(valid.macros);\n  const words = valid.words.map((word): Word => {\n    const meta = pickValues(word, [\"display\", \"audio\", \"instructions\"]);\n    const segments = getSegments(word.segments, macros);\n    return { ...meta, segments };\n  });\n\n  const definition: TaskDef = { ...metadata, macros, words };\n\n  if (valid.keyboard) {\n    const { symbols, additionalSections } = valid.keyboard;\n    const nonPulmonics = NON_PULMONICS.some((char) => symbols.includes(char));\n\n    definition.keyboard = {\n      symbols,\n      nonPulmonics,\n      sections: additionalSections,\n    };\n  }\n\n  return definition;\n};\n","import { Infer, array, boolean, object, optional, string } from \"superstruct\";\n\nexport type TaskListDef = Infer<typeof TaskListFile>;\nexport type TaskInfoDef = Infer<typeof TaskInfo>;\n\nconst TaskInfo = object({\n  name: string(),\n  description: string(),\n  file: string(),\n  hidden: optional(boolean()),\n});\n\nexport const TaskListFile = object({\n  title: string(),\n  description: string(),\n  tasks: array(TaskInfo),\n});\n","import { Infer, array, number, object, optional, string, type } from \"superstruct\";\n\nexport type IpaSoundsDef = Infer<typeof IpaSounds>;\n\nconst commonSound = {\n  // Note: the filler '' character should be treated as a noop and deleted\n  ipa: string(),\n  audio: string(),\n  video: optional(string()),\n  description: optional(string()),\n};\n\nconst Sound = object(commonSound);\n\ntype SoundDef = Infer<typeof Sound>;\n\nexport type { SoundDef as Sound };\n\n// Sections follos\nconst Section = object({\n  name: string(),\n  columns: optional(number()),\n  symbols: array(\n    object({\n      ...commonSound,\n      description: string(),\n    })\n  ),\n});\n\n// Expliticly make this a type() to better support future changes/additions since it may be externally hosted\nexport const IpaSounds = type({\n  baseUrl: optional(string()),\n  packFile: optional(string()),\n  footer: optional(string()),\n  symbols: array(Sound),\n  additionalSections: optional(array(Section)),\n});\n","import { createContext, useContext } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { YAMLError } from \"yaml/util\";\n\nimport { MANIFEST_FILE } from \"./constants\";\nimport { ValidateError } from \"./utils/error\";\n\nimport { ManifestDef, parseManifest } from \"./utils/parsers\";\n\ninterface AsyncManifest {\n  error: Error | undefined;\n  loading: boolean;\n  fetched: boolean;\n  result: ManifestDef | undefined;\n}\n\nconst ManifestContext = createContext<AsyncManifest | null>(null);\n\nconst fetchManifest = async () => {\n  const req = await fetch(MANIFEST_FILE, { credentials: \"same-origin\" });\n  const body = await req.text();\n  return { manifest: parseManifest(body), raw: body };\n};\n\nexport const useManifest = () => {\n  const asyncManifest = useContext(ManifestContext);\n  if (!asyncManifest) {\n    // Absurd\n    throw new Error(\"Error: you must wrap in a <Manifest> context\");\n  }\n  return asyncManifest;\n};\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst MANIFEST_KEY = \"cached_manifest\";\n\n// Only show the error once. Globals are terrible, but this context can only exist once\nlet errorShown = false;\n\nconst Manifest = ({ children }: Props) => {\n  const { result, error, loading } = useAsync(fetchManifest, []);\n\n  const manifest = {\n    loading,\n    error,\n    fetched: true,\n    result: result?.manifest,\n  };\n\n  if (loading && !error) {\n    // Cache load logic\n    try {\n      const cachedBody = localStorage.getItem(MANIFEST_KEY);\n      if (cachedBody) {\n        manifest.result = parseManifest(cachedBody);\n        manifest.fetched = false;\n        manifest.loading = false;\n      }\n    } catch {\n      // Silently ignore a failed cache load and fallback to manifest loading\n    }\n  } else if (error && !errorShown) {\n    // Error handling logic\n    errorShown = true;\n    console.error(error);\n    if (error instanceof YAMLError) {\n      // This is a YAML error\n      alert(\n        `Error: Your manifest.yaml contains invalid syntax. Please check the console for more info.`\n      );\n    } else if (error instanceof ValidateError) {\n      alert(`Issue parsing manifest.yaml: ${error.message}`);\n    } else {\n      alert(\"There was an error loading your manifest.yaml\");\n    }\n  } else if (result?.raw) {\n    // Cache save logic\n    localStorage.setItem(MANIFEST_KEY, result.raw);\n  }\n\n  return <ManifestContext.Provider value={manifest}>{children}</ManifestContext.Provider>;\n};\n\nexport default Manifest;\n","const [up, down, left, right] = [\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"] as const;\nconst Pattern = [up, up, down, down, left, right, left, right, \"b\", \"a\"] as const;\n\nexport const buildHandler = (action: () => void) => {\n  let curr = 0;\n  let reset: NodeJS.Timeout;\n\n  return (e: KeyboardEvent) => {\n    if (e.key === Pattern[curr]) {\n      clearTimeout(reset);\n      reset = setTimeout(() => (curr = 0), 1000);\n      curr += 1;\n      if (curr === Pattern.length) {\n        action();\n        curr = 0;\n      }\n    } else {\n      curr = 0;\n    }\n  };\n};\n\nexport const register = (func: () => void) => {\n  const handler = buildHandler(func);\n  document.addEventListener(\"keydown\", handler);\n  return () => document.removeEventListener(\"keydown\", handler);\n};\n","import { useCallback, useDebugValue, useEffect, useRef, useState } from \"react\";\n\ntype JSONSafe = string | number | boolean | null | Array<JSONSafe> | { [l: string]: JSONSafe };\n\nexport const usePersistentState = <T = JSONSafe>(\n  key: string | null,\n  defaultValue: T,\n  persistOnLoad = false\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n  const mount = useRef(false);\n  const [value, setValue] = useState(() => {\n    const stored = key && localStorage.getItem(key);\n    if (stored === null) {\n      return defaultValue;\n    } else {\n      return JSON.parse(stored) as T;\n    }\n  });\n\n  useDebugValue({ [key || \"<nopersist>\"]: value });\n\n  const setter = useCallback((prevState: React.SetStateAction<T>) => {\n    setValue(prevState);\n  }, []);\n\n  useEffect(() => {\n    if (key && (mount.current || persistOnLoad)) {\n      localStorage.setItem(key, JSON.stringify(value));\n    } else {\n      mount.current = true;\n    }\n  }, [key, value, persistOnLoad]);\n\n  return [value, setter];\n};\n","import { createContext, useContext, useEffect } from \"react\";\nimport { buildHandler } from \"./konami\";\nimport { usePersistentState } from \"./usePersistentState\";\n\nconst DebugContext = createContext(false);\n\nexport const useDebugContext = () => useContext(DebugContext);\n\nconst Debug = (props: { children: React.ReactNode }) => {\n  const [debug, setDebug] = usePersistentState(\"debug_mode\", false);\n\n  useEffect(() => {\n    const incorrect = buildHandler(() => alert(\"You really tried that? Really?\"));\n    const handler = (e: KeyboardEvent) => {\n      if (e.key === \".\" && e.metaKey && e.shiftKey) {\n        setDebug((d) => !d);\n      }\n      incorrect(e);\n    };\n    document.addEventListener(\"keydown\", handler);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handler);\n    };\n  }, [setDebug]);\n\n  // Register a way to toggle debugging for iOS, etc. disable in production\n  useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      window.toggleDebug = () => setDebug((d) => !d);\n    }\n  }, [setDebug]);\n\n  return <DebugContext.Provider value={debug}>{props.children}</DebugContext.Provider>;\n};\n\nexport default Debug;\n","import { useCallback, useRef, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Button, Grid, TextField, Tooltip, Typography } from \"@material-ui/core\";\nimport { computeHash } from \"../../utils/validation\";\n\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\n\ninterface Props {\n  prompt?: string;\n  salt?: string;\n  debug?: boolean;\n  name?: string | null;\n  onSubmit?: (name: string) => void;\n  controls?: React.ReactNode;\n}\n\nconst DEFAULTS = {\n  prompt: \"Name\",\n  debug: false,\n} as const;\n\nconst SubmitCode = (props: Props) => {\n  const { salt, debug, prompt, name: existingName, onSubmit, controls } = { ...DEFAULTS, ...props };\n  const [name, setName] = useState<string>(existingName || \"\");\n  const [run, setRun] = useState(!!existingName);\n  const [open, setOpen] = useState(false);\n  const inputRef = useRef<HTMLInputElement>();\n  const timer = useRef<number | undefined>();\n\n  const { result } = useAsync(computeHash, [name, salt, run]);\n\n  const displayValue = result ? result : name;\n\n  const copyText = useCallback(() => {\n    if (inputRef.current) {\n      const e = inputRef.current;\n      e.select();\n      e.setSelectionRange(0, e.value.length);\n      document.execCommand(\"copy\");\n      setOpen(true);\n      window.clearTimeout(timer.current);\n      timer.current = window.setTimeout(() => setOpen(false), 2000);\n    }\n  }, []);\n\n  const button = run ? (\n    <Button variant=\"contained\" color=\"primary\" onClick={copyText} startIcon={<AssignmentIcon />}>\n      Copy\n    </Button>\n  ) : (\n    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n      Submit\n    </Button>\n  );\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (name.trim()) {\n      setRun(true);\n      if (onSubmit) {\n        onSubmit(name);\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Grid container spacing={2} alignItems=\"center\" justify=\"center\">\n        <Grid item xs={12} sm={10} md={8} lg={6}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Congratulations on finishing this assignment! Type your {prompt} below and hit submit to\n            receive a unique code for completion.\n          </Typography>\n          <Tooltip\n            PopperProps={{\n              disablePortal: true,\n            }}\n            open={open}\n            disableFocusListener\n            disableHoverListener\n            disableTouchListener\n            title={<Typography variant=\"subtitle2\">Copied code!</Typography>}\n          >\n            <TextField\n              label={!!result ? \"Validation code\" : prompt}\n              variant=\"filled\"\n              InputProps={{\n                readOnly: !!result,\n              }}\n              inputRef={inputRef}\n              fullWidth\n              onChange={(e) => setName(e.target.value)}\n              value={displayValue}\n            />\n          </Tooltip>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container justify=\"center\" alignItems=\"center\" spacing={2}>\n            <Grid item>{button}</Grid>\n            {debug && (\n              <Grid item>\n                <Button variant=\"contained\" color=\"primary\" onClick={() => setRun(false)}>\n                  Reset\n                </Button>\n              </Grid>\n            )}\n            {controls && <Grid item>{controls}</Grid>}\n          </Grid>\n        </Grid>\n      </Grid>\n    </form>\n  );\n};\n\nexport default SubmitCode;\n","import { RefObject, useCallback, useDebugValue, useLayoutEffect, useReducer, useRef } from \"react\";\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface ValueAction<T, V = string> extends Action<T> {\n  value: V;\n}\n\nenum Op {\n  Delete,\n  Append,\n  Set,\n  Type,\n  MoveCursor,\n}\n\ntype Actions =\n  | Action<Op.Delete>\n  | ValueAction<Op.Append>\n  | ValueAction<Op.Set>\n  | ValueAction<Op.Type>\n  | Action<Op.MoveCursor>;\n\ninterface State {\n  cursor: number;\n  cursorAfter: number;\n  value: string;\n  ref: RefObject<HTMLInputElement>;\n}\n\nfunction reducer(state: State, action: Actions): State {\n  const { value } = state;\n\n  const focused = state.ref.current === document.activeElement || action.type === Op.MoveCursor;\n  // make broad assumptions about never having a large cursor selection\n  const cursor = focused ? state.ref.current?.selectionStart || 0 : state.cursor;\n  const cursorAfter = focused ? state.ref.current?.selectionEnd || cursor : state.cursorAfter;\n\n  const newState = (updates: Partial<State>): State => {\n    const cursorAfter =\n      updates.cursorAfter !== undefined\n        ? updates.cursorAfter\n        : updates.cursor !== undefined\n        ? updates.cursor\n        : state.cursorAfter;\n    return { ...state, ...updates, cursorAfter };\n  };\n\n  switch (action.type) {\n    case Op.Delete:\n      if (cursor !== cursorAfter) {\n        return newState({\n          cursor,\n          cursorAfter: cursor,\n          value: value.slice(0, cursor) + value.slice(cursorAfter, value.length),\n        });\n      } else if (cursor === 0) {\n        return state;\n      } else {\n        const v = newState({\n          cursor: cursor - 1,\n          value: value.slice(0, cursor - 1) + value.slice(cursor, value.length),\n        });\n        return v;\n      }\n    case Op.Append:\n      return newState({\n        cursor: cursor + action.value.length,\n        value: value.slice(0, cursor) + action.value + value.slice(cursorAfter, value.length),\n      });\n    case Op.Set:\n      return newState({ value: action.value, cursor: action.value.length });\n    case Op.Type:\n      return newState({ cursor, cursorAfter, value: action.value });\n    case Op.MoveCursor:\n      return newState({ cursor, cursorAfter });\n  }\n}\n\nconst useKeyboard = () => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [{ cursor, cursorAfter, value }, dispatch] = useReducer(reducer, {\n    cursor: 0,\n    cursorAfter: 0,\n    value: \"\",\n    ref: inputRef,\n  });\n\n  const handleKeyboard = useCallback(\n    (char: string) => dispatch({ type: Op.Append, value: char }),\n    []\n  );\n  const handleType = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => dispatch({ type: Op.Type, value: e.target.value }),\n    []\n  );\n  const handleDelete = useCallback(() => dispatch({ type: Op.Delete }), []);\n  const setValue = useCallback((val: string) => dispatch({ type: Op.Set, value: val }), []);\n\n  useLayoutEffect(() => {\n    const currentFocus = document.activeElement as HTMLElement;\n    const currRef = inputRef.current;\n\n    const updateRange = () => {\n      // the focus call should be optional, but eh\n      currRef?.focus({ preventScroll: true });\n      currRef?.setSelectionRange(cursor, cursorAfter);\n    };\n    const moveCursor = () => {\n      dispatch({ type: Op.MoveCursor });\n    };\n\n    if (currentFocus === currRef) {\n      updateRange();\n    }\n\n    currRef?.addEventListener(\"focus\", updateRange);\n    currRef?.addEventListener(\"blur\", moveCursor);\n    return () => {\n      currRef?.removeEventListener(\"focus\", updateRange);\n      currRef?.removeEventListener(\"blur\", moveCursor);\n    };\n  }, [cursor, cursorAfter]);\n\n  useDebugValue({ cursor: cursor, value: value });\n\n  return { handleKeyboard, handleDelete, handleType, setValue, value, ref: inputRef };\n};\n\nexport default useKeyboard;\n","import { KeyboardEvent, RefObject, useCallback, useEffect, useState } from \"react\";\n\nimport {\n  Collapse,\n  Fade,\n  FormControl,\n  FormHelperText,\n  IconButton,\n  InputAdornment,\n  InputLabel,\n  OutlinedInput,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from \"@material-ui/core\";\nimport BackspaceOutlinedIcon from \"@material-ui/icons/BackspaceOutlined\";\nimport CheckIcon from \"@material-ui/icons/Check\";\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    \"&:not(.MuiInputLabel-shrink)\": {\n      [theme.breakpoints.up(\"lg\")]: {\n        fontSize: \"2rem\",\n      },\n      fontSize: \"1.5rem\",\n    },\n  },\n  input: {\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"2rem\",\n    },\n    fontSize: \"1.5rem\",\n    \"&> fieldset > legend > span\": {\n      fontSize: \"0.75rem\",\n    },\n  },\n  noRightMargin: {\n    marginRight: 0,\n  },\n  helpTextSize: {\n    fontSize: \"1rem\",\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"1.5rem\",\n    },\n  },\n}));\n\nconst preventDefault = (e: any) => e.preventDefault();\n\nexport interface Props {\n  inputRef: RefObject<HTMLInputElement>;\n  value: string;\n  onType: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onDelete: () => void;\n  // optional header stuff\n  header?: React.ReactNode;\n  onCheck?: (val: string) => void;\n  checkDescription?: string;\n\n  error?: boolean;\n  helpText?: string;\n  placeholder?: string;\n  headerTooltip?: string;\n}\n\nconst IPAInput = (props: Props) => {\n  const classes = useStyles();\n  const {\n    placeholder = \"Type IPA\",\n    value,\n    onType,\n    onDelete,\n    inputRef,\n    header,\n    onCheck,\n    checkDescription,\n    error,\n    helpText,\n    headerTooltip,\n  } = props;\n\n  const [open, setOpen] = useState(false);\n\n  // This should be fine (famous last words...)\n  const handleSubmit = useCallback(() => {\n    onCheck && onCheck(inputRef.current?.value || \"\");\n  }, [onCheck, inputRef]);\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLDivElement>) => {\n      if (e.key === \"Enter\") {\n        handleSubmit();\n      }\n    },\n    [handleSubmit]\n  );\n\n  const check = onCheck && (\n    <Tooltip title={checkDescription || \"Submit IPA Symbol or End Word\"} enterDelay={500}>\n      <IconButton aria-label=\"check\" onMouseDown={preventDefault} onClick={handleSubmit}>\n        <CheckIcon />\n      </IconButton>\n    </Tooltip>\n  );\n\n  const helperText = helpText && (\n    <Typography variant=\"body2\" component=\"span\" className={classes.helpTextSize}>\n      {helpText}\n    </Typography>\n  );\n\n  useEffect(() => {\n    if (header && headerTooltip) {\n      setOpen(true);\n      window.setTimeout(() => setOpen(false), 1500);\n    }\n  }, [header, headerTooltip]);\n\n  const headerContent = header && (\n    <InputAdornment\n      disablePointerEvents\n      disableTypography\n      position=\"start\"\n      classes={{ positionStart: classes.noRightMargin }}\n    >\n      {headerTooltip ? (\n        <Tooltip\n          open={open}\n          disableFocusListener\n          disableHoverListener\n          disableTouchListener\n          placement=\"bottom-end\"\n          TransitionComponent={Fade}\n          TransitionProps={{ timeout: 400 }}\n          title={<Typography variant=\"subtitle2\">{headerTooltip}</Typography>}\n        >\n          <span>{header}</span>\n        </Tooltip>\n      ) : (\n        header\n      )}\n    </InputAdornment>\n  );\n\n  return (\n    <FormControl fullWidth error={error} variant=\"outlined\">\n      <InputLabel htmlFor=\"ipa-typer\" className={classes.label}>\n        {placeholder}\n      </InputLabel>\n      <OutlinedInput\n        id=\"ipa-typer\"\n        label={placeholder}\n        onKeyPress={handleEnter}\n        className={classes.input}\n        onChange={onType}\n        value={value}\n        inputRef={inputRef}\n        inputProps={{\n          spellCheck: \"false\",\n          autoCorrect: \"off\",\n          autoComplete: \"off\",\n          style: { lineHeight: 2 },\n        }}\n        endAdornment={\n          <InputAdornment position=\"end\">\n            <Tooltip title=\"Delete\" enterDelay={500}>\n              <IconButton aria-label=\"delete\" onMouseDown={preventDefault} onClick={onDelete}>\n                <BackspaceOutlinedIcon />\n              </IconButton>\n            </Tooltip>\n            {check}\n          </InputAdornment>\n        }\n        startAdornment={headerContent}\n      />\n      {/* Look into changing this to be a tool tip possibly */}\n      <Collapse in={error}>\n        <FormHelperText error variant=\"outlined\">\n          {helperText}\n        </FormHelperText>\n      </Collapse>\n    </FormControl>\n  );\n};\n\nexport default IPAInput;\n","import { useMemo } from \"react\";\nimport { Theme, darken, fade, lighten } from \"@material-ui/core/styles\";\n\nexport interface Clickable {\n  onClick?: (char: string) => void;\n}\n\nexport interface ClickableSubset extends Clickable {\n  subset?: Subset;\n}\n\ntype SubsetFunc = (char: string) => boolean;\nexport type Subset = undefined | Set<string> | string[] | SubsetFunc;\n\nexport const subsetFunc = (subset: Subset): SubsetFunc => {\n  if (subset === undefined) {\n    return () => true;\n  } else if (typeof subset === \"function\") {\n    return subset;\n  } else if (Array.isArray(subset)) {\n    const set = new Set(subset);\n    return (char) => set.has(char);\n  } else {\n    return (char) => subset.has(char);\n  }\n};\n\nexport const useSubset = (subset: Subset): SubsetFunc => {\n  return useMemo(() => subsetFunc(subset), [subset]);\n};\n\nexport const borderColor = (theme: Theme) =>\n  theme.palette.type === \"light\"\n    ? lighten(fade(theme.palette.divider, 1), 0.88)\n    : darken(fade(theme.palette.divider, 1), 0.68);\n\nexport const shadowBorder = (size: string, color: string) => {\n  return `${size} 0 0 0 ${color}, 0 ${size} 0 0 ${color}, ${size} ${size} 0 0 ${color}, ${size} 0 0 0 ${color} inset, 0 ${size} 0 0 ${color} inset`;\n};\n\nexport const colToWidth = (c?: number) => (c === 2 ? 6 : c === 3 ? 4 : 12);\n","import { memo, useCallback } from \"react\";\n\nimport clsx from \"clsx\";\nimport { ClickableSubset, borderColor, useSubset } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { IMPOSSIBLE, MANNERS, NOT_USED, PLACES, PULMONICS } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  symbol: {\n    padding: theme.spacing(0, 0.5),\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n    cursor: \"default\",\n    color: theme.palette.action.disabled,\n  },\n  clickable: {\n    color: theme.palette.text.primary,\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  impossible: {\n    backgroundColor: theme.palette.action.disabledBackground,\n    color: \"transparent\",\n    cursor: \"default\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.disabledBackground,\n    },\n  },\n  leftSideBorder: {\n    borderLeft: `1px solid ${borderColor(theme)}`,\n  },\n  rightSideBorder: {\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  caps: {\n    padding: \"6px 5.5px\",\n  },\n  header: {\n    minWidth: \"56px\",\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends ClickableSubset {}\n\nconst Pulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick, subset } = props;\n  const canClick = useSubset(subset);\n  const clickCallback = useCallback(\n    (char) =>\n      char !== IMPOSSIBLE && char !== NOT_USED && onClick && canClick(char)\n        ? () => onClick(char)\n        : undefined,\n    [onClick, canClick]\n  );\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  // Create each of the voiced/voiceless cell pairs\n  const Cell = useCallback(\n    ({ x, y }: { x: number; y: number }) => {\n      const voiceless = PULMONICS[y]?.[x * 2];\n      const voiced = PULMONICS[y]?.[x * 2 + 1];\n\n      // Ignore borders around the Dental-Postalveolar column, except for fricatives\n      const hasBorders = x < 2 || x > 4 || y === 4;\n\n      return (\n        <>\n          <TableCell\n            align=\"center\"\n            className={clsx(\n              classes.symbol,\n              voiceless && canClick(voiceless) && classes.clickable,\n              voiceless === IMPOSSIBLE && classes.impossible,\n              hasBorders && classes.leftSideBorder\n            )}\n            padding=\"none\"\n            onClick={clickCallback(voiceless)}\n            onMouseDown={preventDefault}\n          >\n            {voiceless}\n          </TableCell>\n          <TableCell\n            align=\"center\"\n            className={clsx(\n              classes.symbol,\n              voiced && canClick(voiced) && classes.clickable,\n              voiced === IMPOSSIBLE && classes.impossible,\n              hasBorders && classes.rightSideBorder\n            )}\n            padding=\"none\"\n            onClick={clickCallback(voiced)}\n            onMouseDown={preventDefault}\n          >\n            {voiced}\n          </TableCell>\n        </>\n      );\n    },\n    [canClick, classes, clickCallback, preventDefault]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <TableHead>\n          <TableRow>\n            <TableCell>{/* Filler for articulation row */}</TableCell>\n            {PLACES.map((place) => (\n              <TableCell\n                key={`keyboard-place-${place}`}\n                align=\"center\"\n                className={clsx(classes.header, classes.caps)}\n                colSpan={2}\n                padding=\"none\"\n              >\n                {place}\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {MANNERS.map((manner, y) => (\n            <TableRow key={`keyboard-manner-${manner}`}>\n              <TableCell className={classes.caps}>{manner}</TableCell>\n              {PLACES.map((place, x) => (\n                <Cell key={`keyboard-l-${manner}-${place}`} x={x} y={y} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default memo(Pulmonics);\n","import { memo, useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\n\nimport { ClickableSubset, borderColor, useSubset } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { CLICKS, EJECTIVES, IMPLOSIVES } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  symbol: {\n    padding: theme.spacing(0.75, 1),\n    textAlign: \"center\",\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n    borderLeft: `1px solid ${borderColor(theme)}`,\n  },\n  disabled: {\n    cursor: \"default\",\n    color: theme.palette.action.disabled,\n  },\n  clickable: {\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  descr: {\n    fontSize: \"0.8rem\",\n    verticalAlign: \"middle\",\n    padding: theme.spacing(0, 0.5),\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  header: {\n    padding: theme.spacing(0.75, 1.5),\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends ClickableSubset {}\n\nconst NonPulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick, subset } = props;\n  const canClick = useSubset(subset);\n\n  const sounds = useMemo(() => {\n    return CLICKS.map((click, i) => [click, IMPLOSIVES[i], EJECTIVES[i]]);\n  }, []);\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const Cell = useCallback(\n    ({ symbol, name }: { symbol: string; name: string }) => {\n      const handleClick = onClick && canClick(symbol) ? () => onClick(symbol) : undefined;\n      return (\n        <>\n          <TableCell\n            className={clsx(\n              classes.symbol,\n              canClick(symbol) ? classes.clickable : classes.disabled\n            )}\n            onClick={handleClick}\n            onMouseDown={preventDefault}\n          >\n            {symbol}\n          </TableCell>\n          <TableCell className={classes.descr}>{name}</TableCell>\n        </>\n      );\n    },\n    [classes, onClick, preventDefault, canClick]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Clicks\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Voiced implosives\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Ejectives\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {sounds.map((row, i) => (\n            <TableRow key={`keyboard-nonpulmonic-${i}`}>\n              {row.map(([symbol, name], j) => (\n                <Cell key={`keyboard-nonpulmonic-${i}-${j}`} symbol={symbol} name={name} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default memo(NonPulmonics);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"g\", {\n  strokeWidth: 4,\n  fill: \"none\",\n  strokeLinecap: \"butt\",\n  strokeLinejoin: \"miter\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 17.74l950.68-.94L976 683.2l-477.16-1.23L24 17.74zM499.85 17.74l235.9 664.23M183.29 239.78l791.4-.94\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M343.58 461.81l629.09-1.88h1V459\"\n}));\n\nfunction SvgTrapezium({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1000 700\",\n    preserveAspectRatio: \"none\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref);\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrapezium);\nexport default __webpack_public_path__ + \"static/media/trapezium.dacff88a.svg\";\nexport { ForwardRef as ReactComponent };","import { memo, useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { ClickableSubset, useSubset } from \"./common\";\n\nimport { Box, Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Coords, VOWELS, VOWEL_FRONTEDNESS, VOWEL_HEIGHTS, VowelLiteral } from \"../../utils/ipa\";\n\nimport { ReactComponent as Trapezium } from \"./trapezium.svg\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  outerQuad: {\n    padding: theme.spacing(1, 3),\n    fontSize: \"1.5rem\",\n    position: \"relative\",\n    height: \"100%\",\n    minHeight: \"275px\",\n    minWidth: \"270px\",\n  },\n  fullRel: {\n    height: \"100%\",\n    width: \"100%\",\n    position: \"relative\",\n  },\n  trapezium: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    stroke: theme.palette.text.primary,\n  },\n  quad: {\n    position: \"absolute\",\n    height: \"95%\",\n    width: \"95%\",\n    left: \"2.5%\",\n    top: \"2.75%\",\n  },\n  element: {\n    userSelect: \"none\",\n    cursor: \"default\",\n    position: \"absolute\",\n    transform: \"translate(-50%, -50%)\",\n    overflow: \"visible\",\n    width: \"1.2em\",\n    textAlign: \"center\",\n    \"& > div\": {\n      display: \"inline-block\",\n    },\n  },\n  rounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    left: \"0.75em\",\n  },\n  unrounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    right: \"0.75em\",\n  },\n  mid: {\n    width: \"100%\",\n  },\n  clickable: {\n    cursor: \"pointer\",\n    \"&:hover\": {\n      borderRadius: \"3px\",\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  disabled: { color: theme.palette.action.disabled },\n  paperBack: {\n    \"&::before\": {\n      zIndex: \"-1\",\n      left: \"0\",\n      content: \"''\",\n      borderRadius: \"3px\",\n      position: \"absolute\",\n      display: \"inline-block\",\n      width: \"1.2em\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.paper,\n    },\n  },\n  fullHeight: {\n    height: \"100%\",\n  },\n  vowelPos: {\n    padding: theme.spacing(0, 2),\n  },\n  vowelHeight: {\n    padding: theme.spacing(0.5, 0),\n  },\n}));\n\ninterface Props extends ClickableSubset {}\n\nconst vowelCoords = ([x, y]: Coords): { left: string; top: string } => {\n  const offset = y * 0.5;\n  const val = offset + (1 - offset) * x;\n  return { left: `${val * 100}%`, top: `${y * 100}%` };\n};\n\n/**\n * Vowel chart\n */\nconst Vowels = (props: Props) => {\n  const classes = useStyles();\n  const { onClick, subset } = props;\n  const canClick = useSubset(subset);\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n  const clickCallback = useCallback(\n    (symbol) => (onClick && canClick(symbol) ? () => onClick(symbol) : undefined),\n    [canClick, onClick]\n  );\n  const clickable = useCallback(\n    (symbol) => (canClick(symbol) ? classes.clickable : classes.disabled),\n    [canClick, classes]\n  );\n\n  const VowelElement = useCallback(\n    ({ vowels, coords }: { vowels: VowelLiteral; coords: Coords }) => {\n      if (typeof vowels === \"string\") {\n        const vowel = vowels;\n        return (\n          <Box className={clsx(classes.element, classes.paperBack)} style={vowelCoords(coords)}>\n            <div\n              className={clsx(classes.mid, clickable(vowel))}\n              onClick={clickCallback(vowel)}\n              onMouseDown={preventDefault}\n            >\n              {vowel}\n            </div>\n          </Box>\n        );\n      } else {\n        const noCenter = vowels.join(\"\").length < 2;\n        // Zero width space or dot\n        const center = noCenter ? \"\\u00A0\" : \"\";\n        const [unrounded, rounded] = vowels;\n        return (\n          <Box\n            className={clsx(classes.element, { [classes.paperBack]: !noCenter })}\n            style={vowelCoords(coords)}\n          >\n            {center}\n            <div\n              className={clsx(classes.unrounded, clickable(unrounded), classes.paperBack)}\n              onClick={clickCallback(unrounded)}\n              onMouseDown={preventDefault}\n            >\n              {unrounded}\n            </div>\n            <div\n              className={clsx(classes.rounded, clickable(rounded), classes.paperBack)}\n              onClick={clickCallback(rounded)}\n              onMouseDown={preventDefault}\n            >\n              {rounded}\n            </div>\n          </Box>\n        );\n      }\n    },\n    [clickable, classes, clickCallback, preventDefault]\n  );\n\n  const vowelChart = useMemo(\n    () => (\n      <Box className={classes.outerQuad}>\n        <div className={classes.fullRel}>\n          <Trapezium className={classes.trapezium} />\n          <div className={classes.quad}>\n            {VOWELS.map(([vowels, coords]) => (\n              <VowelElement key={`vowelbox-${vowels}`} vowels={vowels} coords={coords} />\n            ))}\n          </div>\n        </div>\n      </Box>\n    ),\n    [classes, VowelElement]\n  );\n\n  return (\n    <Box id=\"vowelQuad\" className={classes.root}>\n      <Grid container className={classes.fullHeight} wrap=\"nowrap\">\n        <Grid item>\n          <Grid container direction=\"column\" className={clsx(classes.fullHeight)}>\n            <Typography variant=\"body1\" component=\"p\">\n              &#8203;\n            </Typography>\n            <Grid item xs>\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"space-between\"\n                className={clsx(classes.fullHeight, classes.vowelHeight)}\n              >\n                {VOWEL_HEIGHTS.map((height) => (\n                  <Typography key={height} variant=\"body1\" component=\"p\">\n                    {height}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs>\n          <Grid container direction=\"column\" className={classes.fullHeight}>\n            <Grid item>\n              <Grid container justify=\"space-between\" className={classes.vowelPos}>\n                {VOWEL_FRONTEDNESS.map((pos) => (\n                  <Typography key={pos} variant=\"body1\" component=\"p\">\n                    {pos}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              {vowelChart}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default memo(Vowels);\n","import { memo, useCallback } from \"react\";\nimport { ClickableSubset, borderColor, shadowBorder, useSubset } from \"./common\";\n\nimport clsx from \"clsx\";\n\nimport { Grid, GridProps } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { MiscList } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  symbol: {\n    userSelect: \"none\",\n    textAlign: \"center\",\n    fontSize: \"1.5rem\",\n    cursor: \"default\",\n    color: theme.palette.action.disabled,\n  },\n  clickable: {\n    color: theme.palette.text.primary,\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  description: {\n    padding: \"2px\",\n    fontSize: \"0.8rem\",\n  },\n  descriptionParent: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    height: \"100%\",\n  },\n  bordered: {\n    boxShadow: shadowBorder(\"1px\", borderColor(theme)),\n  },\n}));\n\ntype Breakpoints = Pick<GridProps, \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\">;\n\ninterface Props extends ClickableSubset {\n  content: MiscList;\n  genSym?: (ipa: string) => string;\n  breakpoints?: Breakpoints;\n  combine?: boolean;\n}\n\nconst GridDisplay = (props: Props) => {\n  const classes = useStyles();\n  const { onClick, content, breakpoints = {}, genSym = (ipa) => ipa, combine, subset } = props;\n  const canClick = useSubset(subset);\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const clickCallback = useCallback(\n    (symbol) => (onClick && canClick(symbol) ? () => onClick(symbol) : undefined),\n    [canClick, onClick]\n  );\n\n  return (\n    <Grid container spacing={0}>\n      {content.map(({ ipa, sym, description, examples }) => (\n        <Grid item xs={12} {...breakpoints} key={description} className={classes.bordered}>\n          <Grid container>\n            <Grid\n              item\n              // Nasty hasck for making the free form entry for ipa_sound_metadata.yaml work\n              xs={(sym && sym.length > 8) || 2}\n              className={clsx(classes.symbol, canClick(ipa) && classes.clickable)}\n              onClick={clickCallback(ipa)}\n              onMouseDown={preventDefault}\n            >\n              {sym || genSym(ipa)}\n            </Grid>\n            <Grid item xs>\n              <div className={classes.descriptionParent}>\n                <div className={classes.description}>{description}</div>\n              </div>\n            </Grid>\n            {/* Forgive me father, for I have sinned. I never should have used this much indentation */}\n            {examples?.map((char) => {\n              const combined = combine ? `${char}${ipa}` : char;\n              return (\n                <Grid\n                  key={combined}\n                  item\n                  xs={2}\n                  className={clsx(classes.symbol, canClick(combined) && classes.clickable)}\n                  onClick={clickCallback(combined)}\n                  onMouseDown={preventDefault}\n                >\n                  {combined}\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default memo(GridDisplay);\n","import { memo } from \"react\";\nimport { ClickableSubset } from \"./common\";\nimport { DIACRITICS, FILLER } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nexport const breakpoints = { md: 4, sm: 6 } as const;\n\nconst Diacritics = (props: ClickableSubset) => {\n  return (\n    <GridDisplay\n      {...props}\n      content={DIACRITICS}\n      breakpoints={breakpoints}\n      genSym={(ipa) => `${FILLER}${ipa}`}\n      combine\n    />\n  );\n};\n\nexport default memo(Diacritics);\n","import { memo } from \"react\";\nimport { ClickableSubset } from \"./common\";\nimport { MISC } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nexport const breakpoints = { sm: 6 } as const;\n\nconst Other = (props: ClickableSubset) => {\n  return <GridDisplay {...props} content={MISC} breakpoints={breakpoints} />;\n};\n\nexport default memo(Other);\n","import { memo } from \"react\";\nimport { ClickableSubset } from \"./common\";\nimport { SUPRASEGMENTALS } from \"../../utils/ipa\";\nimport GridDisplay from \"./GridDisplay\";\n\nexport const breakpoints = { md: 12, sm: 6, xs: 12 } as const;\n\nconst Suprasegmentals = (props: ClickableSubset) => {\n  return <GridDisplay {...props} content={SUPRASEGMENTALS} breakpoints={breakpoints} />;\n};\n\nexport default memo(Suprasegmentals);\n","import { ReactElement, memo } from \"react\";\nimport { Grid, Paper, Typography, makeStyles } from \"@material-ui/core\";\n\nimport Pulmonics from \"./Pulmonics\";\nimport { Clickable, ClickableSubset, colToWidth, subsetFunc } from \"./common\";\nimport NonPulmonics from \"./NonPulmonics\";\nimport Vowels from \"./Vowels\";\nimport Diacritics from \"./Diacritics\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\nimport Other from \"./Other\";\nimport Suprasegmentals from \"./Suprasegmentals\";\nimport React from \"react\";\nimport { KeyboardDef } from \"../../utils/parsers\";\nimport GridDisplay from \"./GridDisplay\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(1),\n    height: \"100%\",\n  },\n  childOrder: {\n    // Allow reordering the children of this element.\n    // This has the additional benefit of allowing an \"IPA\" setting\n    // On larger screens, show \"other\" left of \"vowels\"\n    [theme.breakpoints.up(\"md\")]: orderChildren(1, 3, 2),\n  },\n}));\n\nconst orderChildren = (...children: number[]) => {\n  let styles: CSSProperties = { \"& > *\": { order: 100 } };\n  children.forEach((child, i) => {\n    styles[`& > :nth-child(${i + 1})`] = { order: child };\n  });\n  return styles;\n};\n\ninterface Props extends ClickableSubset {\n  // Optional set of keys which are allowed. Replaces the subset argument.\n  keys?: KeyboardDef;\n}\ninterface BaseProps extends Props {\n  children?: ClickableNode;\n}\nexport const BaseKeyboard = (props: BaseProps) => {\n  const classes = useStyles();\n  const { onClick, subset, children } = props;\n\n  return (\n    // 1\n    <Grid container spacing={2} className={classes.childOrder}>\n      <ApplyClickableSubset subset={subset} onClick={onClick}>\n        <Item\n          size=\"full\"\n          header=\"Consonants (Pulmonics)\"\n          footer=\"Symbols to the right in a cell are voiced, to the left are voiceless. Shaded areas denote articulations judged impossible.\"\n        >\n          <Pulmonics />\n        </Item>\n        <Item size=\"half\">\n          <Vowels />\n        </Item>\n        <Item size=\"half\" header=\"Other\">\n          <Other />\n        </Item>\n      </ApplyClickableSubset>\n      <ApplyClickableSubset subset={subset} onClick={onClick}>\n        {children}\n      </ApplyClickableSubset>\n    </Grid>\n  );\n};\n\ntype ClickableElement = ReactElement<ClickableSubset> | undefined;\ntype ClickableNode = ClickableElement | ClickableElement[] | undefined;\ninterface ApplyProps extends ClickableSubset {\n  children: ClickableNode;\n}\nconst ApplyClickableSubset = (props: ApplyProps) => {\n  const { onClick, subset, children } = props;\n  return (\n    <>\n      {React.Children.map(\n        children,\n        (child) => child && React.cloneElement(child, { subset, onClick })\n      )}\n    </>\n  );\n};\n\nconst SubsetKeyboard = (props: Clickable & { keys: KeyboardDef }) => {\n  const { onClick, keys } = props;\n\n  const sections: ClickableElement[] = [];\n  if (keys.nonPulmonics) {\n    sections.push(\n      <Item size=\"half\" header=\"Consonants (Non-pulmonics)\">\n        <NonPulmonics />\n      </Item>\n    );\n  }\n  const ipa = [...keys.symbols];\n  keys.sections?.forEach(({ symbols, columns, name }) => {\n    symbols.forEach(({ ipa: s }) => ipa.push(s));\n    const list = symbols.map(({ ipa, description }) => ({\n      ipa,\n      sym: ipa,\n      description,\n    }));\n\n    const width = colToWidth(columns);\n\n    sections.push(\n      <Item size=\"half\" header={name} key={name}>\n        <GridDisplay content={list} breakpoints={{ xs: width }} />\n      </Item>\n    );\n  });\n  const subset = subsetFunc(ipa);\n  return <BaseKeyboard onClick={onClick} subset={subset} children={sections} />;\n};\n\n/**\n * Accepts an onClick option. This is assumed to be memoized.\n * If you don't memoize onClick, you WILL have a bad day.\n */\nconst Keyboard = (props: Props) => {\n  const { onClick, subset, keys } = props;\n  if (keys && keys.symbols.length > 0) {\n    return <SubsetKeyboard onClick={onClick} keys={keys} />;\n  }\n\n  return (\n    // 1\n    <BaseKeyboard onClick={onClick} subset={subset}>\n      <Item size=\"more\" header=\"Diacritics\">\n        <Diacritics />\n      </Item>\n\n      <Item size=\"less\" header=\"Suprasegmentals\">\n        <Suprasegmentals />\n      </Item>\n\n      <Item size=\"half\" header=\"Consonants (Non-pulmonics)\">\n        <NonPulmonics />\n      </Item>\n    </BaseKeyboard>\n  );\n};\n\nconst sizes = {\n  full: undefined,\n  more: 8,\n  half: 6,\n  less: 4,\n} as const;\n\ninterface ItemProps extends ClickableSubset {\n  header?: string;\n  footer?: string;\n  children: ReactElement<ClickableSubset>;\n  size: keyof typeof sizes;\n}\nexport const Item = ({ header, footer, children, size, subset, onClick }: ItemProps) => {\n  const classes = useStyles();\n\n  const child = React.Children.only(children);\n  return (\n    <Grid item xs={12} md={size && sizes[size]}>\n      <Paper className={classes.paper}>\n        {header && (\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            {header}\n          </Typography>\n        )}\n        {React.cloneElement(child, { subset, onClick })}\n        {footer && (\n          <Typography variant=\"caption\" align=\"center\" component=\"p\">\n            {footer}\n          </Typography>\n        )}\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default memo(Keyboard);\n","import { Box, Grid, Paper, makeStyles, useTheme } from \"@material-ui/core\";\n\nimport IPAInput, { Props as InputProps } from \"./IPAInput\";\nimport useKeyboard from \"./useKeyboard\";\n\n// const Keyboard = React.lazy(() => import(\"./Keyboard\"));\nimport Keyboard from \"./Keyboard\";\nimport { Subset } from \"./common\";\nimport { KeyboardDef } from \"../../utils/parsers\";\n\nconst useStyles = makeStyles((theme) => ({\n  sticky: {\n    pointerEvents: \"none\", // Prevent background centering overlapping content\n    zIndex: 10,\n    position: \"sticky\",\n    top: `${theme.spacing(-1)}px`,\n    marginBottom: `${theme.spacing(theme.palette.type === \"dark\" ? 0 : 1)}px`,\n  },\n  input: {\n    pointerEvents: \"auto\", // Restore pointer events\n    backgroundColor:\n      theme.palette.type === \"dark\"\n        ? theme.palette.background.default\n        : theme.palette.background.paper,\n    borderRadius: \"8px\",\n  },\n}));\n\ninterface Props extends InputProps {\n  handleKeyboard: ReturnType<typeof useKeyboard>[\"handleKeyboard\"];\n  subset?: Subset;\n  keys?: KeyboardDef;\n}\n\nconst StickyIPA = (props: Props) => {\n  const theme = useTheme();\n  const classes = useStyles();\n\n  const { handleKeyboard, subset, keys, ...inputProps } = props;\n\n  // Testing revealed an elevated paper was preferred in light mode and contrastive flat in dark mode\n  const elevation = theme.palette.type === \"dark\" ? 0 : 3;\n\n  return (\n    <div>\n      <Box paddingY={2} className={classes.sticky}>\n        <Grid container alignItems=\"center\" justify=\"center\" spacing={2}>\n          <Grid item xs md={8} component={Paper} elevation={elevation} className={classes.input}>\n            <IPAInput {...inputProps} />\n          </Grid>\n        </Grid>\n      </Box>\n\n      <Keyboard onClick={handleKeyboard} subset={subset} keys={keys} />\n    </div>\n  );\n};\n\nexport default StickyIPA;\n","import React, { useReducer } from \"react\";\n\nimport { Word } from \"../../utils/parsers/task\";\n\nconst ATTEMPTS_BEFORE_HINT = 5;\n\nexport enum Op {\n  Reset,\n  SoftReset,\n  SetHeader,\n  NextSegment,\n  ErrorMessage,\n  ClearError,\n}\n\nexport interface State {\n  word: Word;\n  segment: number;\n  header: string;\n  errorMessage?: string;\n  error: boolean;\n  attempt: number;\n}\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface SetAction<T, V> extends Action<T> {\n  value: V;\n}\n\ntype Act =\n  | SetAction<Op.Reset, Word>\n  | SetAction<Op.SoftReset, Word>\n  | SetAction<Op.SetHeader, string>\n  | SetAction<Op.NextSegment, string>\n  | SetAction<Op.ErrorMessage, string | undefined>\n  | Action<Op.ClearError>;\n\nconst reset = (word: Word) => {\n  return {\n    word,\n    segment: 0,\n    header: \"\",\n    error: false,\n    attempt: 0,\n  };\n};\n\nconst reducer = (state: State, action: Act): State => {\n  switch (action.type) {\n    case Op.SoftReset:\n      return Object.is(action.value, state.word) ? state : reset(action.value);\n    case Op.Reset:\n      return reset(action.value);\n    case Op.SetHeader:\n      return { ...state, header: action.value };\n    case Op.NextSegment: // Inc segment and add value to header\n      return {\n        ...state,\n        segment: state.segment + 1,\n        header: state.header + action.value,\n        attempt: 0,\n      };\n    case Op.ClearError:\n      return state.error ? { ...state, error: false } : state;\n    case Op.ErrorMessage:\n      const { attempt } = state;\n      const { hint } = state.word.segments[state.segment];\n      // if the user has failed too many times, display the hint instead of error message if it exists\n      const errorMessage = attempt >= ATTEMPTS_BEFORE_HINT && hint ? hint : action.value;\n      return { ...state, error: true, errorMessage, attempt: attempt + 1 };\n  }\n};\n\nexport const useWordInput = (word: Word) => {\n  return useReducer(reducer, word, reset);\n};\n\nexport type Dispatch = React.Dispatch<Act>;\n","import { useCallback, useEffect, useMemo } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core\";\n\nimport useKeyboard from \"../keyboard/useKeyboard\";\nimport StickyIPA from \"../keyboard/StickyIPA\";\n\nimport { KeyboardDef, Word, matchSegment } from \"../../utils/parsers/task\";\nimport { useDebugContext } from \"../../utils/Debug\";\nimport { Op, useWordInput } from \"./useWordInput\";\n\nconst useStyles = makeStyles((theme) => ({\n  correct: {\n    color: theme.palette.type === \"dark\" ? theme.palette.success.main : theme.palette.success.dark,\n  },\n}));\n\ninterface Props {\n  word: Word;\n  onSubmit: () => void;\n  keys?: KeyboardDef;\n}\n\nconst WordInput = (props: Props) => {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const { word, onSubmit: handleSubmit, keys } = props;\n  const { handleKeyboard, handleDelete, handleType, setValue, value, ref } = useKeyboard();\n  const [state, dispatch] = useWordInput(word);\n\n  useEffect(() => dispatch({ type: Op.SoftReset, value: word }), [word, dispatch]);\n  useEffect(() => dispatch({ type: Op.ClearError }), [value, dispatch]);\n\n  const handleCheck = useCallback(\n    (currentValue: string) => {\n      // Make life easier with debug mode\n      if (debug && currentValue === \"winston\") {\n        setValue(\"\");\n        dispatch({ type: Op.SetHeader, value: currentValue });\n        handleSubmit();\n        return;\n      }\n\n      // IDEA:  add an optional \"accept_multiple\" that will allow submission\n      //        of multiple segments at once.\n      const segment = word.segments[state.segment];\n      const match = matchSegment(currentValue, segment);\n      if (match.correct) {\n        dispatch({ type: Op.NextSegment, value: currentValue });\n        setValue(\"\"); // Clear the text box\n        if (segment.final) {\n          handleSubmit();\n        }\n      } else {\n        // If not a match, set the error text\n        dispatch({ type: Op.ErrorMessage, value: match.message });\n      }\n    },\n    [word, state.segment, setValue, handleSubmit, debug, dispatch]\n  );\n\n  const { header, error, errorMessage } = state;\n\n  const headerValue = useMemo(\n    () => header && <span className={classes.correct}>{header}</span>,\n    [header, classes.correct]\n  );\n\n  return (\n    <StickyIPA\n      placeholder={`Transcribe \"${word.display}\"`}\n      value={value}\n      onDelete={handleDelete}\n      onType={handleType}\n      inputRef={ref}\n      onCheck={handleCheck}\n      header={headerValue}\n      error={error}\n      helpText={errorMessage}\n      headerTooltip=\"Correct!\"\n      handleKeyboard={handleKeyboard}\n      keys={keys}\n    />\n  );\n};\n\nexport default WordInput;\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\n\nexport interface Props {\n  open: boolean;\n  onClose: (confirm: boolean) => void;\n  title: string;\n  body: string;\n}\n\nconst ConfirmDialog = (props: Props) => {\n  const { onClose, open, title, body } = props;\n\n  const handleCancel = () => {\n    onClose(false);\n  };\n\n  const handleOk = () => {\n    onClose(true);\n  };\n\n  return (\n    <Dialog\n      disableBackdropClick\n      disableEscapeKeyDown\n      maxWidth=\"xs\"\n      aria-labelledby=\"confirmation-dialog-title\"\n      open={open}\n    >\n      <DialogTitle id=\"confirmation-dialog-title\">{title}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>{body}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button autoFocus onClick={handleCancel} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={handleOk} color=\"primary\">\n          Ok\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ConfirmDialog;\n","import { memo, useMemo, useRef } from \"react\";\nimport { Button, Tooltip } from \"@material-ui/core\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\n\nexport const useAudioFile = (file?: string, baseUrl?: string): (() => void) | undefined => {\n  const hasSeekingIssues = useRef(false);\n\n  return useMemo(() => {\n    hasSeekingIssues.current = false;\n    // hey, it's easier just to use the function than figure it out...\n    const audioFile = (() => {\n      if (file) {\n        const audioUrl = new URL(file, baseUrl).toString();\n        const element = new Audio(audioUrl);\n        return element;\n      }\n    })();\n\n    if (!audioFile) return undefined;\n\n    return () => {\n      try {\n        if (!audioFile.paused) {\n          audioFile.currentTime = 0;\n        }\n        // There is a bug in recent versions of webkit (Safari 15) which causes\n        // the player to stall on seeking to the beginning of the audio file. If the file hasn't started\n        // or is already in memory, then seeking should be false after ~0 time, in which case we can be\n        // fairly confident everything is working correctly. OTHERWISE: we keep forcing this audio file\n        // to load after failing the check\n        if (hasSeekingIssues.current) {\n          console.info(\"This player has seeking issues. Forcing load\");\n          audioFile.load();\n        } else {\n          setTimeout(() => {\n            if (audioFile.seeking) {\n              console.log(\"Player has seeking issues. Switching to LOAD approach\");\n              hasSeekingIssues.current = true;\n              audioFile.load();\n              audioFile.play();\n            }\n          }, 50);\n        }\n        // audioFile.load();\n        audioFile.play().catch((e) => {\n          console.error({ message: \"unable to play url\", src: audioFile.src, err: e });\n        });\n      } catch (e) {\n        console.error({ message: \"unable to play url\", src: audioFile.src, err: e });\n      }\n    };\n  }, [file, baseUrl]);\n};\n\ninterface Props {\n  baseUrl: string;\n  file?: string;\n}\n\nconst PlayButton = (props: Props) => {\n  const { file, baseUrl } = props;\n  const playAudio = useAudioFile(file, baseUrl);\n\n  // A more robust method would be checking if the audio file loads, but there's no easy way\n  // to check this until after the play button is pressed.\n  const disabled = !playAudio;\n\n  return (\n    <Tooltip title={disabled ? \"No sound file to play\" : \"\"}>\n      <div>\n        <Button\n          title=\"Play sound\"\n          variant=\"contained\"\n          color=\"secondary\"\n          startIcon={<PlayCircleFilledIcon />}\n          onClick={playAudio}\n          disabled={disabled}\n        >\n          Play\n        </Button>\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default memo(PlayButton);\n","import { memo } from \"react\";\n\nimport { Paper, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  codeBlock: {\n    fontSize: \"1rem\",\n    padding: `${theme.spacing(1)}px`,\n  },\n  inline: {\n    padding: theme.spacing(0.25, 0.5),\n    \"pre &\": {\n      padding: 0,\n      boxShadow: \"none\",\n      borderRadius: 0,\n    },\n  },\n}));\n\ninterface Props {\n  block?: boolean;\n  children: React.ReactNode;\n}\n\nconst CodeBlock = (props: Props) => {\n  const classes = useStyles();\n  const { block, children } = props;\n\n  const comp = block ? \"pre\" : \"code\";\n  const klass = block ? classes.codeBlock : classes.inline;\n\n  return (\n    <Paper className={klass} component={comp}>\n      {children}\n    </Paper>\n  );\n};\n\nexport default memo(CodeBlock);\n","import { memo } from \"react\";\nimport Md from \"markdown-to-jsx\";\nimport { Checkbox, Link, LinkProps, Typography, TypographyProps } from \"@material-ui/core\";\nimport AppLink from \"./Link\";\nimport CodeBlock from \"./CodeBlock\";\n\ntype AnyURL = string | URL;\n\nconst URL_PATTERN = /^(https?:)?\\/\\//i;\n\ninterface Props {\n  baseUrl?: AnyURL;\n  paragraph?: Var;\n  children: string;\n  allowTags?: boolean;\n}\n\ntype Var = TypographyProps[\"variant\"];\n\nconst typeTag = (v: Var) =>\n  ({\n    component: Typography,\n    props: { variant: v, component: \"p\", gutterBottom: true },\n  } as const);\n\ninterface ImgProps extends React.ImgHTMLAttributes<HTMLImageElement> {\n  baseUrl?: AnyURL;\n}\n\nconst RelativeImg = (props: ImgProps) => {\n  const { baseUrl, src, ...imgProps } = props;\n  const imgSrc = baseUrl && src ? new URL(src, baseUrl).toString() : src;\n  // eslint-disable-next-line\n  return <img {...imgProps} src={imgSrc} />;\n};\n\nconst SmartLink = (props: LinkProps) => {\n  const { href, ...rest } = props;\n  if (href?.match(URL_PATTERN)) {\n    return <Link href={href} {...rest} />;\n  } else {\n    return <AppLink to={href || \"#\"} {...rest} />;\n  }\n};\n\nconst CustomInput = (props: React.ComponentProps<\"input\">) => {\n  if (props.type === \"checkbox\") {\n    return <Checkbox checked={props.checked} readOnly={props.readOnly} disabled={props.readOnly} />;\n  } else {\n    return <input {...props} />;\n  }\n};\n\nconst Markdown = (props: Props) => {\n  const { children, baseUrl, allowTags, paragraph = \"body1\" } = props;\n  const options = {\n    disableParsingRawHTML: !allowTags,\n    forceBlock: true,\n    overrides: {\n      img: { component: RelativeImg, props: { baseUrl } },\n      h1: typeTag(\"h1\"),\n      h2: typeTag(\"h2\"),\n      h3: typeTag(\"h3\"),\n      h4: typeTag(\"h4\"),\n      h5: typeTag(\"h5\"),\n      h6: typeTag(\"h6\"),\n      p: typeTag(paragraph),\n      a: { component: SmartLink },\n      pre: { component: CodeBlock, props: { block: true } },\n      code: { component: CodeBlock },\n      input: { component: CustomInput },\n    },\n  };\n\n  return <Md children={children} options={options} />;\n};\n\nexport default memo(Markdown);\n","import { memo, useCallback, useEffect, useReducer, useState } from \"react\";\nimport {\n  Box,\n  Button,\n  Collapse,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Fade,\n  Grid,\n  IconButton,\n  ListSubheader,\n  Menu,\n  MenuItem,\n  Typography,\n} from \"@material-ui/core\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\n\nimport { useDebugContext } from \"../../utils/Debug\";\nimport { TaskDef } from \"../../utils/parsers/task\";\n\nimport SubmitCode from \"./SubmitCode\";\nimport WordInput from \"./WordInput\";\nimport ConfirmDialog from \"../ConfirmDialog\";\nimport { usePersistentState } from \"../../utils/usePersistentState\";\nimport PlayButton from \"./PlayButton\";\n\nimport Markdown from \"../Markdown\";\n\ninterface TaskProps {\n  baseUrl: string;\n  task: TaskDef;\n  noPersist?: boolean;\n}\n\nenum Op {\n  FullReset,\n  ShowReset,\n  WordReset,\n  CloseReset,\n  DismissModal,\n  Submit,\n  ModalExit,\n}\n\ninterface State {\n  modalWord: number;\n  currWord: number;\n  showModal: boolean;\n  resetModal: boolean;\n  inputKey: string;\n}\n\nconst reducer = (state: State, action: Op): State => {\n  const { currWord } = state;\n  switch (action) {\n    case Op.DismissModal:\n      return { ...state, showModal: false, currWord: currWord + 1 };\n    case Op.Submit:\n      return { ...state, showModal: true, modalWord: currWord + 1 };\n    case Op.ModalExit:\n      // Callback unused, but still here.\n      return state;\n    case Op.ShowReset:\n      return { ...state, resetModal: true };\n    case Op.CloseReset:\n      return { ...state, resetModal: false };\n    case Op.WordReset:\n      return { ...state, inputKey: Math.random().toString(36) };\n    case Op.FullReset:\n      // Reset back to start\n      return {\n        modalWord: 0,\n        currWord: 0,\n        showModal: false,\n        resetModal: false,\n        inputKey: Math.random().toString(36), // Force the keyboard input to reload. avoids page refresh\n      };\n  }\n};\n\nconst useDispatch = <T,>(dispatch: React.Dispatch<T>, op: T) =>\n  useCallback(() => dispatch(op), [op, dispatch]);\n\nconst Task = (props: TaskProps) => {\n  const { task, baseUrl, noPersist } = props;\n  const { title, words, instructions, keyboard } = task;\n\n  const persistKey = noPersist ? null : `persist-${baseUrl}`;\n\n  const [persist, setPersist] = usePersistentState(persistKey, { word: 0, name: \"\" });\n\n  const [{ currWord, modalWord, showModal, resetModal, ...rest }, dispatch] = useReducer(reducer, {\n    modalWord: persist.word, // Modal needs to lag behind a word because of exit button\n    currWord: persist.word,\n    showModal: false,\n    resetModal: false,\n    inputKey: \"original\", // This is a hacky way to force the inputWord to refresh on reset\n  });\n\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const debug = useDebugContext();\n  const showWord = currWord < words.length;\n\n  const word = showWord ? words[currWord] : words[words.length - 1];\n\n  const handleSubmit = useDispatch(dispatch, Op.Submit);\n  const dismissModal = useDispatch(dispatch, Op.DismissModal);\n  const handleModalExit = useDispatch(dispatch, Op.ModalExit);\n  const resetWord = useCallback(() => {\n    setAnchorEl(null);\n    dispatch(Op.WordReset);\n  }, []);\n  const handleShowReset = useCallback(() => {\n    setAnchorEl(null);\n    dispatch(Op.ShowReset);\n  }, []);\n  const handleReset = useCallback((reset: boolean) => {\n    dispatch(reset ? Op.FullReset : Op.CloseReset);\n  }, []);\n\n  const handleClickMore = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseMore = () => {\n    setAnchorEl(null);\n  };\n\n  // Scroll back to top at start of each word\n  useEffect(() => {\n    window.scroll({ top: 0, behavior: \"smooth\" });\n    setPersist((s) => {\n      // Make sure name is cleared when we reset\n      const name = modalWord === 0 ? \"\" : s.name;\n      return { name, word: modalWord };\n    });\n  }, [modalWord, setPersist]);\n\n  const controls = (\n    <>\n      <IconButton\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClickMore}\n        title=\"More options\"\n      >\n        <MoreVertIcon />\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={!!anchorEl}\n        TransitionComponent={Fade}\n        onClose={handleCloseMore}\n        MenuListProps={{ subheader: <ListSubheader>Options</ListSubheader> }}\n      >\n        <MenuItem onClick={handleShowReset}>Reset assignment</MenuItem>\n        <MenuItem onClick={resetWord}>Reset transcription</MenuItem>\n      </Menu>\n    </>\n  );\n\n  const wordInstructions = word.instructions && (\n    <Grid container justify=\"center\" spacing={2}>\n      <Grid item xs md={8}>\n        <Markdown children={word.instructions} />\n      </Grid>\n    </Grid>\n  );\n\n  return (\n    <div>\n      <Typography variant=\"h3\" component=\"h2\" gutterBottom align=\"center\">\n        {title}\n      </Typography>\n\n      <Collapse in={showWord}>\n        <Box mb={2}>\n          <Markdown children={instructions || \"\"} baseUrl={baseUrl} />\n        </Box>\n        <Grid container spacing={1} justify=\"center\" alignItems=\"center\">\n          <Grid item>\n            <Typography variant=\"h4\" component=\"p\" align=\"center\">\n              {Math.min(currWord + 1, words.length)}/{words.length}: Transcribe \"{word.display}\"\n            </Typography>\n          </Grid>\n          <Grid item>\n            <PlayButton file={word.audio} baseUrl={baseUrl} />\n          </Grid>\n          <Grid item>{controls}</Grid>\n        </Grid>\n\n        {wordInstructions}\n\n        {/* Setting key here lets us force clear the nested state when we need to */}\n        <WordInput word={word} onSubmit={handleSubmit} key={rest.inputKey} keys={keyboard} />\n      </Collapse>\n\n      {/* Finish splash screen. The mount/unmount are required for persist to work correctly */}\n      <Collapse in={!showWord} mountOnEnter unmountOnExit>\n        <SubmitCode\n          salt={task.salt}\n          debug={debug}\n          onSubmit={(name) => setPersist((s) => ({ ...s, name: name }))}\n          name={persist.name}\n          controls={controls}\n        />\n      </Collapse>\n\n      <NextWord\n        show={showModal}\n        dismiss={dismissModal}\n        onExited={handleModalExit}\n        action={modalWord < words.length ? \"Next word\" : \"Finish\"}\n      />\n      <ConfirmDialog\n        open={resetModal}\n        onClose={handleReset}\n        title=\"Reset Assignment\"\n        body=\"Are you sure you want to reset all progress on this assignment?\"\n      />\n    </div>\n  );\n};\n\ninterface NextWordProps {\n  show: boolean;\n  dismiss: () => void;\n  onExited: () => void;\n  action: string;\n}\nconst NextWord = memo(function NextWord(props: NextWordProps) {\n  return (\n    <Dialog\n      open={props.show}\n      onClose={props.dismiss}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n      onExited={props.onExited}\n    >\n      <DialogTitle id=\"alert-dialog-title\">Congrats! You got it correct</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          You did a good job of getting the word correct!\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={props.dismiss}\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={!props.show}\n          autoFocus\n          disableFocusRipple\n        >\n          {props.action}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n});\n\nexport default memo(Task);\n","import clsx from \"clsx\";\n\nimport CodeBlock from \"./CodeBlock\";\nimport { IPAError, isContextError } from \"../utils/error\";\nimport { Typography, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  fileDump: {\n    fontSize: theme.typography.h6.fontSize,\n    lineHeight: 1.3,\n  },\n  line: {\n    \"&::before\": {\n      content: 'attr(data-line) \"| \"',\n    },\n  },\n  errorLine: {\n    color: theme.palette.error.main,\n  },\n}));\n\ninterface Props {\n  error: IPAError | Error;\n  context?: number;\n  defaultHeader?: string;\n}\n\nconst ErrorMessage = (props: Props) => {\n  const classes = useStyles();\n\n  const { defaultHeader, error, context = 2 } = props;\n\n  console.error(error);\n\n  if (isContextError(error)) {\n    const issue = error.context(context);\n    return (\n      <div>\n        <Typography variant=\"h3\" component=\"p\" gutterBottom>\n          {error.headline}\n        </Typography>\n        <Typography variant=\"h5\" component=\"p\" gutterBottom>\n          {error.message}\n        </Typography>\n        <CodeBlock block children={error.message} />\n        <CodeBlock block>\n          <code className={classes.fileDump}>\n            {issue.map(({ num, contents, error }) => (\n              <span\n                className={clsx(classes.line, error && classes.errorLine)}\n                key={num}\n                data-line={num.toString().padStart(3, \"0\")}\n              >\n                {contents}\n                {\"\\n\"}\n              </span>\n            ))}\n          </code>\n        </CodeBlock>\n      </div>\n    );\n  } else {\n    return (\n      <>\n        <Typography variant=\"h3\" component=\"p\" gutterBottom>\n          {defaultHeader}\n        </Typography>\n        <Typography variant=\"h5\" component=\"p\" gutterBottom>\n          {error.message}\n        </Typography>\n      </>\n    );\n  }\n};\n\nexport default ErrorMessage;\n","import { CircularProgress, Fade, Typography } from \"@material-ui/core\";\nimport { useAsync } from \"react-async-hook\";\nimport { parseTask } from \"../../utils/parsers/task\";\nimport Task from \"./Task\";\nimport { fullBaseUrl } from \"../../constants\";\n\nimport ErrorMessage from \"../ErrorMessage\";\nimport { ResourceError } from \"../../utils/error\";\n\nconst fetchTask = async (taskFileUrl: string) => {\n  if (!taskFileUrl) {\n    // Absurd. klass will actually always be defined\n    console.log(\"empty task\");\n    return;\n  }\n\n  const req = await fetch(taskFileUrl).catch((error) => {\n    if (error instanceof TypeError) {\n      console.error(error);\n      throw new ResourceError(\n        `Cannot fetch resource. Permissions may not be correctly configured.`,\n        error.message\n      );\n    } else {\n      throw error;\n    }\n  });\n\n  if (req.status !== 200) {\n    throw new ResourceError(`${req.statusText}: Resource cannot be retrieved`);\n  }\n\n  const body = await req.text();\n\n  return parseTask(body);\n};\n\ninterface StatusProps {\n  children: React.ReactNode;\n  error?: boolean;\n}\n\nconst Status = ({ children, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"p\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {children}\n  </Typography>\n);\n\ninterface LoadProps {\n  taskFileUrl: string;\n}\n\n/**\n * Wrapper around the Task with loading state\n */\nconst LoadTask = (props: LoadProps) => {\n  const { taskFileUrl } = props;\n  const task = useAsync(fetchTask, [taskFileUrl]);\n  const baseUrl = new URL(taskFileUrl, fullBaseUrl()).toString();\n\n  if (task.result) {\n    return <Task task={task.result} baseUrl={baseUrl} />;\n  } else if (task.loading) {\n    return (\n      <Fade\n        in\n        style={{\n          transitionDelay: \"500ms\",\n        }}\n        unmountOnExit\n      >\n        <Typography variant=\"h4\" component=\"h1\" align=\"center\">\n          <CircularProgress />\n        </Typography>\n      </Fade>\n    );\n  } else if (task.error) {\n    return <ErrorMessage error={task.error} context={3} defaultHeader=\"Cannot load task file\" />;\n  } else {\n    return <Status error children=\"Unreachable state???\" />;\n  }\n};\n\nexport default LoadTask;\n","// Central place for getting env based config\nexport const allowRemote = process.env.REACT_APP_ALLOW_REMOTE === \"true\";\nexport const browserRouter = process.env.REACT_APP_ROUTER === \"browser\";\nexport const hostedSite = process.env.REACT_APP_ORIGINAL_HOSTED_SITE === \"true\";\n\nexport const VERSION = process.env.REACT_APP_VERSION;\nexport const REPO = process.env.REACT_APP_REPO;\nexport const REPO_URL =\n  REPO && VERSION ? `${REPO.replace(\".git\", \"\")}/tree/${VERSION}` : REPO || \"#\";\n\nexport const SHORT_DOMAIN = process.env.REACT_APP_SHORT_DOMAIN;\n","import { useState } from \"react\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { fileUrl } from \"../../constants\";\nimport LoadTask from \"./LoadTask\";\n\nimport { decode, encode } from \"js-base64\";\n\nimport { Link } from \"react-router-dom\";\nimport { Button, Grid, InputAdornment, TextField, Typography } from \"@material-ui/core\";\nimport { SHORT_DOMAIN } from \"../../config\";\n\nconst RouteTask = () => {\n  const { klass, assignment } = useParams<{ klass: string; assignment: string }>();\n  return <LoadTask taskFileUrl={fileUrl(klass, `${assignment}.yaml`)} />;\n};\n\nexport const RouteRemoteTask = () => {\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const config = params.get(\"config\");\n\n  if (config) {\n    const url = decode(config);\n    const target = url.includes(\"://\") ? url : `https://${url}`;\n\n    return <LoadTask taskFileUrl={target} />;\n  } else {\n    return <BuildTaskLink />;\n  }\n};\n\nconst BuildTaskLink = () => {\n  const [url, setUrl] = useState(\"\");\n  const params = new URLSearchParams({ config: encode(url, true) }).toString();\n\n  const base = new URL(window.location.href);\n  if (SHORT_DOMAIN) {\n    base.hostname = SHORT_DOMAIN;\n  }\n  const resultUrl = `${base}?${params}`;\n\n  return (\n    <Grid container spacing={2} alignItems=\"center\" justify=\"center\">\n      <Grid item xs={12} sm md={8}>\n        <Typography variant=\"h6\" component=\"p\" gutterBottom>\n          Enter the URL of a task file below.\n        </Typography>\n        <TextField\n          label=\"Resource\"\n          variant=\"filled\"\n          fullWidth\n          onChange={(e) => setUrl(e.target.value)}\n          value={url}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position=\"end\">\n                <Button\n                  color=\"primary\"\n                  variant=\"contained\"\n                  component={Link}\n                  to={{ search: params }}\n                >\n                  Go!\n                </Button>\n              </InputAdornment>\n            ),\n          }}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant=\"body1\" align=\"center\">\n          {resultUrl}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default RouteTask;\n","import { Box, Button, Grid, Paper, Typography } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\ninterface TaskInfo {\n  name: string;\n  description: string;\n  file: string;\n  hidden?: boolean;\n}\n\ninterface Props {\n  tasks: TaskInfo[];\n  path: string;\n}\n\nconst taskLink = (path: string, file: string) => `${path}/${file.replace(\".yaml\", \"\")}`;\n\nconst TaskList = (props: Props) => {\n  const { tasks, path } = props;\n\n  if (tasks.length === 0) {\n    return <Typography>No tasks to do</Typography>;\n  } else {\n    return (\n      <Grid container spacing={4}>\n        {tasks.map(\n          (task: TaskInfo, i: number) =>\n            !task.hidden && (\n              <Grid item key={`tasklist-${i}`} lg={6} xs={12}>\n                <Box\n                  component={Paper}\n                  p={2}\n                  height=\"100%\"\n                  display=\"flex\"\n                  alignContent=\"space-between\"\n                  alignItems=\"flex-start\"\n                  flexWrap=\"wrap\"\n                >\n                  <Box>\n                    <Typography color=\"primary\" gutterBottom>\n                      {task.name}\n                    </Typography>\n                    <Typography variant=\"body2\" gutterBottom>\n                      {task.description}\n                    </Typography>\n                  </Box>\n                  <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"flex-end\" width=\"100%\">\n                    <Button\n                      component={Link}\n                      color=\"secondary\"\n                      variant=\"contained\"\n                      to={taskLink(path, task.file)}\n                    >\n                      Work on task\n                    </Button>\n                  </Box>\n                </Box>\n              </Grid>\n            )\n        )}\n      </Grid>\n    );\n  }\n};\n\nexport default TaskList;\n","import { RouteComponentProps } from \"react-router\";\nimport { useManifest } from \"../Manifest\";\n\nimport { useAsync } from \"react-async-hook\";\nimport { TASK_FILE, fileUrl } from \"../constants\";\nimport { Typography } from \"@material-ui/core\";\nimport { TaskList } from \"./Task\";\n\nimport { parseTaskList } from \"../utils/parsers\";\nimport { ResourceError } from \"../utils/error\";\nimport ErrorMessage from \"./ErrorMessage\";\n\ninterface MatchParams {\n  klass: string;\n}\n\ninterface Props extends RouteComponentProps<MatchParams> {}\n\nconst fetchClassTasks = async (classId: string) => {\n  if (!classId) {\n    // Absurd. klass will actually always be defined. but just in case\n    console.log(\"empty class\");\n    return;\n  }\n  const url = fileUrl(classId, TASK_FILE);\n\n  const req = await fetch(url).catch((error) => {\n    if (error instanceof TypeError) {\n      console.error(error);\n      throw new ResourceError(\n        `Cannot fetch resource. Permissions may not be correctly configured.`,\n        error.message\n      );\n    } else {\n      throw error;\n    }\n  });\n\n  if (req.status !== 200) {\n    throw new ResourceError(`${req.statusText}: Resource cannot be retrieved`);\n  }\n\n  const body = await req.text();\n\n  return parseTaskList(body);\n};\n\ninterface StatusProps {\n  msg: string;\n  error?: boolean;\n}\n\nconst Status = ({ msg, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {msg}\n  </Typography>\n);\nconst ClassPage = (props: Props) => {\n  const classId = props.match.params.klass;\n\n  const manifest = useManifest();\n  const klass = manifest?.result?.classes?.find(({ folder }) => classId === folder);\n  // classTasks can begin loading before we confirm classId\n  const classTasks = useAsync(fetchClassTasks, [classId]);\n\n  /**\n   * Cases:\n   * if classTasks.result : Good\n   * while loading class && manifest: Class name\n   * while loading manifest: Loading...\n   * if (classTasks.error) : \"cannot load class X\"\n   *\n   */\n\n  if (classTasks.result) {\n    const { title, description, tasks } = classTasks.result;\n    return (\n      <div>\n        <div>\n          <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n            {title}\n          </Typography>\n          <Typography variant=\"subtitle1\" gutterBottom align=\"center\">\n            {description}\n          </Typography>\n        </div>\n        <Typography variant=\"h5\" gutterBottom>\n          Assignments:\n        </Typography>\n        <TaskList tasks={tasks} path={props.location.pathname} />\n      </div>\n    );\n  } else if (classTasks.loading && klass) {\n    return (\n      <div>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Loading {klass.name}...\n        </Typography>\n      </div>\n    );\n  } else if (manifest.loading || classTasks.loading) {\n    return (\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n        Loading...\n      </Typography>\n    );\n  } else if (classTasks.error) {\n    return (\n      <ErrorMessage error={classTasks.error} context={3} defaultHeader=\"No such class exists\" />\n    );\n  } else {\n    return <Status error msg=\"Unreachable state???\" />;\n  }\n};\n\nexport default ClassPage;\n","import { TaskListDef, TaskListFile } from \"../../data/taskList\";\nimport { parse } from \"./parse\";\n\nexport type { TaskListDef } from \"../../data/taskList\";\n\nexport const parseTaskList = (contents: string): TaskListDef => parse(contents, TaskListFile);\n","import { Box, Grid, Typography } from \"@material-ui/core\";\nimport Markdown from \"./Markdown\";\nimport { useManifest } from \"../Manifest\";\n\nconst Homepage = () => {\n  const { result, loading } = useManifest();\n\n  if (result) {\n    const { title, body } = result.homepage;\n    return (\n      <Box paddingY={2}>\n        <Typography align=\"center\" variant=\"h3\" component=\"h2\" gutterBottom>\n          {title}\n        </Typography>\n        <Grid container justify=\"center\">\n          <Grid item xs md={10} lg={8}>\n            <Markdown children={body} paragraph=\"h5\" />\n          </Grid>\n        </Grid>\n      </Box>\n    );\n  } else {\n    return (\n      <Typography variant=\"h3\" align=\"center\">\n        {loading ? \"Loading\" : \"Error\"}\n      </Typography>\n    );\n  }\n};\n\nexport default Homepage;\n","import { Suspense, lazy } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\n\nconst ToolList = lazy(() => import(\"./ToolList\"));\n\ninterface Props extends RouteComponentProps {}\n\nconst ToolLoader = (props: Props) => (\n  <Suspense fallback={null}>\n    <ToolList match={props.match} />\n  </Suspense>\n);\n\nexport default ToolLoader;\n","import { decodeAsync } from \"@msgpack/msgpack\";\nimport { MutableRefObject, useCallback, useRef } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { IpaSoundsParsed } from \"../../utils/parsers\";\n\nconst fetchAsync = async (packUrl: string | undefined) => {\n  if (!packUrl) return;\n  console.debug(\"Fetching packFile\", packUrl);\n\n  const res = await fetch(packUrl);\n\n  if (res.status !== 200 || res.body == null) {\n    throw new Error(\"Unable to load packfile\");\n  }\n\n  // If this isn't the case, welp, we're screwed and it should hopefully fail and not cause issues\n  const contents = (await decodeAsync(res.body)) as Record<string, Uint8Array>;\n\n  return contents;\n};\n\ninterface BufferContext {\n  context: AudioContext;\n  buffers: Map<string, AudioBuffer>;\n}\n\nconst createContextAsync = async (\n  contents: Record<string, Uint8Array> | undefined\n): Promise<BufferContext | undefined> => {\n  if (!contents) return;\n  console.debug(\"Creating audio context\");\n\n  const context = new AudioContext({ latencyHint: \"interactive\" });\n  const promises = Object.keys(contents).map(async (k) => {\n    const data = await context.decodeAudioData(copyBuffer(contents[k]));\n    return [k, data] as const;\n  });\n  const buffers = new Map<string, AudioBuffer>(await Promise.all(promises));\n\n  return { context, buffers };\n};\n\n/**\n * Get a copy of a Uint8Array as a raw ArrayBuffer\n *\n * Avoid 2 gotchas of Uint8Array with regards to Web Audio API\n * 1. Uint8Array.buffer => potentially a shared backing store\n * 2. decodeAudioData will detach a buffer, necessitating a copy be made\n */\nconst copyBuffer = (buffer: Uint8Array): ArrayBuffer =>\n  buffer.buffer.slice(buffer.byteOffset, buffer.byteOffset + buffer.byteLength);\n\ntype AudioSource = MutableRefObject<HTMLAudioElement | null>;\ntype BufferSource = MutableRefObject<AudioBufferSourceNode | null>;\n\nconst playNow = (e: any) => e.target.play();\nconst event = \"canplaythrough\";\n\nconst stopAudio = (tag: AudioSource) => {\n  tag.current?.pause();\n  tag.current?.removeEventListener(event, playNow);\n  tag.current = null;\n};\n\nconst stopBuffer = (buffer: BufferSource) => {\n  buffer.current?.stop(0);\n  buffer.current?.disconnect();\n  buffer.current = null;\n};\n\nconst playBuffer = (source: BufferSource, result: BufferContext, key: string) => {\n  const { context, buffers } = result;\n  const buffer = buffers.get(key);\n  if (!buffer) return false;\n\n  context.resume();\n\n  const node = context.createBufferSource();\n  node.buffer = buffer;\n  node.connect(context.destination);\n  node.start(0);\n\n  source.current = node;\n\n  return true;\n};\n\nconst playFallback = (audio: AudioSource, src: string): boolean => {\n  const curr = new Audio(src);\n  audio.current = curr;\n\n  curr.addEventListener(event, playNow);\n\n  return true;\n};\n\ninterface Player {\n  // Play the sound for an IPA symbol\n  play: (sym: string) => boolean;\n  // Stop playing any sounds\n  stop: () => void;\n}\n\nexport const useAudioPlayer = (sounds: IpaSoundsParsed, baseUrl: string): Player => {\n  const { result: response, error: downloadError } = useAsync(fetchAsync, [sounds?.packFile]);\n  const { result, error: decodeError } = useAsync(createContextAsync, [response]);\n  const source = useRef<AudioBufferSourceNode | null>(null);\n  const audio = useRef<HTMLAudioElement | null>(null);\n\n  // Only log errors because we want the AudioContext to gracefully degrade\n  if (downloadError) console.error(downloadError);\n  if (decodeError) console.error(decodeError);\n\n  const stop = useCallback(() => {\n    stopAudio(audio);\n    stopBuffer(source);\n  }, []);\n\n  const play = useCallback(\n    (sym: string): boolean => {\n      stop();\n      const sound = sounds.symbols.get(sym);\n      if (!sound) {\n        return false;\n      }\n\n      return (\n        (result && playBuffer(source, result, sound.audio)) ||\n        playFallback(audio, new URL(sound.audio, baseUrl).toString())\n      );\n    },\n    [stop, sounds.symbols, result, baseUrl]\n  );\n\n  return { play, stop };\n};\n","import { Dialog, DialogContent, DialogTitle, Grid, Typography } from \"@material-ui/core\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { MiscList } from \"../../utils/ipa\";\nimport { IpaSoundsParsed, SoundParsed } from \"../../utils/parsers\";\nimport { colToWidth } from \"../keyboard/common\";\nimport GridDisplay from \"../keyboard/GridDisplay\";\nimport { BaseKeyboard, Item } from \"../keyboard/Keyboard\";\nimport NonPulmonics from \"../keyboard/NonPulmonics\";\nimport Markdown from \"../Markdown\";\nimport { useAudioPlayer } from \"./player\";\n\ninterface Props {\n  sounds: IpaSoundsParsed;\n  baseUrl: string;\n  video?: boolean;\n}\n\nconst Listen = ({ sounds, baseUrl, video }: Props) => {\n  const { play } = useAudioPlayer(sounds, baseUrl);\n  const [sound, setSound] = useState<SoundParsed | undefined>();\n\n  const validKeys = useCallback(\n    (key: string): boolean => {\n      return sounds.symbols.has(key);\n    },\n    [sounds]\n  );\n\n  const playSound = useCallback(\n    (char: string) => {\n      if (video) {\n        setSound(sounds.symbols.get(char));\n      } else {\n        play(char);\n      }\n    },\n    [play, sounds.symbols, video]\n  );\n\n  const sections = useMemo(() => {\n    const sections = [\n      <Item size=\"half\" header=\"Consonants (Non-pulmonics)\" key=\"non-pulmonic\">\n        <NonPulmonics />\n      </Item>,\n    ];\n\n    sounds?.sections?.forEach(({ name, symbols, columns }) => {\n      const list: MiscList = symbols.map(({ ipa, description }) => ({\n        ipa,\n        sym: ipa,\n        description,\n      }));\n\n      const width = colToWidth(columns);\n\n      sections.push(\n        <Item size=\"half\" header={name} key={name}>\n          <GridDisplay content={list} breakpoints={{ xs: width }} />\n        </Item>\n      );\n    });\n\n    return sections;\n  }, [sounds.sections]);\n\n  return (\n    <div>\n      <Grid container spacing={2} justify=\"center\">\n        <Grid item md={8}>\n          <Typography gutterBottom>\n            Click around to hear the sounds of the International Phonetic Alphabet. Press a symbol\n            to hear it spoken.\n          </Typography>\n        </Grid>\n      </Grid>\n      {video && <VideoDialog sound={sound} baseUrl={baseUrl} close={() => setSound(undefined)} />}\n      <BaseKeyboard subset={validKeys} onClick={playSound}>\n        {sections}\n      </BaseKeyboard>\n\n      {sounds.footer && (\n        <Grid container spacing={2} justify=\"center\">\n          <Grid item md={8} xs={12}>\n            <Markdown children={sounds.footer} />\n          </Grid>\n        </Grid>\n      )}\n    </div>\n  );\n};\n\ninterface VideoProps {\n  sound: SoundParsed | undefined;\n  baseUrl: string;\n  close: () => void;\n}\nconst VideoDialog = ({ sound, baseUrl, close }: VideoProps) => {\n  return (\n    <Dialog\n      open={!!sound}\n      onClose={close}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">IPA: [{sound?.ipa}]</DialogTitle>\n      <DialogContent>\n        {sound && (\n          <video\n            controls\n            autoPlay\n            style={{ width: \"100%\" }}\n            src={new URL(sound.video || sound?.audio, baseUrl).toString()}\n          />\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default Listen;\n","import { CircularProgress, Fade, Typography } from \"@material-ui/core\";\nimport { useAsync } from \"react-async-hook\";\nimport { parseIpaSounds } from \"../../utils/parsers\";\nimport { fullBaseUrl } from \"../../constants\";\n\nimport ErrorMessage from \"../ErrorMessage\";\nimport { ResourceError } from \"../../utils/error\";\nimport { useManifest } from \"../../Manifest\";\n\nimport Listen from \"./Listen\";\n\nconst fetchSounds = async (ipaUrl: string | undefined) => {\n  if (!ipaUrl) {\n    // Absurd. klass will actually always be defined\n    console.debug(\"No url for fetching sounds\");\n    return;\n  }\n\n  const req = await fetch(ipaUrl).catch((error) => {\n    if (error instanceof TypeError) {\n      throw new ResourceError(\n        `Cannot fetch resource. Permissions may not be correctly configured.`,\n        error.message\n      );\n    } else {\n      throw error;\n    }\n  });\n\n  if (req.status !== 200) {\n    throw new ResourceError(`${req.statusText}: Resource cannot be retrieved`);\n  }\n\n  const body = await req.text();\n\n  return parseIpaSounds(body);\n};\n\ninterface StatusProps {\n  children: React.ReactNode;\n  error?: boolean;\n}\n\nconst Status = ({ children, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"p\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {children}\n  </Typography>\n);\n\ninterface Props {\n  video?: boolean;\n}\nconst ListenWrapper = ({ video }: Props) => {\n  const manifest = useManifest();\n  const sounds = useAsync(fetchSounds, [manifest.result?.ipaPlayer?.url]);\n\n  if (manifest.result && manifest.result.ipaPlayer?.enabled && sounds.result) {\n    // Sound files will default to being relative to the soundFile if no full URL is specified\n    const defaultBaseUrl = new URL(\n      sounds.result.baseUrl || manifest.result.ipaPlayer.url,\n      fullBaseUrl()\n    ).toString();\n\n    return <Listen baseUrl={defaultBaseUrl} sounds={sounds.result} video={video} />;\n  } else if (manifest.error) {\n    return <ErrorMessage error={manifest.error} context={3} defaultHeader=\"Cannot manifest\" />;\n  } else if (sounds.error) {\n    return <ErrorMessage error={sounds.error} context={3} defaultHeader=\"Cannot sounds manifest\" />;\n  } else if (manifest.loading || sounds.loading) {\n    return (\n      <Fade\n        in\n        style={{\n          transitionDelay: \"500ms\",\n        }}\n        unmountOnExit\n      >\n        <Typography variant=\"h4\" component=\"h1\" align=\"center\">\n          <CircularProgress />\n        </Typography>\n      </Fade>\n    );\n  } else {\n    return <Status error children=\"Audible IPA Chart is not available\" />;\n  }\n};\n\nexport default ListenWrapper;\n","import { IpaSounds, Sound } from \"../../data/ipaSounds\";\nimport { parse } from \"./parse\";\n\nexport type SoundParsed = Sound & { extra: boolean };\n\nexport const parseIpaSounds = (contents: string) => {\n  const {\n    symbols: rawSymbols,\n    packFile,\n    baseUrl,\n    footer,\n    additionalSections,\n  } = parse(contents, IpaSounds);\n\n  const symbols = new Map<string, SoundParsed>();\n\n  const addSound = (extra: boolean) => (snd: Sound) => {\n    const { ipa } = snd;\n    if (symbols.has(ipa)) {\n      throw new Error(`Duplicate entry for ${ipa}`);\n    } else {\n      symbols.set(ipa, { ...snd, extra });\n    }\n  };\n\n  rawSymbols.forEach(addSound(false));\n\n  additionalSections?.forEach((section) => section.symbols.forEach(addSound(true)));\n\n  return { symbols, baseUrl, packFile, footer, sections: additionalSections };\n};\n\nexport type IpaSoundsParsed = ReturnType<typeof parseIpaSounds>;\n","import useKeyboard from \"../keyboard/useKeyboard\";\n\nimport StickyIPA from \"../keyboard/StickyIPA\";\n\nconst TypeIPA = () => {\n  const { handleKeyboard, handleDelete, handleType, value, ref } = useKeyboard();\n\n  return (\n    <StickyIPA\n      value={value}\n      inputRef={ref}\n      onType={handleType}\n      onDelete={handleDelete}\n      handleKeyboard={handleKeyboard}\n    />\n  );\n};\n\nexport default TypeIPA;\n","import { ReactNode, useRef } from \"react\";\n\ninterface Props {\n  visible: boolean;\n  children: ReactNode;\n}\n\n/**\n * Lazy load elements, but once loaded, keep them on the page and just mark as hidden to avoid reload flashing\n */\nconst LoadOnce = (props: Props) => {\n  const seen = useRef<boolean>(props.visible);\n  const hasBeenShown = props.visible || seen.current;\n\n  if (hasBeenShown) {\n    seen.current = true;\n    return <div hidden={!props.visible}>{props.children}</div>;\n  } else {\n    return <div hidden></div>;\n  }\n};\n\nexport default LoadOnce;\n","import { Box, Grid, Paper, Tab, Tabs, Typography } from \"@material-ui/core\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport ListenWrapper from \"../Listen/ListenWrapper\";\nimport NotFound from \"../NotFound\";\nimport TypeIPA from \"./TypeIPA\";\nimport LoadOnce from \"./LoadOnce\";\nimport { useManifest } from \"../../Manifest\";\n\nenum Pages {\n  Type = \"type\",\n  Audio = \"audio\",\n  Video = \"video\",\n}\n\nconst TABS = [\n  { name: \"Type\", path: Pages.Type },\n  { name: \"Audio\", path: Pages.Audio },\n  { name: \"Audio + Video\", path: Pages.Video },\n] as const;\n\nconst ChartRouter = () => {\n  const { page } = useParams<{ page: string | undefined }>();\n  const { result: manifest } = useManifest();\n\n  const tab = page ? TABS.findIndex(({ path }) => path === page) : 0;\n  if (tab < 0) return <NotFound />;\n  const { path } = TABS[tab];\n\n  return (\n    <div>\n      <Typography variant=\"h4\" component=\"h2\" align=\"center\">\n        Interactive IPA Chart\n      </Typography>\n      {manifest?.ipaPlayer?.enabled && <NavTabs tab={tab} />}\n\n      <LoadOnce visible={path === Pages.Type}>\n        <TypeIPA />\n      </LoadOnce>\n      <LoadOnce visible={path === Pages.Audio || path === Pages.Video}>\n        <ListenWrapper video={path === Pages.Video} />\n      </LoadOnce>\n    </div>\n  );\n};\n\nconst NavTabs = ({ tab }: { tab: number }) => {\n  const history = useHistory();\n\n  const changeTab = (_event: React.ChangeEvent<{}>, newValue: number) => {\n    history.push(`/keyboard/${TABS[newValue].path}`);\n  };\n\n  return (\n    <Grid container justify=\"center\" component={Box} mb={1}>\n      <Grid item>\n        <Paper square>\n          <Tabs indicatorColor=\"primary\" textColor=\"primary\" onChange={changeTab} value={tab}>\n            {TABS.map(({ name, path }) => (\n              <Tab label={name} key={path} />\n            ))}\n          </Tabs>\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ChartRouter;\n","import { Redirect, Route, Switch } from \"react-router-dom\";\n\nimport ClassPage from \"./components/ClassPage\";\nimport Homepage from \"./components/Homepage\";\nimport NotFound from \"./components/NotFound\";\nimport { RouteRemoteTask, RouteTask } from \"./components/Task\";\nimport ToolLoader from \"./components/Tools/ToolLoader\";\n\nimport { allowRemote } from \"./config\";\nimport ChartRouter from \"./components/Chart/ChartRouter\";\n\nconst Router = () => {\n  return (\n    <Switch>\n      <Route path=\"/\" exact component={Homepage} />\n      <Route path=\"/class/:klass\" exact component={ClassPage} />\n      {/* Allow slashes for nested assignments */}\n      <Route path=\"/class/:klass/:assignment+\" exact component={RouteTask} />\n      {allowRemote && <Route path=\"/remote\" exact component={RouteRemoteTask} />}\n\n      <Route path=\"/keyboard/:page?\" exact component={ChartRouter} />\n\n      {/* Old routes which have been moved */}\n      <Redirect from=\"/type\" exact to=\"/keyboard/type\" />\n      <Redirect from=\"/listen\" exact to=\"/keyboard/audio\" />\n      <Redirect from=\"/ipa-player\" exact to=\"/keyboard/audio\" />\n\n      <Route path=\"/tools\" component={ToolLoader} />\n\n      {/* Catchall */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n};\n\nexport default Router;\n","import { Theme } from \"@material-ui/core\";\n\nexport const notchGutters = (theme: Theme) => ({\n  paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(2)}px)`,\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(3)}px)`,\n    paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(3)}px)`,\n  },\n});\n","import { useCallback, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Box,\n  Divider,\n  Drawer,\n  Grid,\n  IconButton,\n  LinearProgress,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Link as MatLink,\n  Switch,\n  Theme,\n  Toolbar,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\";\nimport CastIcon from \"@material-ui/icons/Cast\";\nimport RecordVoiceOverIcon from \"@material-ui/icons/RecordVoiceOver\";\n\nimport { Link, matchPath, useLocation } from \"react-router-dom\";\n\nimport { useManifest } from \"../Manifest\";\nimport { grey } from \"@material-ui/core/colors\";\nimport { notchGutters } from \"../utils/styles\";\nimport { REPO_URL, VERSION, allowRemote } from \"../config\";\n\nconst DRAWER_WIDTH = 275;\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  itemGutters: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  },\n  gutters: notchGutters(theme),\n}));\n\nconst Loading = ({ error }: { error?: boolean }) => (\n  <>\n    <ListItem>\n      <ListItemText primary={error ? \"Error loading classes.\" : \"Loading classes...\"} />\n    </ListItem>\n    <LinearProgress />\n  </>\n);\n\ninterface ListLinkProps {\n  gutters: string;\n  to: string;\n  text: string;\n  exact?: boolean;\n  icon?: JSX.Element;\n}\n\nconst ListLink = (props: ListLinkProps) => {\n  const { pathname } = useLocation();\n  const { to, text, icon, exact, gutters } = props;\n\n  const selected = !!matchPath(pathname, { path: to, exact: exact });\n\n  return (\n    <ListItem button component={Link} to={to} selected={selected} classes={{ gutters: gutters }}>\n      {icon && <ListItemIcon>{icon}</ListItemIcon>}\n      <ListItemText primary={text} />\n    </ListItem>\n  );\n};\n\nconst DarkSwitch = withStyles({\n  switchBase: {\n    color: grey[100],\n    \"&$checked\": {\n      color: \"black\",\n    },\n    \"&$checked + $track\": {\n      backgroundColor: grey[500],\n    },\n  },\n  checked: {},\n  track: {},\n})(Switch);\n\ninterface Props {\n  darkMode: boolean;\n  changeDarkMode: (mode: boolean) => void;\n}\n\nconst Header = (props: Props) => {\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n\n  const { changeDarkMode } = props;\n\n  const { result, loading, error } = useManifest();\n  const playerEnabled = result?.ipaPlayer?.enabled;\n\n  const openDrawer = useCallback(() => {\n    setDrawer(true);\n  }, []);\n  const closeDrawer = useCallback(() => {\n    setDrawer(false);\n  }, []);\n\n  const toggleDarkMode = useCallback(\n    (event) => {\n      changeDarkMode(event.target.checked);\n    },\n    [changeDarkMode]\n  );\n\n  const list = (\n    <div>\n      <List>\n        <ListLink to=\"/\" text=\"Home\" icon={<HomeIcon />} exact gutters={classes.itemGutters} />\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Classes</ListSubheader>\n        {error && <Loading error />}\n        {loading && <Loading />}\n        {result &&\n          result.classes.map(\n            ({ name, folder, hidden }, i) =>\n              !hidden && (\n                <ListLink\n                  key={`class-list-${i}`}\n                  to={`/class/${folder}`}\n                  text={name}\n                  gutters={classes.itemGutters}\n                />\n              )\n          )}\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Tools</ListSubheader>\n        {allowRemote && (\n          <ListLink\n            to=\"/remote\"\n            text=\"Hosted Task\"\n            icon={<CastIcon />}\n            exact\n            gutters={classes.itemGutters}\n          />\n        )}\n        <ListLink\n          to=\"/keyboard/type\"\n          text=\"IPA Keyboard\"\n          icon={<KeyboardIcon />}\n          exact\n          gutters={classes.itemGutters}\n        />\n        {playerEnabled && (\n          <ListLink\n            to=\"/keyboard/audio\"\n            text=\"IPA Player\"\n            icon={<RecordVoiceOverIcon />}\n            exact\n            gutters={classes.itemGutters}\n          />\n        )}\n      </List>\n    </div>\n  );\n\n  return (\n    <div>\n      <Drawer anchor=\"left\" open={drawer} onClose={closeDrawer}>\n        <Box\n          display=\"flex\"\n          minWidth={DRAWER_WIDTH}\n          flexDirection=\"column\"\n          justifyContent=\"space-between\"\n          height=\"100%\"\n          overflow=\"hidden\"\n          role=\"presentation\"\n        >\n          {list}\n          <Box mb={2}>\n            <Typography component=\"div\">\n              <Grid component=\"label\" container justify=\"center\" alignItems=\"center\" spacing={1}>\n                <Grid item>Light</Grid>\n                <Grid item>\n                  <DarkSwitch color=\"default\" checked={props.darkMode} onChange={toggleDarkMode} />\n                </Grid>\n                <Grid item>Dark</Grid>\n              </Grid>\n            </Typography>\n            <Typography variant=\"body2\" component=\"div\" align=\"center\" color=\"textSecondary\">\n              Int IPA {\" \"}\n              <MatLink href={REPO_URL} color=\"inherit\">\n                {VERSION}\n              </MatLink>\n            </Typography>\n          </Box>\n        </Box>\n      </Drawer>\n\n      <AppBar position=\"static\" color=\"secondary\">\n        <Toolbar classes={{ gutters: classes.gutters }}>\n          <IconButton onClick={openDrawer} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\">Int IPA</Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default Header;\n","import { Container, Link, Typography, makeStyles } from \"@material-ui/core\";\nimport { hostedSite } from \"../config\";\n\n// import GitHubIcon from \"@material-ui/icons/GitHub\";\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    marginTop: \"1rem\",\n    marginBottom: \"1rem\",\n  },\n}));\n\n// Only state \"maintained\" for the hosted variant\nconst disclaimer = hostedSite ? \"Created and maintained by \" : \"Originally created by \";\n\nconst Footer = () => {\n  const classes = useStyles();\n\n  return (\n    <Container maxWidth=\"lg\" component=\"footer\" classes={{ root: classes.root }}>\n      <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\">\n        {disclaimer}\n        <Link href=\"https://github.com/R167/int-ipa\" color=\"textPrimary\">\n          Winston Durand\n        </Link>\n        . Source code and examples released under the{\" \"}\n        <Link href=\"https://github.com/R167/int-ipa/blob/master/LICENSE\" color=\"textPrimary\">\n          MIT\n        </Link>{\" \"}\n        license. Website and documentation licensed under{\" \"}\n        <Link href=\"https://creativecommons.org/licenses/by/4.0/\" color=\"textPrimary\">\n          CC BY 4.0\n        </Link>\n        .\n      </Typography>\n    </Container>\n  );\n};\n\nexport default Footer;\n","export default window.AudioContext || window.webkitAudioContext;\n","import { useEffect, useMemo } from \"react\";\n\nimport { Container, CssBaseline, Snackbar } from \"@material-ui/core\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { ThemeOptions, createMuiTheme } from \"@material-ui/core/styles\";\nimport { blue, indigo } from \"@material-ui/core/colors\";\nimport { Theme, makeStyles, useMediaQuery } from \"@material-ui/core\";\n\nimport Router from \"./Router\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\n\nimport { notchGutters } from \"./utils/styles\";\nimport { useDebugContext } from \"./utils/Debug\";\nimport { usePersistentState } from \"./utils/usePersistentState\";\n\nimport AudioContext from \"./utils/AudioContext\";\n\nimport MetaTags from \"react-meta-tags\";\n\nconst lightTheme: ThemeOptions = {\n  palette: {\n    type: \"light\",\n    primary: {\n      main: blue[900],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst darkTheme: ThemeOptions = {\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: blue[500],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  // Modified from source\n  // https://github.com/mui-org/material-ui/blob/v4.11.0/packages/material-ui/src/Container/Container.js\n  containerRoot: {\n    marginTop: `${theme.spacing(1)}px`,\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    display: \"block\", // Fix IE 11 layout when used with main.\n    ...notchGutters(theme),\n  },\n  debug: {\n    pointerEvents: \"none\",\n    zIndex: 1150,\n  },\n  debugRoot: {\n    minWidth: 0,\n    background: \"rgba(240, 240, 240, 0.25)\",\n    color: theme.palette.text.disabled,\n  },\n  siteRoot: {\n    marginBottom: \"env(safe-area-inset-bottom, 0px)\",\n    display: \"flex\",\n    minHeight: \"100vh\",\n    flexDirection: \"column\",\n  },\n  siteContent: {\n    flex: 1,\n  },\n}));\n\nconst DARK_KEY = \"useDarkMode\";\n\nexport default function App() {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const [dark, setDark] = usePersistentState<boolean | null>(DARK_KEY, null);\n\n  useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      document.title = `${process.env.NODE_ENV.slice(0, 3)} - ${document.title}`;\n    }\n  }, []);\n\n  // Create an audio context on first user interaction. Reduces audio playing delay\n  useEffect(() => {\n    const create = () => {\n      document.removeEventListener(\"click\", create);\n      new AudioContext({\n        latencyHint: \"interactive\",\n      });\n    };\n    document.addEventListener(\"click\", create);\n  }, []);\n\n  const darkMode = dark === null ? prefersDarkMode : dark;\n\n  const theme = useMemo(() => createMuiTheme(darkMode ? darkTheme : lightTheme), [darkMode]);\n\n  return (\n    <div className={classes.siteRoot}>\n      <ThemeProvider theme={theme}>\n        <MetaTags>\n          <meta name=\"theme-color\" content={theme.palette.secondary.main} />\n        </MetaTags>\n\n        <CssBaseline />\n        <Header darkMode={darkMode} changeDarkMode={setDark} />\n        <Container\n          maxWidth=\"lg\"\n          classes={{ root: classes.containerRoot }}\n          className={classes.siteContent}\n        >\n          <Router />\n        </Container>\n        <Footer />\n        <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"left\",\n          }}\n          open={debug}\n          message=\"Debug mode\"\n          className={classes.debug}\n          ContentProps={{ classes: { root: classes.debugRoot }, elevation: darkMode ? 1 : 0 }}\n        />\n      </ThemeProvider>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n// import \"./index.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport Manifest from \"./Manifest\";\nimport Debug from \"./utils/Debug\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport { browserRouter } from \"./config\";\n\nconst Router = ({ children }: { children: React.ReactNode }) => {\n  if (browserRouter) {\n    return <BrowserRouter children={children} />;\n  } else {\n    return <HashRouter children={children} />;\n  }\n};\n\nReactDOM.render(\n  <StrictMode>\n    <Debug>\n      <Manifest>\n        <Router>\n          <App />\n        </Router>\n      </Manifest>\n    </Debug>\n  </StrictMode>,\n  document.getElementById(\"root\")\n);\n\nsmoothscroll.polyfill();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","import { Typography } from \"@material-ui/core\";\n\nconst NotFound = () => (\n  <Typography variant=\"h2\" align=\"center\">\n    The page you are looking for cannot be found \n  </Typography>\n);\n\nexport default NotFound;\n","import { fromUint8Array } from \"js-base64\";\n\nconst INVALID = /[^a-zA-Z0-9-]/g;\n\nconst normName = (name: string) => {\n  return name.replace(/[\\s-]+/g, \"-\").replace(INVALID, \"\");\n};\n\nasync function sha1sum(bytes: ArrayBuffer) {\n  const buf = await crypto.subtle.digest(\"SHA-256\", bytes);\n  return fromUint8Array(new Uint8Array(buf));\n}\n\nconst EPOCH = new Date(\"2020-02-02\");\n\nconst SHA_LENGTH = 16;\n\nconst minuteOfYear = () => {\n  const now = new Date();\n  return Math.floor((now.getTime() - EPOCH.getTime()) / 1000 / 60).toString(36);\n};\n\nconst timestampToDate = (timestamp: string) => {\n  const minutes = parseInt(timestamp, 36);\n  const millis = minutes * 60 * 1000 + EPOCH.getTime();\n  return new Date(millis);\n};\n\n// Assume the second string is shorter\nexport const interleave = (longer: string, shorter: string): string => {\n  const interleaved: string[] = [shorter.length.toString(36)];\n  for (let i = 0; i < shorter.length; i++) {\n    interleaved.push(longer.charAt(i));\n    interleaved.push(shorter.charAt(i));\n  }\n  interleaved.push(longer.slice(shorter.length, longer.length));\n  return interleaved.join(\"\");\n};\n\n// Assume the second string is shorter\nexport const deinterleave = (encoded: string): [string, string] => {\n  const length = parseInt(encoded.charAt(0), 36);\n  const interleaved = encoded.slice(1, encoded.length);\n  const longer: string[] = [];\n  const shorter: string[] = [];\n  for (let i = 0; i < length * 2; i += 2) {\n    longer.push(interleaved.charAt(i));\n    shorter.push(interleaved.charAt(i + 1));\n  }\n  longer.push(interleaved.slice(length * 2, interleaved.length));\n  return [longer.join(\"\"), shorter.join(\"\")];\n};\n\nconst DEFAULT_SALT = \"vowelsAreCool!!!\";\n\nexport const computeHash = async (\n  name: string | undefined,\n  salt: string | undefined,\n  run: boolean = true,\n  time?: string\n) => {\n  if (typeof name === \"undefined\" || !run) {\n    return;\n  }\n\n  const effectiveSalt = salt || DEFAULT_SALT;\n\n  const outName = normName(name);\n  const hashName = outName.toLowerCase();\n  const outTime = (time || minuteOfYear()).toLowerCase();\n  const nameTime = `${hashName}_${outTime}`;\n  const input = [nameTime, effectiveSalt].join(\"_\");\n\n  const sha1 = await sha1sum(new TextEncoder().encode(input));\n\n  // Remove special characters and limit to the first 16 chars\n  const cleanupSha1 = sha1\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, \"\")\n    .slice(0, SHA_LENGTH);\n  const interleaved = interleave(cleanupSha1, outTime);\n  return [outName, interleaved].join(\"_\");\n};\n\ninterface HashResult {\n  correct: boolean;\n  name: string;\n  date?: Date;\n  message: string;\n}\n\nexport const checkHash = async (hash: string, salt?: string): Promise<HashResult> => {\n  const effectiveSalt = salt || DEFAULT_SALT;\n\n  const segments = hash.split(\"_\");\n  const [name, interleaved] = segments;\n  if (segments.length !== 2 || interleaved.match(INVALID)) {\n    const message =\n      segments.length < 2 ? \"Missing validation hash\" : \"Invalid characters in string\";\n    return { name: hash, correct: false, message };\n  }\n  const [sha, time] = deinterleave(interleaved.toLowerCase());\n  const date = timestampToDate(time);\n\n  if (sha?.length !== SHA_LENGTH) {\n    console.warn(\"sha segment differs from expected length.\");\n  }\n  const lowerHash = hash.toLowerCase();\n  const expected = (await computeHash(name, effectiveSalt, true, time))?.toLowerCase();\n  return { name, date, correct: expected === lowerHash, message: hash };\n};\n","import { LinkProps, Link as MatLink } from \"@material-ui/core\";\nimport { Link as RouterLink } from \"react-router-dom\";\n\ntype Props = LinkProps<typeof RouterLink>;\n\nconst Link = (props: Props) => <MatLink component={RouterLink} {...props} />;\n\nexport default Link;\n"],"sourceRoot":""}