{"version":3,"sources":["constants.ts","Manifest.tsx","utils/AudioContext.ts","components/keyboard/IPAInput.tsx","components/keyboard/common.ts","utils/ipa.ts","components/keyboard/Pulmonics.tsx","components/keyboard/NonPulmonics.tsx","components/keyboard/trapezium.svg","components/keyboard/Vowels.tsx","components/keyboard/Diacritics.tsx","components/keyboard/Keyboard.tsx","components/keyboard/useKeyboard.ts","utils/normalize.ts","data/task.ts","utils/parsers/task.ts","utils/usePersistentState.ts","utils/Debug.tsx","components/Task/WordInput.tsx","utils/validation.ts","components/Task/SubmitCode.tsx","components/Task/Task.tsx","components/Task/LoadTask.tsx","components/Task/RouteTask.tsx","components/Task/TaskList.tsx","components/ClassPage.tsx","components/Homepage.tsx","components/TypeIPA.tsx","Router.tsx","utils/styles.ts","components/Header.tsx","App.tsx","index.tsx"],"names":["MANIFEST_FILE","process","fileUrl","folder","path","ManifestContext","React","createContext","fetchManifest","async","req","fetch","body","text","YAML","parse","prettyErrors","useManifest","asyncManifest","useContext","Error","errorShown","Manifest","children","manifest","useAsync","error","console","log","message","name","match","alert","Provider","value","window","AudioContext","webkitAudioContext","useStyles","makeStyles","theme","label","breakpoints","up","fontSize","input","noRightMargin","marginRight","helpTextSize","IPAInput","props","classes","placeholder","onType","onDelete","inputRef","header","onCheck","checkDescription","helpText","headerTooltip","open","setOpen","useState","handleSubmit","useCallback","current","handleEnter","e","key","preventDefault","check","Tooltip","title","enterDelay","IconButton","aria-label","onMouseDown","onClick","helperText","Typography","variant","component","className","useEffect","setTimeout","headerContent","InputAdornment","disablePointerEvents","disableTypography","position","positionStart","disableFocusListener","disableHoverListener","disableTouchListener","placement","TransitionComponent","Fade","TransitionProps","timeout","TextField","InputLabelProps","id","fullWidth","onChange","inputProps","spellCheck","autoCorrect","autoComplete","style","lineHeight","InputProps","endAdornment","startAdornment","onKeyPress","borderColor","palette","type","lighten","fade","divider","darken","PLACES","MANNERS","IMPOSSIBLE","NUL","PULMONICS","CLICKS","IMPLOSIVES","EJECTIVES","VOWEL_HEIGHTS","VOWEL_FRONTEDNESS","VOWELS","DIACRITICS","ipa","description","examples","width","voiceless","cursor","float","backgroundColor","action","hover","voiced","height","impossible","disabledBackground","color","symbol","userSelect","sideBorder","borderLeft","borderRight","caps","padding","Pulmonics","clickCallback","char","undefined","Cell","x","y","hasBorders","TableCell","align","clsx","TableContainer","Table","size","TableHead","TableRow","map","place","TableBody","manner","memo","spacing","textAlign","descr","verticalAlign","NonPulmonics","sounds","useMemo","click","i","span","colSpan","row","j","_extends","Object","assign","target","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_ref","strokeWidth","fill","strokeLinecap","strokeLinejoin","d","SvgTrapezium","titleId","svgRef","viewBox","preserveAspectRatio","fillRule","clipRule","ref","ForwardRef","root","outerQuad","minHeight","minWidth","fullRel","trapezium","stroke","primary","quad","left","top","element","transform","overflow","rounded","unrounded","right","mid","display","borderRadius","paperBack","zIndex","content","background","paper","fullHeight","vowelPos","vowelHeight","vowelCoords","offset","Vowels","VowelElement","vowels","coords","Box","noCenter","join","center","vowelChart","Grid","container","wrap","item","direction","xs","justify","pos","descriptionParent","justifyContent","flexDirection","bordered","boxShadow","Diacritics","sm","combined","childOrder","orderChildren","styles","order","forEach","child","Keyboard","Paper","gutterBottom","md","Op","reducer","state","selectionStart","cursorAfter","selectionEnd","Delete","slice","Append","Set","Type","useKeyboard","useRef","dispatch","useReducer","handleKeyboard","handleType","handleDelete","setValue","val","useLayoutEffect","oldFocus","document","activeElement","focus","setSelectionRange","blur","useDebugValue","CANONICAL_FORMS","Map","MATCHER","RegExp","Array","from","keys","normalize","str","replaceAll","get","Macros","record","string","array","Segment","union","boolean","ValidateSegment","refine","segment","context","index","parent","branch","isArray","includes","values","reduce","run","curr","Word","object","audio","optional","segments","TaskFile","author","salt","instructions","macros","words","DEFAULT_MESSAGE","END_MESSAGE","KLEENE_REPLACE","escapeStringRegexp","ANY_REPLACE","matchSegment","rawInput","correct","explanations","wildcards","find","matcher","wildcard","kleene","wildcardToRegex","test","expandMacro","encountered","newEncountered","results","expanded","concat","push","pickValues","ops","result","parseTask","contents","fileContents","assert","valid","metadata","getMacros","word","validSegments","sym","expand","set","lastElement","final","getSegments","usePersistentState","defaultValue","persistOnLoad","mount","stored","localStorage","getItem","JSON","setter","prevState","setItem","stringify","DebugContext","useDebugContext","Debug","debug","setDebug","addEventListener","metaKey","shiftKey","sticky","search","default","success","main","dark","reset","SoftReset","is","Reset","SetHeader","NextSegment","ClearError","errorMessage","ErrorMessage","WordInput","onSubmit","handleCheck","currentValue","headerValue","paddingY","alignItems","EPOCH","Date","computeHash","time","outName","toLowerCase","replace","normName","outTime","now","Math","floor","getTime","minuteOfYear","toString","longer","shorter","interleaved","charAt","interleave","bytes","buf","crypto","subtle","digest","base64","fromByteArray","Uint8Array","sha1sum","TextEncoder","encode","DEFAULTS","prompt","SubmitCode","setName","setRun","timer","displayValue","copyText","select","execCommand","clearTimeout","button","Button","startIcon","lg","PopperProps","disablePortal","readOnly","currWord","wordCount","DismissModal","showModal","showWord","Submit","ModalExit","modalWord","useDispatch","op","Task","task","baseUrl","dismissModal","handleModalExit","lastWord","scroll","behavior","create","removeEventListener","latencyHint","audioFile","audioUrl","URL","Audio","playAudio","currentTime","play","src","Collapse","in","disabled","Dialog","onClose","aria-labelledby","aria-describedby","disableRestoreFocus","onExited","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","disableFocusRipple","fetchTask","taskFileUrl","Status","msg","LoadTask","origin","loading","StructError","RouteTask","klass","assignment","useParams","taskLink","file","TaskList","tasks","hidden","p","alignContent","flexWrap","Link","to","fetchClassTasks","classId","url","ClassPage","params","classTasks","location","pathname","Homepage","RLink","TypeIPA","Router","exact","notchGutters","paddingLeft","paddingRight","itemGutters","gutters","Loading","ListItem","ListItemText","LinearProgress","ListLink","useLocation","icon","selected","matchPath","ListItemIcon","DarkSwitch","withStyles","switchBase","grey","checked","track","Switch","Header","drawer","setDrawer","changeDarkMode","openDrawer","closeDrawer","toggleDarkMode","event","list","List","Divider","ListSubheader","Drawer","anchor","role","mb","darkMode","AppBar","Toolbar","edge","lightTheme","blue","secondary","indigo","darkTheme","containerRoot","boxSizing","margin","pointerEvents","debugRoot","App","prefersDarkMode","useMediaQuery","setDark","createMuiTheme","ThemeProvider","CssBaseline","Container","maxWidth","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","elevation","ReactDOM","render","StrictMode","getElementById","smoothscroll","polyfill"],"mappings":"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","file":"static/js/main.8339d963.chunk.js","sourcesContent":["// A list of constants for the project\n\n// PUBLIC_URL access\nexport const BASE_URL = process.env.PUBLIC_URL;\n\n// URL of teh manifest file\nexport const MANIFEST_FILE = `${BASE_URL}/manifest.yaml`;\n\n// Name of the task file\nexport const TASK_FILE = \"tasks.yaml\";\n\n// Generate a full file URL given the folder and the pathname\nexport const fileUrl = (folder: string, path: string) => `${BASE_URL}/${folder}/${path}`;\n\nexport const fullBaseUrl = () => new URL(BASE_URL, window.origin);\n","import React, { useContext } from \"react\";\nimport { UseAsyncReturn, useAsync } from \"react-async-hook\";\nimport YAML from \"yaml\";\nimport { MANIFEST_FILE } from \"./constants\";\n\nimport { ManifestType } from \"./utils/parsers\";\n\nconst ManifestContext = React.createContext<UseAsyncReturn<ManifestType, never[]> | null>(null);\n\nconst fetchManifest = async (): Promise<ManifestType> => {\n  // TODO: Change to force fetch even when cached\n  const req = await fetch(MANIFEST_FILE);\n  const body = await req.text();\n  return YAML.parse(body, { prettyErrors: true });\n};\n\nexport const useManifest = () => {\n  const asyncManifest = useContext(ManifestContext);\n  if (!asyncManifest) {\n    // Absurd\n    throw new Error(\"Error: you must create an initial manifest object\");\n  }\n  return asyncManifest;\n};\n\ntype Props = {\n  children: React.ReactNode;\n};\n\n// Only show the error once\nlet errorShown = false;\n\nconst Manifest = ({ children }: Props) => {\n  const manifest = useAsync(fetchManifest, []);\n  if (manifest.error && !errorShown) {\n    errorShown = true;\n    console.log(manifest.error.message);\n    console.log(manifest.error);\n    if (manifest.error.name.match(/^YAML/)) {\n      // This is a YAML error\n      alert(\n        `Error: Your manifest.yaml contains invalid syntax. Please check the console for more info.`\n      );\n    } else {\n      alert(\"There was an error loading your manifest.yaml\");\n    }\n  }\n  return <ManifestContext.Provider value={manifest}>{children}</ManifestContext.Provider>;\n};\n\nexport default Manifest;\n","export default window.AudioContext || window.webkitAudioContext;\n","import {\n  Fade,\n  IconButton,\n  InputAdornment,\n  TextField,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from \"@material-ui/core\";\nimport React, { KeyboardEvent, RefObject, useCallback, useEffect, useState } from \"react\";\nimport BackspaceOutlinedIcon from \"@material-ui/icons/BackspaceOutlined\";\nimport CheckIcon from \"@material-ui/icons/Check\";\n\nconst useStyles = makeStyles((theme) => ({\n  label: {\n    \"&:not(.MuiInputLabel-shrink)\": {\n      [theme.breakpoints.up(\"lg\")]: {\n        fontSize: \"2rem\",\n      },\n      fontSize: \"1.5rem\",\n    },\n  },\n  input: {\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"2rem\",\n    },\n    fontSize: \"1.5rem\",\n    \"&> fieldset > legend > span\": {\n      fontSize: \"0.75rem\",\n    },\n  },\n  noRightMargin: {\n    marginRight: 0,\n  },\n  helpTextSize: {\n    fontSize: \"1rem\",\n    [theme.breakpoints.up(\"lg\")]: {\n      fontSize: \"1.5rem\",\n    },\n  },\n}));\n\ninterface Props {\n  inputRef: RefObject<HTMLInputElement>;\n  value: string;\n  onType: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  onDelete: () => void;\n  // optional header stuff\n  header?: React.ReactNode;\n  onCheck?: (val: string) => void;\n  checkDescription?: string;\n\n  error?: boolean;\n  helpText?: string;\n  placeholder?: string;\n  headerTooltip?: string;\n}\n\nconst IPAInput = (props: Props) => {\n  const classes = useStyles();\n  const {\n    placeholder = \"Type IPA\",\n    value,\n    onType,\n    onDelete,\n    inputRef,\n    header,\n    onCheck,\n    checkDescription,\n    error,\n    helpText,\n    headerTooltip,\n  } = props;\n\n  const [open, setOpen] = useState(false);\n\n  // This should be fine (famous last words...)\n  const handleSubmit = useCallback(() => {\n    onCheck && onCheck(inputRef.current?.value || \"\");\n  }, [onCheck, inputRef]);\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLDivElement>) => {\n      if (e.key === \"Enter\") {\n        handleSubmit();\n      }\n    },\n    [handleSubmit]\n  );\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const check = onCheck && (\n    <Tooltip title={checkDescription || \"Submit IPA Symbol or End Word\"} enterDelay={500}>\n      <IconButton aria-label=\"check\" onMouseDown={preventDefault} onClick={handleSubmit}>\n        <CheckIcon />\n      </IconButton>\n    </Tooltip>\n  );\n\n  const helperText = helpText && (\n    <Typography variant=\"body2\" component=\"span\" className={classes.helpTextSize}>\n      {helpText}\n    </Typography>\n  );\n\n  useEffect(() => {\n    if (header && headerTooltip) {\n      setOpen(true);\n      window.setTimeout(() => setOpen(false), 1500);\n    }\n  }, [header, headerTooltip]);\n\n  const headerContent = header && (\n    <InputAdornment\n      disablePointerEvents\n      disableTypography\n      position=\"start\"\n      classes={{ positionStart: classes.noRightMargin }}\n    >\n      {headerTooltip ? (\n        <Tooltip\n          open={open}\n          disableFocusListener\n          disableHoverListener\n          disableTouchListener\n          placement=\"bottom-end\"\n          TransitionComponent={Fade}\n          TransitionProps={{ timeout: 400 }}\n          title={<Typography variant=\"subtitle2\">{headerTooltip}</Typography>}\n        >\n          <span>{header}</span>\n        </Tooltip>\n      ) : (\n        header\n      )}\n    </InputAdornment>\n  );\n\n  // TODO: refactor so this uses the individual components rather than just TextField\n  //       honestly, it's starting to get pretty unwieldy and then I can have more control\n\n  return (\n    <TextField\n      InputLabelProps={{ className: classes.label }}\n      id=\"ipa-typer\"\n      fullWidth\n      inputRef={inputRef}\n      value={value}\n      onChange={onType}\n      variant=\"outlined\"\n      inputProps={{\n        spellCheck: \"false\",\n        autoCorrect: \"off\",\n        autoComplete: \"off\",\n        style: { lineHeight: 2 },\n      }}\n      label={placeholder}\n      InputProps={{\n        className: classes.input,\n        endAdornment: (\n          <InputAdornment position=\"end\">\n            <Tooltip title=\"Delete\" enterDelay={500}>\n              <IconButton aria-label=\"delete\" onMouseDown={preventDefault} onClick={onDelete}>\n                <BackspaceOutlinedIcon />\n              </IconButton>\n            </Tooltip>\n            {check}\n          </InputAdornment>\n        ),\n        startAdornment: headerContent,\n      }}\n      onKeyPress={handleEnter}\n      error={error}\n      helperText={helperText}\n    />\n  );\n};\n\nexport default IPAInput;\n","import { Theme, darken, fade, lighten } from \"@material-ui/core/styles\";\n\nexport interface Clickable {\n  onClick?: (char: string) => void;\n}\n\nexport const borderColor = (theme: Theme) =>\n  theme.palette.type === \"light\"\n    ? lighten(fade(theme.palette.divider, 1), 0.88)\n    : darken(fade(theme.palette.divider, 1), 0.68);\n\nexport const shadowBorder = (size: string, color: string) => {\n  return `${size} 0 0 0 ${color}, 0 ${size} 0 0 ${color}, ${size} ${size} 0 0 ${color}, ${size} 0 0 0 ${color} inset, 0 ${size} 0 0 ${color} inset`;\n};\n","/**\n * Places of articulation\n */\nexport const PLACES = [\n  \"Bilabial\",\n  \"Labiodental\",\n  \"Dental\",\n  \"Alveolar\",\n  \"Postalveolar\",\n  \"Retroflex\",\n  \"Palatal\",\n  \"Velar\",\n  \"Uvular\",\n  \"Pharyngeal\",\n  \"Glottal\",\n] as const;\n\n/**\n * Manners of articulation\n */\nexport const MANNERS = [\n  \"Plosive\",\n  \"Nasal\",\n  \"Trill\",\n  \"Tap\",\n  \"Fricative\",\n  \"Lateral fricative\",\n  \"Approximant\",\n  \"Lateral approximant\",\n] as const;\n\nexport type PlaceOfArt = typeof PLACES[number];\nexport type MannerOfArt = typeof MANNERS[number];\n\n// The sounds that are either impossible or not used\nexport const IMPOSSIBLE = \"_\";\nconst IMP = IMPOSSIBLE;\nexport const NOT_USED = \"\";\nconst NUL = NOT_USED;\n\n// prettier-ignore\nexport const PULMONICS = [\n  [\"p\", \"b\", NUL, NUL, NUL, NUL, \"t\", \"d\", NUL, NUL, \"\", \"\", \"c\", \"\", \"k\", \"g\", \"q\", \"\", NUL, IMP, \"\", IMP],\n  [NUL, \"m\", NUL, \"\", NUL, NUL, NUL, \"n\", NUL, NUL, NUL, \"\", NUL, \"\", NUL, \"\", NUL, \"\", IMP, IMP, IMP, IMP],\n  [NUL, \"\", NUL, NUL, NUL, NUL, NUL, \"r\", NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, NUL, \"\", NUL, NUL, IMP, IMP],\n  [NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, IMP, IMP, NUL, NUL, NUL, NUL, IMP, IMP],\n  [\"\", \"\", \"f\", \"v\", \"\", \"\", \"s\", \"z\", \"\", \"\", \"\", \"\", \"\", \"\", \"x\", \"\", \"\", \"\", \"\", \"\", \"h\", \"\"],\n  [IMP, IMP, IMP, IMP, NUL, NUL, \"\", \"\", NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, NUL, IMP, IMP, IMP, IMP],\n  [NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, NUL, NUL, \"\", NUL, \"j\", NUL, \"\", NUL, NUL, NUL, NUL, IMP, IMP],\n  [IMP, IMP, IMP, IMP, NUL, NUL, NUL, \"l\", NUL, NUL, NUL, \"\", NUL, \"\", NUL, \"\", NUL, NUL, IMP, IMP, IMP, IMP]\n] as const;\n\nexport const CLICKS = [\n  [\"\", \"Bilabial\"],\n  [\"\", \"Dental\"],\n  [\"\", \"(Post)alveolar\"],\n  [\"\", \"Palatoalveolar\"],\n  [\"\", \"Alveolar lateral\"],\n] as const;\n\nexport const IMPLOSIVES = [\n  [\"\", \"Bilabial\"],\n  [\"\", \"Dental/alveolar\"],\n  [\"\", \"Palatal\"],\n  [\"\", \"Velar\"],\n  [\"\", \"Uvular\"],\n] as const;\n\n// U+02BC\nexport const EJECTIVE = \"\";\n\nexport const EJECTIVES = [\n  [\"\", \"Examples:\"],\n  [\"p\", \"Bilabial\"],\n  [\"t\", \"Dental/alveolar\"],\n  [\"k\", \"Velar\"],\n  [\"s\", \"Alveolar fricative\"],\n] as const;\n\nexport const FILLER = \"\";\n\nexport const OTHERS = [\n  [\"\", \"voiceless labial-velar fricative\"],\n  [\"w\", \"voiced labial-velar approximant\"],\n  [\"\", \"voiced labial-palatal approximant\"],\n  [\"\", \"voiceless epiglottal fricative\"],\n  [\"\", \"voiced epiglottal fricative\"],\n  [\"\", \"epiglottal plosive\"],\n];\n\nexport const VOWEL_HEIGHTS = [\"Close\", \"Close-mid\", \"Open-mid\", \"Open\"] as const;\nexport const VOWEL_FRONTEDNESS = [\"Front\", \"Central\", \"Back\"] as const;\n\nexport type VowelLiteral = readonly [string, string] | string;\nexport type Coords = readonly [number, number];\n\ntype VowelCoords = readonly (readonly [VowelLiteral, Coords])[];\n\n/**\n * Associative array of Vowel pairs and ~coordinates\n *\n * Coords are specified on the range [0, 1]\n * x = frontedness\n * y = height\n *\n * Upper left (close front) is origin. Everything is translated afterwards to be\n * in the trapezium shape\n */\n// prettier-ignore\nexport const VOWELS: VowelCoords = [\n  // Close vowels\n  [[\"i\", \"y\"], [0, 0]],\n  [[\"\", \"\"], [0.5, 0]],\n  [[\"\", \"u\"], [1, 0]],\n\n  // Near close vowels\n  [[\"\", \"\"], [0.2, 1/6]],\n  [[\"\", \"\"], [0.75, 1/6]],\n\n  // Close-mid\n  [[\"e\", \"\"], [0, 1/3]],\n  [[\"\", \"\"], [0.5, 1/3]],\n  [[\"\", \"o\"], [1, 1/3]],\n\n  // Mid\n  [\"\", [0.5, 0.5]],\n\n  // Open-mid\n  [[\"\", \"\"], [0, 2/3]],\n  [[\"\", \"\"], [0.5, 2/3]],\n  [[\"\", \"\"], [1, 2/3]],\n\n  // Near-open\n  [[\"\", \"\"], [0, 5/6]],\n  [\"\", [0.5, 5/6]],\n\n  // Open\n  [[\"a\", \"\"], [0, 1]],\n  [[\"\", \"\"], [1, 1]],\n];\n\nexport const STRESS = \"\";\nexport const SECONDARY_STRESS = \"\";\n\ninterface Diacritic {\n  ipa: string;\n  description: string;\n  examples: string[];\n  width?: number;\n}\n\nexport type DiacriticsList = readonly Diacritic[];\n\nexport const DIACRITICS: DiacriticsList = [\n  { ipa: \"\\u0325\", description: \"Voiceless\", examples: [\"n\", \"d\"] },\n  { ipa: \"\\u032C\", description: \"Voiced\", examples: [\"s\", \"t\"] },\n  { ipa: \"\\u02B0\", description: \"Aspirated\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0339\", description: \"More rounded\", examples: [\"\"] },\n  { ipa: \"\\u031C\", description: \"Less rounded\", examples: [\"\"] },\n  { ipa: \"\\u031F\", description: \"Advanced\", examples: [\"u\"] },\n  { ipa: \"\\u0320\", description: \"Retracted\", examples: [\"e\"] },\n  { ipa: \"\\u0308\", description: \"Centralized\", examples: [\"e\"] },\n  { ipa: \"\\u033D\", description: \"Mid-centralized\", examples: [\"e\"] },\n  { ipa: \"\\u0329\", description: \"Syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u032F\", description: \"Non-syllabic\", examples: [\"n\"] },\n  { ipa: \"\\u02DE\", description: \"Rhoticity\", examples: [\"\", \"a\"] },\n  { ipa: \"\\u0324\", description: \"Breathy voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u0330\", description: \"Creaky voiced\", examples: [\"b\", \"a\"] },\n  { ipa: \"\\u033C\", description: \"Linguolabial\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B7\", description: \"Labialized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02B2\", description: \"Palatalized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E0\", description: \"Velarized\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u02E4\", description: \"Pharyngealized\", examples: [\"t\", \"d\"] },\n\n  { ipa: \"\\u032A\", description: \"Dental\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033A\", description: \"Apical\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u033B\", description: \"Laminal\", examples: [\"t\", \"d\"] },\n  { ipa: \"\\u0303\", description: \"Nasalized\", examples: [\"e\"] },\n  { ipa: \"\\u207F\", description: \"Nasal release\", examples: [\"d\"] },\n  { ipa: \"\\u02E1\", description: \"Lateral release\", examples: [\"d\"] },\n  { ipa: \"\\u031A\", description: \"No audible release\", examples: [\"d\"] },\n\n  { ipa: \"\\u0334\", description: \"Velarized or pharyngealized\", examples: [\"l\"], width: 2 },\n\n  { ipa: \"\\u031D\", description: \"Raised\", examples: [\"e\"] },\n  { ipa: \"\\u031E\", description: \"Lowered\", examples: [\"e\"] },\n  { ipa: \"\\u0318\", description: \"Advanced tongue root\", examples: [\"e\"] },\n  { ipa: \"\\u0319\", description: \"Retracted tongue root\", examples: [\"e\"] },\n];\n","import React, { useCallback } from \"react\";\n\nimport clsx from \"clsx\";\nimport { Clickable, borderColor } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { IMPOSSIBLE, MANNERS, NOT_USED, PLACES, PULMONICS } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  voiceless: {\n    cursor: \"pointer\",\n    width: \"50%\",\n    float: \"left\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  voiced: {\n    height: \"100%\",\n    cursor: \"pointer\",\n    width: \"50%\",\n    float: \"right\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  impossible: {\n    backgroundColor: theme.palette.action.disabledBackground,\n    color: \"transparent\",\n    cursor: \"default\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.disabledBackground,\n    },\n  },\n  symbol: {\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n  },\n  sideBorder: {\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  caps: {\n    padding: \"6px 5.5px\",\n    // \"td&\": {\n    //   padding: \"0px 5.5px\",\n    // },\n  },\n  header: {\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst Pulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick } = props;\n  const clickCallback = useCallback(\n    (char) =>\n      (char !== IMPOSSIBLE && char !== NOT_USED && onClick && (() => onClick(char))) || undefined,\n    [onClick]\n  );\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const Cell = React.useCallback(\n    ({ x, y }: { x: number; y: number }) => {\n      const voiceless = PULMONICS[y]?.[x * 2];\n      const voiced = PULMONICS[y]?.[x * 2 + 1];\n\n      const hasBorders = x < 2 || x > 4 || y === 4;\n\n      return (\n        <TableCell\n          align=\"center\"\n          className={clsx(classes.symbol, hasBorders && classes.sideBorder)}\n          padding=\"none\"\n        >\n          <span\n            className={clsx(classes.voiceless, voiceless === IMPOSSIBLE && classes.impossible)}\n            onClick={clickCallback(voiceless)}\n            onMouseDown={preventDefault}\n          >\n            {voiceless}\n          </span>\n          <span\n            className={clsx(classes.voiced, voiced === IMPOSSIBLE && classes.impossible)}\n            onClick={clickCallback(voiced)}\n            onMouseDown={preventDefault}\n          >\n            {voiced}\n          </span>\n        </TableCell>\n      );\n    },\n    [classes, clickCallback, preventDefault]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <TableHead>\n          <TableRow>\n            <TableCell>{/* Filler for articulation */}</TableCell>\n            {PLACES.map((place) => (\n              <TableCell\n                key={`keyboard-place-${place}`}\n                align=\"center\"\n                className={clsx(classes.header, classes.caps)}\n              >\n                {place}\n              </TableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {MANNERS.map((manner, y) => (\n            <TableRow key={`keyboard-manner-${manner}`}>\n              <TableCell className={classes.caps}>{manner}</TableCell>\n              {PLACES.map((place, x) => (\n                <Cell key={`keyboard-l-${manner}-${place}`} x={x} y={y} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default React.memo(Pulmonics);\n","import React, { useCallback, useMemo } from \"react\";\n\nimport { Clickable, borderColor } from \"./common\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { CLICKS, EJECTIVES, IMPLOSIVES } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  symbol: {\n    padding: theme.spacing(0.75, 1),\n    textAlign: \"center\",\n    userSelect: \"none\",\n    fontSize: \"1.5rem\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n    borderLeft: `1px solid ${borderColor(theme)}`,\n  },\n  descr: {\n    fontSize: \"0.8rem\",\n    verticalAlign: \"middle\",\n    padding: theme.spacing(0, 0.5),\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n  header: {\n    padding: theme.spacing(0.75, 1.5),\n    borderLeft: `1px solid ${borderColor(theme)}`,\n    borderRight: `1px solid ${borderColor(theme)}`,\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst NonPulmonics = (props: Props) => {\n  const classes = useStyles();\n  const { onClick = () => {} } = props;\n\n  const sounds = useMemo(() => {\n    return CLICKS.map((click, i) => [click, IMPLOSIVES[i], EJECTIVES[i]]);\n  }, []);\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const Cell = useCallback(\n    ({ symbol, name }: { symbol: string; name: string }) => {\n      return (\n        <>\n          <TableCell\n            className={classes.symbol}\n            onClick={() => onClick(symbol)}\n            onMouseDown={preventDefault}\n          >\n            {symbol}\n          </TableCell>\n          <TableCell className={classes.descr}>{name}</TableCell>\n        </>\n      );\n    },\n    [classes, onClick, preventDefault]\n  );\n\n  return (\n    <TableContainer>\n      <Table size=\"small\" aria-label=\"Consonants (Pulmonics)\">\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <colgroup span={2}></colgroup>\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Clicks\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Voiced implosives\n            </TableCell>\n            <TableCell align=\"center\" className={classes.header} colSpan={2}>\n              Ejectives\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {sounds.map((row, i) => (\n            <TableRow key={`keyboard-nonpulmonic-${i}`}>\n              {row.map(([symbol, name], j) => (\n                <Cell key={`keyboard-nonpulmonic-${i}-${j}`} symbol={symbol} name={name} />\n              ))}\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default React.memo(NonPulmonics);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"g\", {\n  strokeWidth: 4,\n  fill: \"none\",\n  strokeLinecap: \"butt\",\n  strokeLinejoin: \"miter\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M24 17.74l950.68-.94L976 683.2l-477.16-1.23L24 17.74zM499.85 17.74l235.9 664.23M183.29 239.78l791.4-.94\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M343.58 461.81l629.09-1.88h1V459\"\n}));\n\nfunction SvgTrapezium({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1000 700\",\n    preserveAspectRatio: \"none\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref);\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrapezium);\nexport default __webpack_public_path__ + \"static/media/trapezium.dacff88a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useMemo } from \"react\";\nimport clsx from \"clsx\";\nimport { Clickable } from \"./common\";\n\nimport { Box, Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Coords, VOWELS, VOWEL_FRONTEDNESS, VOWEL_HEIGHTS, VowelLiteral } from \"../../utils/ipa\";\n\nimport { ReactComponent as Trapezium } from \"./trapezium.svg\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  outerQuad: {\n    padding: theme.spacing(1, 3),\n    fontSize: \"1.5rem\",\n    position: \"relative\",\n    height: \"100%\",\n    minHeight: \"275px\",\n    minWidth: \"270px\",\n  },\n  fullRel: {\n    height: \"100%\",\n    width: \"100%\",\n    position: \"relative\",\n  },\n  trapezium: {\n    position: \"absolute\",\n    height: \"100%\",\n    width: \"100%\",\n    stroke: theme.palette.text.primary,\n  },\n  quad: {\n    position: \"absolute\",\n    height: \"95%\",\n    width: \"95%\",\n    left: \"2.5%\",\n    top: \"2.75%\",\n  },\n  element: {\n    userSelect: \"none\",\n    cursor: \"default\",\n    position: \"absolute\",\n    transform: \"translate(-50%, -50%)\",\n    overflow: \"visible\",\n    width: \"1.2em\",\n    textAlign: \"center\",\n  },\n  rounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    left: \"0.75em\",\n  },\n  unrounded: {\n    position: \"absolute\",\n    width: \"1.2em\",\n    right: \"0.75em\",\n  },\n  mid: {\n    width: \"100%\",\n  },\n  symbol: {\n    display: \"inline-block\",\n    cursor: \"pointer\",\n    \"&:hover\": {\n      borderRadius: \"3px\",\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  paperBack: {\n    \"&::before\": {\n      zIndex: \"-1\",\n      left: \"0\",\n      content: \"''\",\n      borderRadius: \"3px\",\n      position: \"absolute\",\n      display: \"inline-block\",\n      width: \"1.2em\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.paper,\n    },\n  },\n  fullHeight: {\n    height: \"100%\",\n  },\n  vowelPos: {\n    padding: theme.spacing(0, 2),\n  },\n  vowelHeight: {\n    padding: theme.spacing(0.5, 0),\n  },\n}));\n\ninterface Props extends Clickable {}\n\nconst vowelCoords = ([x, y]: Coords): { left: string; top: string } => {\n  const offset = y * 0.5;\n  const val = offset + (1 - offset) * x;\n  return { left: `${val * 100}%`, top: `${y * 100}%` };\n};\n\n/**\n * Vowel chart\n */\nconst Vowels = (props: Props) => {\n  const classes = useStyles();\n  const { onClick = () => {} } = props;\n\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  const VowelElement = useCallback(\n    ({ vowels, coords }: { vowels: VowelLiteral; coords: Coords }) => {\n      if (typeof vowels === \"string\") {\n        return (\n          <Box className={clsx(classes.element, classes.paperBack)} style={vowelCoords(coords)}>\n            <div\n              className={clsx(classes.mid, classes.symbol)}\n              onClick={() => onClick(vowels)}\n              onMouseDown={preventDefault}\n            >\n              {vowels}\n            </div>\n          </Box>\n        );\n      } else {\n        const noCenter = vowels.join(\"\").length < 2;\n        // Zero width space or dot\n        const center = noCenter ? \"\\u00A0\" : \"\";\n        return (\n          <Box\n            className={clsx(classes.element, { [classes.paperBack]: !noCenter })}\n            style={vowelCoords(coords)}\n          >\n            {center}\n            <div\n              className={clsx(classes.unrounded, classes.symbol, classes.paperBack)}\n              onClick={() => onClick(vowels[0])}\n              onMouseDown={preventDefault}\n            >\n              {vowels[0]}\n            </div>\n            <div\n              className={clsx(classes.rounded, classes.symbol, classes.paperBack)}\n              onClick={() => onClick(vowels[1])}\n              onMouseDown={preventDefault}\n            >\n              {vowels[1]}\n            </div>\n          </Box>\n        );\n      }\n    },\n    [classes, onClick, preventDefault]\n  );\n\n  const vowelChart = useMemo(\n    () => (\n      <Box className={classes.outerQuad}>\n        <div className={classes.fullRel}>\n          <Trapezium className={classes.trapezium} />\n          <div className={classes.quad}>\n            {VOWELS.map(([vowels, coords]) => (\n              <VowelElement key={`vowelbox-${vowels}`} vowels={vowels} coords={coords} />\n            ))}\n          </div>\n        </div>\n      </Box>\n    ),\n    [classes, VowelElement]\n  );\n\n  return (\n    <Box id=\"vowelQuad\" className={classes.root}>\n      <Grid container className={classes.fullHeight} wrap=\"nowrap\">\n        <Grid item>\n          <Grid container direction=\"column\" className={clsx(classes.fullHeight)}>\n            <Typography variant=\"body1\" component=\"p\">\n              &#8203;\n            </Typography>\n            <Grid item xs>\n              <Grid\n                container\n                direction=\"column\"\n                justify=\"space-between\"\n                className={clsx(classes.fullHeight, classes.vowelHeight)}\n              >\n                {VOWEL_HEIGHTS.map((height) => (\n                  <Typography key={height} variant=\"body1\" component=\"p\">\n                    {height}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs>\n          <Grid container direction=\"column\" className={classes.fullHeight}>\n            <Grid item>\n              <Grid container justify=\"space-between\" className={classes.vowelPos}>\n                {VOWEL_FRONTEDNESS.map((pos) => (\n                  <Typography key={pos} variant=\"body1\" component=\"p\">\n                    {pos}\n                  </Typography>\n                ))}\n              </Grid>\n            </Grid>\n            <Grid item xs>\n              {vowelChart}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default React.memo(Vowels);\n","import React, { useCallback } from \"react\";\nimport { Clickable, borderColor, shadowBorder } from \"./common\";\n\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { DIACRITICS, FILLER } from \"../../utils/ipa\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  symbol: {\n    userSelect: \"none\",\n    textAlign: \"center\",\n    cursor: \"pointer\",\n    fontSize: \"1.5rem\",\n    \"&:hover\": {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n  description: {\n    padding: \"2px\",\n    fontSize: \"0.8rem\",\n  },\n  descriptionParent: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n    height: \"100%\",\n  },\n  bordered: {\n    boxShadow: shadowBorder(\"1px\", borderColor(theme)),\n  },\n}));\n\nconst Diacritics = (props: Clickable) => {\n  const classes = useStyles();\n  const { onClick = () => {} } = props;\n  const preventDefault = useCallback((e) => e.preventDefault(), []);\n\n  return (\n    <Grid container spacing={0}>\n      {DIACRITICS.map(({ ipa, description, examples }) => (\n        <Grid item xs={6} sm={4} key={`diacritics-${description}`} className={classes.bordered}>\n          <Grid container>\n            <Grid\n              item\n              xs={2}\n              className={classes.symbol}\n              onClick={() => onClick(ipa)}\n            >{`${FILLER}${ipa}`}</Grid>\n            <Grid item xs>\n              <div className={classes.descriptionParent}>\n                <div className={classes.description}>{description}</div>\n              </div>\n            </Grid>\n            {/* Forgive me father, for I have sinned. I never should have used this much indentation */}\n            {examples.map((char) => {\n              const combined = `${char}${ipa}`;\n              return (\n                <Grid\n                  key={combined}\n                  item\n                  xs={2}\n                  className={classes.symbol}\n                  onClick={() => onClick(combined)}\n                  onMouseDown={preventDefault}\n                >\n                  {combined}\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n\nexport default React.memo(Diacritics);\n","import React from \"react\";\nimport { Grid, Paper, Typography, makeStyles } from \"@material-ui/core\";\n\nimport Pulmonics from \"./Pulmonics\";\nimport { Clickable } from \"./common\";\nimport NonPulmonics from \"./NonPulmonics\";\nimport Vowels from \"./Vowels\";\nimport Diacritics from \"./Diacritics\";\nimport { CSSProperties } from \"@material-ui/core/styles/withStyles\";\n\n// import BackspaceOutlinedIcon from \"@material-ui/icons/BackspaceOutlined\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    padding: theme.spacing(1),\n    height: \"100%\",\n  },\n  childOrder: {\n    // Allow reordering the children of this element.\n    // This has the additional benefit of allowing an \"IPA\" setting\n    ...orderChildren(1, 3, 2, 4),\n    [theme.breakpoints.up(\"lg\")]: orderChildren(1, 2, 3, 4),\n  },\n}));\n\nconst orderChildren = (...children: number[]) => {\n  let styles: CSSProperties = { \"& > *\": { order: 100 } };\n  children.forEach((child, i) => {\n    styles[`& > :nth-child(${i + 1})`] = { order: child };\n  });\n  return styles;\n};\n\ninterface Props extends Clickable {}\n\n/**\n * Accepts an onClick option. This is assumed to be memoized.\n */\nconst Keyboard = (props: Props) => {\n  const classes = useStyles();\n  const { onClick } = props;\n\n  return (\n    <Grid container spacing={2} className={classes.childOrder}>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Consonants (Pulmonics)\n          </Typography>\n          <Pulmonics onClick={onClick} />\n          <Typography variant=\"caption\" align=\"center\" component=\"p\">\n            Symbols to the right in a cell are voiced, to the left are voiceless. Shaded areas\n            denote articulations judged impossible.\n          </Typography>\n        </Paper>\n      </Grid>\n      <Grid item xs={12} md={6}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Consonants (Non-pulmonics)\n          </Typography>\n          <NonPulmonics onClick={onClick} />\n        </Paper>\n      </Grid>\n      <Grid item xs={12} md={6}>\n        <Paper className={classes.paper}>\n          <Vowels onClick={onClick} />\n        </Paper>\n      </Grid>\n      <Grid item xs={12} md={8}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Diacritics\n          </Typography>\n          <Diacritics onClick={onClick} />\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default React.memo(Keyboard);\n","import { RefObject, useCallback, useDebugValue, useLayoutEffect, useReducer, useRef } from \"react\";\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface ValueAction<T> extends Action<T> {\n  value: string;\n}\n\nenum Op {\n  Delete,\n  Append,\n  Set,\n  Type,\n}\n\ntype Actions =\n  | Action<Op.Delete>\n  | ValueAction<Op.Append>\n  | ValueAction<Op.Set>\n  | ValueAction<Op.Type>;\n\ninterface State {\n  cursor: number;\n  value: string;\n  ref: RefObject<HTMLInputElement>;\n}\n\nfunction reducer(state: State, action: Actions): State {\n  const { value } = state;\n  // make broad assumptions about never having a large cursor selection\n  const cursor = state.ref?.current?.selectionStart || 0;\n  // console.log({ src: \"ref\", cursor: state.ref?.current?.selectionStart });\n  // console.log({ src: \"reducer\", cursor: cursor });\n  const cursorAfter = state.ref?.current?.selectionEnd || cursor;\n  switch (action.type) {\n    case Op.Delete:\n      if (cursor !== cursorAfter) {\n        return {\n          ...state,\n          cursor: cursor,\n          value: value.slice(0, cursor) + value.slice(cursorAfter, value.length),\n        };\n      } else if (cursor === 0) {\n        return state;\n      } else {\n        return {\n          ...state,\n          cursor: cursor - 1,\n          value: value.slice(0, cursor - 1) + value.slice(cursor, value.length),\n        };\n      }\n    case Op.Append:\n      return {\n        ...state,\n        cursor: cursor + action.value.length,\n        value: value.slice(0, cursor) + action.value + value.slice(cursorAfter, value.length),\n      };\n    case Op.Set:\n      return { ...state, value: action.value, cursor: action.value.length };\n    case Op.Type:\n      return { ...state, value: action.value };\n  }\n}\n\nconst useKeyboard = () => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [{ cursor, value }, dispatch] = useReducer(reducer, {\n    cursor: 0,\n    value: \"\",\n    ref: inputRef,\n  });\n\n  const handleKeyboard = useCallback(\n    (char: string) => dispatch({ type: Op.Append, value: char }),\n    []\n  );\n  const handleType = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => dispatch({ type: Op.Type, value: e.target.value }),\n    []\n  );\n  const handleDelete = useCallback(() => dispatch({ type: Op.Delete }), []);\n  const setValue = useCallback((val: string) => dispatch({ type: Op.Set, value: val }), []);\n\n  useLayoutEffect(() => {\n    // console.log(inputRef?.current?.selectionStart);\n    // console.log(cursor);\n    // Current hypothesis is that the value can end up getting updated after the element\n    // changes. If this happens, then chrome ends up with the cursor stuck at 0 ~half the time\n    // Edit: Still broken.\n    // setTimeout(() => {\n    // I tried both ways (leaving the text focused or not) and blur was a better experience\n    // console.log(inputRef?.current?.value);\n    const oldFocus = document.activeElement as HTMLInputElement;\n    inputRef.current?.focus();\n    inputRef.current?.setSelectionRange(cursor, cursor);\n    inputRef.current?.blur();\n    oldFocus?.focus();\n    // console.log(inputRef?.current?.selectionStart);\n    // console.log(cursor);\n    // }, 0);\n  }, [cursor]);\n\n  useDebugValue({ cursor: cursor, value: value });\n\n  return { handleKeyboard, handleDelete, handleType, setValue, value, ref: inputRef };\n};\n\nexport default useKeyboard;\n","import { STRESS } from \"./ipa\";\n\n// We will always prefer the multi char version of a symbol, so always expand it\nconst CANONICAL_FORMS = new Map([\n  [\"\", \"t\"],\n  [\"\", \"d\"],\n  [\"\", \"\"],\n  [\"\", \"\"],\n  // coerce an exclamation point to postalveolar click\n  [\"!\", \"\"],\n  // coerce an apostrophe to the ejective\n  [\"'\", STRESS],\n]);\n\nconst NORM = \"NFKD\";\n\nconst MATCHER = new RegExp(Array.from(CANONICAL_FORMS.keys()).join(\"|\"), \"gu\");\n\nconst normalize = (str: string) => {\n  const normalized = str.normalize(NORM);\n  return normalized.replaceAll(MATCHER, (match) => CANONICAL_FORMS.get(match) || \"\");\n};\n\nexport default normalize;\n","import {\n  Infer,\n  array,\n  boolean,\n  object,\n  optional,\n  record,\n  refine,\n  string,\n  union,\n} from \"superstruct\";\n\nexport type TaskFileDef = Infer<typeof TaskFile>;\nexport type TaskFileWord = Infer<typeof Word>;\nexport type TaskFileMacros = Infer<typeof Macros>;\nexport type TaskFileSegment = Infer<typeof Segment>;\n\nconst Macros = record(string(), array(string()));\n\nconst Segment = record(string(), union([boolean(), string()]));\n\nconst ValidateSegment = refine(Segment, \"Segment\", (segment, context) => {\n  const index = context.path[context.path.length - 1];\n  const parent = context.branch[context.branch.length - 1];\n\n  // Slightly hacky way of checking for current segment number and if last segment\n  if (typeof index === \"string\" || !Array.isArray(parent)) {\n    return \"Segments may only occur in arrays\";\n  }\n\n  for (const key in segment) {\n    if ((key.includes(\"...\") || key.includes(\"?\")) && segment[key] === true) {\n      return \"Correct options are not allowed to use wildcards\";\n    }\n  }\n\n  if (index < parent.length - 1) {\n    if (segment[\"\"] === true) {\n      return `You may only terminate with \"\" on the last segment`;\n    }\n\n    if (Object.values(segment).reduce((run: boolean, curr) => run && curr !== true, true)) {\n      return `There must be at least one valid value in segment`;\n    }\n  } else {\n    // Last segment\n    if (segment[\"\"] === true) {\n      for (const key in segment) {\n        if (key !== \"\" && segment[key] === true) {\n          return \"You must not have both a termination and another valid option in the last segment\";\n        }\n      }\n    }\n  }\n  // Validation successful\n  return true;\n});\n\nconst Word = object({\n  display: string(),\n  audio: optional(string()),\n  segments: array(ValidateSegment),\n});\n\nexport const TaskFile = object({\n  author: string(),\n  title: string(),\n  salt: optional(string()),\n  instructions: optional(string()),\n  macros: optional(Macros),\n  words: array(Word),\n});\n","import YAML from \"yaml\";\nimport escapeStringRegexp from \"escape-string-regexp\";\nimport normalize from \"../normalize\";\nimport { TaskFile, TaskFileMacros, TaskFileSegment } from \"../../data/task\";\nimport { assert } from \"superstruct\";\n\nexport interface TaskDef {\n  author: string;\n  title: string;\n  instructions?: string;\n  salt?: string;\n  macros: Macros;\n  words: Word[];\n}\n\ntype Explanations = Map<string, string>;\ninterface Wildcard {\n  matcher: string;\n  message: string;\n}\n\nexport interface WordSegment {\n  final?: boolean;\n  correct: string[];\n  explanations: Explanations;\n  wildcards?: Wildcard[];\n}\n\nexport interface Word {\n  display: string;\n  audio?: string;\n  segments: WordSegment[];\n}\n\ninterface SegmentMatch {\n  correct: boolean;\n  message?: string;\n}\n\nexport const DEFAULT_MESSAGE = \"Whoops, that's not right. Try again!\";\nexport const END_MESSAGE = \"Hmmm... Are you sure there's more sounds here?\";\nconst KLEENE_REPLACE = escapeStringRegexp(\"...\");\nconst ANY_REPLACE = escapeStringRegexp(\"?\");\n\nexport const wildcardToRegex = (wildcard: string) => {\n  const str = escapeStringRegexp(wildcard);\n  const kleene = str.replaceAll(KLEENE_REPLACE, \".*\").replaceAll(ANY_REPLACE, \".\");\n  return new RegExp(`^${kleene}$`, \"u\");\n};\n\n/**\n * Attempt to match a word segment\n * @param input The user inputted value to check\n * @param segment The word segment we are matching\n */\nexport const matchSegment = (rawInput: string, segment?: WordSegment): SegmentMatch => {\n  if (!segment) {\n    return { correct: false, message: END_MESSAGE };\n  }\n\n  const input = normalize(rawInput);\n\n  let message: string | undefined;\n  if (segment.correct.includes(input)) {\n    return { correct: true };\n  } else if ((message = segment.explanations.get(input))) {\n    return { correct: false, message: message };\n  } else if (segment.wildcards) {\n    // Do the wildcard lookup :(\n    const match = segment.wildcards.find(({ matcher }) => {\n      return wildcardToRegex(matcher).test(input);\n    });\n    if (match) {\n      return { correct: false, message: match.message };\n    }\n  }\n\n  // Return a the end message if there are no correct options\n  return { correct: false, message: segment.correct.length === 0 ? END_MESSAGE : DEFAULT_MESSAGE };\n};\n\ntype Macro = string;\n\ninterface Macros {\n  [k: string]: string[];\n}\n\nexport const expandMacro = (str: Macro, macros: Macros, encountered: string[] = []): string[] => {\n  if (macros.hasOwnProperty(str)) {\n    // Key exists\n    const newEncountered = [...encountered, str];\n    let results: string[] = [];\n\n    macros[str].forEach((value) => {\n      if (macros.hasOwnProperty(value) && !newEncountered.includes(value)) {\n        // If we find another macro we haven't encountered, append it's expansion\n        const expanded = expandMacro(value, macros, newEncountered);\n        results = results.concat(expanded);\n      } else {\n        results.push(value);\n      }\n    });\n    return results;\n  } else {\n    // Resolve the base case of no macros\n    return [str];\n  }\n};\n\nconst pickValues = <T, K extends keyof T>(values: T, ops: K[]): Pick<T, K> => {\n  let result = {} as Pick<T, K>;\n  ops.forEach((key) => {\n    result[key] = values[key];\n  });\n  return result;\n};\n\nconst getMacros = (macros: TaskFileMacros | undefined): Macros => {\n  if (macros) {\n    let result: Macros = {};\n    // iterate over record\n    for (const key in macros) {\n      // Todo: raise an error if a key is defined twice\n      result[normalize(key)] = macros[key].map(normalize);\n    }\n    return result;\n  } else {\n    return {};\n  }\n};\n\nconst getSegments = (segments: TaskFileSegment[], macros: Macros): WordSegment[] => {\n  const validSegments = segments.map(\n    (segment, i): WordSegment => {\n      let correct: string[] = [];\n      let wildcards: Wildcard[] = [];\n      const explanations = new Map<string, string>();\n\n      // Record iteration\n      for (const key in segment) {\n        const sym = normalize(key);\n        const value = segment[key];\n        if (value === true) {\n          // Correct value(s)\n          correct = correct.concat(expandMacro(sym, macros));\n        } else if (sym.includes(\"...\") || sym.includes(\"?\")) {\n          // Wildcard matcher\n          wildcards.push({ matcher: sym, message: value || DEFAULT_MESSAGE });\n        } else {\n          // We just have a normal explanation\n          expandMacro(sym, macros).forEach((expand) => {\n            explanations.set(expand, value || DEFAULT_MESSAGE);\n          });\n        }\n      }\n      return { correct, explanations, wildcards };\n    }\n  );\n\n  // Ensure we have a final element listed\n  const lastElement = validSegments[validSegments.length - 1];\n  if (lastElement.correct.length === 0) {\n    // Final element exists, but we don't have a termination identifier\n    lastElement.correct.push(\"\");\n    lastElement.final = true;\n  } else if (lastElement.correct.includes(\"\")) {\n    // All data is good. Mark as final\n    lastElement.final = true;\n  } else {\n    // No final element existed, so we create one\n    validSegments.push({ correct: [\"\"], explanations: new Map(), final: true });\n  }\n\n  return validSegments;\n};\n\n// TODO: Actually do validations and make this type safe\nexport const parseTask = (contents: string): TaskDef => {\n  const fileContents = YAML.parse(contents, { prettyErrors: true });\n\n  // TODO: Refactor to use validate instead\n  assert(fileContents, TaskFile);\n  const valid = fileContents;\n\n  const metadata = pickValues(valid, [\"author\", \"title\", \"salt\", \"instructions\"]);\n  const macros = getMacros(valid.macros);\n  const words = valid.words.map(\n    (word): Word => {\n      const meta = pickValues(word, [\"display\", \"audio\"]);\n      const segments = getSegments(word.segments, macros);\n      return { ...meta, segments };\n    }\n  );\n\n  return { ...metadata, macros, words };\n};\n","import { useCallback, useDebugValue, useEffect, useRef, useState } from \"react\";\n\ntype JSONSafe = string | number | boolean | null | Array<JSONSafe> | { [l: string]: JSONSafe };\n\nexport const usePersistentState = <T = JSONSafe>(\n  key: string,\n  defaultValue: T,\n  persistOnLoad = false\n): [T, React.Dispatch<React.SetStateAction<T>>] => {\n  const mount = useRef(false);\n  const [value, setValue] = useState(() => {\n    const stored = localStorage.getItem(key);\n    if (stored === null) {\n      return defaultValue;\n    } else {\n      return JSON.parse(stored) as T;\n    }\n  });\n\n  useDebugValue({ [key]: value });\n\n  const setter = useCallback((prevState: React.SetStateAction<T>) => {\n    setValue(prevState);\n  }, []);\n\n  useEffect(() => {\n    if (mount.current || persistOnLoad) {\n      localStorage.setItem(key, JSON.stringify(value));\n    } else {\n      mount.current = true;\n    }\n  }, [key, value, persistOnLoad]);\n\n  return [value, setter];\n};\n","import React from \"react\";\nimport { usePersistentState } from \"./usePersistentState\";\n\nconst DebugContext = React.createContext(false);\n\nexport const useDebugContext = () => React.useContext(DebugContext);\n\nconst Debug = (props: { children: React.ReactNode }) => {\n  const [debug, setDebug] = usePersistentState(\"debug_mode\", false);\n\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", (e) => {\n      if (e.key === \".\" && e.metaKey && e.shiftKey) {\n        setDebug((d) => !d);\n      }\n    });\n  }, [setDebug]);\n\n  // Register a way to toggle debugging for iOS, etc. disable in production\n  React.useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      window.toggleDebug = () => setDebug((d) => !d);\n    }\n  }, [setDebug]);\n\n  return <DebugContext.Provider value={debug}>{props.children}</DebugContext.Provider>;\n};\n\nexport default Debug;\n","import { Box, Grid, makeStyles } from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useMemo, useReducer } from \"react\";\nimport IPAInput from \"../keyboard/IPAInput\";\nimport Keyboard from \"../keyboard/Keyboard\";\nimport useKeyboard from \"../keyboard/useKeyboard\";\n\nimport { Word, matchSegment } from \"../../utils/parsers/task\";\nimport { useDebugContext } from \"../../utils/Debug\";\n\nconst useStyles = makeStyles((theme) => ({\n  sticky: {\n    zIndex: 10,\n    position: \"sticky\",\n    top: `${theme.spacing(-1)}px`,\n  },\n  search: {\n    backgroundColor: theme.palette.background.default,\n    borderRadius: \"8px\",\n  },\n  correct: {\n    color: theme.palette.type === \"dark\" ? theme.palette.success.main : theme.palette.success.dark,\n  },\n}));\n\ninterface Props {\n  word: Word;\n  onSubmit: () => void;\n}\n\nenum Op {\n  Reset,\n  SoftReset,\n  SetHeader,\n  NextSegment,\n  ErrorMessage,\n  ClearError,\n}\n\ninterface State {\n  word: Word;\n  segment: number;\n  header: string;\n  errorMessage?: string;\n  error: boolean;\n}\n\ninterface Action<T> {\n  type: T;\n}\n\ninterface SetAction<T, V> extends Action<T> {\n  value: V;\n}\n\ntype Act =\n  | SetAction<Op.Reset, Word>\n  | SetAction<Op.SoftReset, Word>\n  | SetAction<Op.SetHeader, string>\n  | SetAction<Op.NextSegment, string>\n  | SetAction<Op.ErrorMessage, string | undefined>\n  | Action<Op.ClearError>;\n\nconst reset = (word: Word) => {\n  return {\n    word,\n    segment: 0,\n    header: \"\",\n    error: false,\n  };\n};\n\nconst reducer = (state: State, action: Act): State => {\n  switch (action.type) {\n    case Op.SoftReset:\n      return Object.is(action.value, state.word) ? state : reset(action.value);\n    case Op.Reset:\n      return reset(action.value);\n    case Op.SetHeader:\n      return { ...state, header: action.value };\n    case Op.NextSegment: // Inc segment and add value to header\n      return { ...state, segment: state.segment + 1, header: state.header + action.value };\n    case Op.ClearError:\n      return state.error ? { ...state, error: false, errorMessage: undefined } : state;\n    case Op.ErrorMessage:\n      return { ...state, error: true, errorMessage: action.value };\n  }\n};\n\nconst WordInput = (props: Props) => {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const { word, onSubmit: handleSubmit } = props;\n  const { handleKeyboard, handleDelete, handleType, setValue, value, ref } = useKeyboard();\n  const [state, dispatch] = useReducer(reducer, word, reset);\n\n  useEffect(() => dispatch({ type: Op.SoftReset, value: word }), [word]);\n  useEffect(() => dispatch({ type: Op.ClearError }), [value]);\n\n  // Run validation logic. If the\n  const handleCheck = useCallback(\n    (currentValue: string) => {\n      // Make life easier with debug mode\n      if (debug && currentValue === \"winston\") {\n        setValue(\"\");\n        dispatch({ type: Op.SetHeader, value: currentValue });\n        handleSubmit();\n        return;\n      }\n\n      // IDEA:  add an optional \"accept_multiple\" that will allow submission\n      //        of multiple segments at once.\n      const segment = word.segments[state.segment];\n      const match = matchSegment(currentValue, segment);\n      if (match.correct) {\n        dispatch({ type: Op.NextSegment, value: currentValue });\n        setValue(\"\"); // Clear the text box\n        if (segment.final) {\n          handleSubmit();\n        }\n      } else {\n        // If not a match, set the error text\n        dispatch({ type: Op.ErrorMessage, value: match.message });\n      }\n    },\n    [word, state.segment, setValue, handleSubmit, debug]\n  );\n\n  const { header, error, errorMessage } = state;\n\n  const headerValue = useMemo(() => header && <span className={classes.correct}>{header}</span>, [\n    header,\n    classes.correct,\n  ]);\n\n  return (\n    <div>\n      <Box paddingY={2} className={classes.sticky}>\n        <Grid container alignItems=\"center\" justify=\"center\" spacing={2}>\n          <Grid item xs md={8} className={classes.search}>\n            <IPAInput\n              placeholder={`Transcribe \"${word.display}\"`}\n              value={value}\n              onDelete={handleDelete}\n              onType={handleType}\n              inputRef={ref}\n              onCheck={handleCheck}\n              header={headerValue}\n              error={error}\n              helpText={errorMessage}\n              headerTooltip=\"Correct!\"\n            />\n          </Grid>\n        </Grid>\n      </Box>\n\n      <Keyboard onClick={handleKeyboard} />\n    </div>\n  );\n};\n\nexport default WordInput;\n","import base64 from \"base64-js\";\n\nconst normName = (name: string) => {\n  return name\n    .toLowerCase()\n    .replace(/[\\s-]+/g, \"-\")\n    .replace(/[^a-zA-Z0-9-]/g, \"\");\n};\n\nasync function sha1sum(bytes: ArrayBuffer) {\n  const buf = await crypto.subtle.digest(\"SHA-256\", bytes);\n  return base64.fromByteArray(new Uint8Array(buf));\n}\n\nconst EPOCH = new Date(\"2020-02-02\");\n\nconst SHA_LENGTH = 16;\n\nconst minuteOfYear = () => {\n  const now = new Date();\n  return Math.floor((now.getTime() - EPOCH.getTime()) / 1000 / 60);\n};\n\n// Assume the second string is shorter\nexport const interleave = (longer: string, shorter: string): string => {\n  const interleaved: string[] = [shorter.length.toString(36)];\n  for (let i = 0; i < shorter.length; i++) {\n    interleaved.push(longer.charAt(i));\n    interleaved.push(shorter.charAt(i));\n  }\n  interleaved.push(longer.slice(shorter.length, longer.length));\n  return interleaved.join(\"\");\n};\n\n// Assume the second string is shorter\nexport const deinterleave = (encoded: string): [string, string] => {\n  const length = parseInt(encoded.charAt(0), 36);\n  const interleaved = encoded.slice(1, encoded.length);\n  const longer: string[] = [];\n  const shorter: string[] = [];\n  for (let i = 0; i < length * 2; i += 2) {\n    longer.push(interleaved.charAt(i));\n    shorter.push(interleaved.charAt(i + 1));\n  }\n  longer.push(interleaved.slice(length * 2, interleaved.length));\n  return [longer.join(\"\"), shorter.join(\"\")];\n};\n\nexport const computeHash = async (\n  name: string | undefined,\n  salt: string,\n  run: boolean = true,\n  time?: string\n) => {\n  if (typeof name === \"undefined\" || !run) {\n    return;\n  }\n\n  const outName = normName(name);\n  const outTime = (time || minuteOfYear().toString(36)).toLowerCase();\n  const nameTime = `${outName}_${outTime}`;\n  const input = [nameTime, salt].join(\"_\");\n\n  const sha1 = await sha1sum(new TextEncoder().encode(input));\n\n  // Remove special characters and limit to the first 16 chars\n  const cleanupSha1 = sha1.replace(/[+/=]/g, \"\").toLowerCase().slice(0, SHA_LENGTH);\n  const interleaved = interleave(cleanupSha1, outTime);\n  return [outName, interleaved].join(\"_\");\n};\n\nexport const validateHash = async (hash: string, salt: string) => {\n  const lowerHash = hash.toLowerCase();\n  const [name, interleaved] = lowerHash.split(\"_\", 2);\n  if (!(name && interleaved)) {\n    return false;\n  }\n  const [sha, time] = deinterleave(interleaved);\n  if (sha?.length !== SHA_LENGTH) {\n    console.warn(\"sha segment differs from expected length.\");\n  }\n  const expected = await computeHash(name, salt, true, time);\n  return expected === lowerHash;\n};\n","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Button, Grid, TextField, Tooltip, Typography } from \"@material-ui/core\";\nimport { computeHash } from \"../../utils/validation\";\n\nimport AssignmentIcon from \"@material-ui/icons/Assignment\";\n\ninterface Props {\n  prompt?: string;\n  salt?: string;\n  debug?: boolean;\n}\n\nconst DEFAULTS = {\n  prompt: \"Name\",\n  salt: \"R167\",\n  debug: false,\n} as const;\n\nconst SubmitCode = (props: Props) => {\n  const { salt, debug, prompt } = { ...DEFAULTS, ...props };\n  const [name, setName] = useState<string | undefined>();\n  const [run, setRun] = useState(false);\n  const [open, setOpen] = useState(false);\n  const inputRef = useRef<HTMLInputElement>();\n  const timer = useRef<number | undefined>();\n\n  const { result } = useAsync(computeHash, [name, salt, run]);\n\n  const displayValue = result ? result : name;\n\n  const copyText = useCallback(() => {\n    if (inputRef.current) {\n      const e = inputRef.current;\n      e.select();\n      e.setSelectionRange(0, e.value.length);\n      document.execCommand(\"copy\");\n      setOpen(true);\n      window.clearTimeout(timer.current);\n      timer.current = window.setTimeout(() => setOpen(false), 2000);\n    }\n  }, []);\n\n  const button = run ? (\n    <Button variant=\"contained\" color=\"primary\" onClick={copyText} startIcon={<AssignmentIcon />}>\n      Copy\n    </Button>\n  ) : (\n    <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n      Submit\n    </Button>\n  );\n\n  const handleSubmit = useCallback((e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setRun(true);\n  }, []);\n\n  useEffect(() => {\n    if (run && result) {\n      copyText();\n    }\n  }, [result, run, copyText]);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Grid container spacing={2} alignItems=\"center\" justify=\"center\">\n        <Grid item xs={12} sm={10} md={8} lg={6}>\n          <Typography variant=\"h6\" component=\"p\" gutterBottom>\n            Congratulations on finishing this assignment! Type your {prompt} below and hit submit to\n            receive a unique code for completion.\n          </Typography>\n          <Tooltip\n            PopperProps={{\n              disablePortal: true,\n            }}\n            open={open}\n            disableFocusListener\n            disableHoverListener\n            disableTouchListener\n            title={<Typography variant=\"subtitle2\">Copied code!</Typography>}\n          >\n            <TextField\n              label={prompt}\n              variant=\"filled\"\n              InputProps={{\n                readOnly: !!result,\n              }}\n              inputRef={inputRef}\n              fullWidth\n              onChange={(e) => setName(e.target.value)}\n              value={displayValue}\n            />\n          </Tooltip>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container justify=\"center\" spacing={2}>\n            <Grid item>{button}</Grid>\n            {debug && (\n              <Grid item>\n                <Button variant=\"contained\" color=\"primary\" onClick={() => setRun(false)}>\n                  Reset\n                </Button>\n              </Grid>\n            )}\n          </Grid>\n        </Grid>\n      </Grid>\n    </form>\n  );\n};\n\nexport default SubmitCode;\n","import React, { useCallback, useEffect, useMemo, useReducer } from \"react\";\nimport AudioContext from \"../../utils/AudioContext\";\n\nimport { TaskDef } from \"../../utils/parsers/task\";\nimport {\n  Button,\n  Collapse,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Typography,\n} from \"@material-ui/core\";\nimport WordInput from \"./WordInput\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport { useDebugContext } from \"../../utils/Debug\";\nimport SubmitCode from \"./SubmitCode\";\n\ninterface TaskProps {\n  baseUrl: string;\n  task: TaskDef;\n}\n\nenum Op {\n  DismissModal,\n  Submit,\n  ModalExit,\n}\n\ninterface State {\n  modalWord: number;\n  currWord: number;\n  wordCount: number;\n  showModal: boolean;\n  showWord: boolean;\n}\n\nconst reducer = (state: State, action: Op): State => {\n  const { currWord, wordCount } = state;\n  switch (action) {\n    case Op.DismissModal:\n      const nextWord = currWord + 1;\n      if (nextWord < wordCount) {\n        return { ...state, showModal: false, currWord: currWord + 1 };\n      } else {\n        return { ...state, showModal: false, showWord: false };\n      }\n    case Op.Submit:\n      return { ...state, showModal: true };\n    case Op.ModalExit:\n      // Modal text needs to be delayed by one\n      return { ...state, modalWord: currWord };\n  }\n};\n\nconst useDispatch = <T,>(dispatch: React.Dispatch<T>, op: T) =>\n  useCallback(() => dispatch(op), [op, dispatch]);\n\nconst Task = React.memo((props: TaskProps) => {\n  const { task, baseUrl } = props;\n  const { title, words, instructions } = task;\n\n  const [{ currWord, modalWord, showModal, showWord }, dispatch] = useReducer(reducer, {\n    modalWord: 0,\n    currWord: 0,\n    wordCount: words.length,\n    showModal: false,\n    showWord: true,\n  });\n\n  const debug = useDebugContext();\n  const word = words[currWord];\n\n  const handleSubmit = useDispatch(dispatch, Op.Submit);\n  const dismissModal = useDispatch(dispatch, Op.DismissModal);\n  const handleModalExit = useDispatch(dispatch, Op.ModalExit);\n\n  const lastWord = words.length - 1;\n\n  useEffect(() => window.scroll({ top: 0, behavior: \"smooth\" }), [currWord, showWord]);\n\n  // Create an audio context on first user interaction. Reduces audio playing delay\n  useEffect(() => {\n    const create = () => {\n      document.removeEventListener(\"click\", create);\n      new AudioContext({\n        latencyHint: \"interactive\",\n      });\n    };\n    document.addEventListener(\"click\", create);\n  }, []);\n\n  const audioFile = useMemo(() => {\n    if (word.audio) {\n      const audioUrl = new URL(word.audio, baseUrl).toString();\n      const element = new Audio(audioUrl);\n      return element;\n    }\n  }, [word.audio, baseUrl]);\n\n  const playAudio = useCallback(() => {\n    if (audioFile) {\n      try {\n        audioFile.currentTime = 0;\n        audioFile.play();\n      } catch {\n        console.error({ message: \"unable to play url\", src: audioFile.src });\n      }\n    }\n  }, [audioFile]);\n\n  return (\n    <div>\n      <Typography variant=\"h3\" component=\"h2\" gutterBottom align=\"center\">\n        {title}\n      </Typography>\n\n      <Collapse in={showWord}>\n        <Typography variant=\"body1\" gutterBottom>\n          {instructions}\n        </Typography>\n        <Typography variant=\"h4\" component=\"p\" align=\"center\">\n          {currWord + 1}/{words.length}: Transcribe \"{word.display}\"{\" \"}\n          <Button\n            variant=\"contained\"\n            color=\"secondary\"\n            startIcon={<PlayCircleFilledIcon />}\n            onClick={playAudio}\n            disabled={!audioFile}\n          >\n            Play\n          </Button>\n        </Typography>\n        <WordInput word={word} onSubmit={handleSubmit} />\n      </Collapse>\n      <Collapse in={!showWord}>\n        <SubmitCode salt={task.salt} debug={debug} />\n      </Collapse>\n\n      <Dialog\n        open={showModal}\n        onClose={dismissModal}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n        disableRestoreFocus={!debug}\n        onExited={handleModalExit}\n      >\n        <DialogTitle id=\"alert-dialog-title\">Congrats! You got it correct</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            You did a good job of getting the word correct!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={dismissModal}\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={!showModal}\n            autoFocus\n            disableFocusRipple\n          >\n            {modalWord < lastWord ? \"Next word\" : \"Finish\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n});\n\nexport default Task;\n","import React from \"react\";\n\nimport { Typography } from \"@material-ui/core\";\nimport { useAsync } from \"react-async-hook\";\nimport { parseTask } from \"../../utils/parsers/task\";\nimport Task from \"./Task\";\nimport { fullBaseUrl } from \"../../constants\";\n\nimport { StructError } from \"superstruct\";\n\nconst fetchTask = async (taskFileUrl: string) => {\n  if (!taskFileUrl) {\n    // Absurd. klass will actually always be defined\n    console.log(\"empty task\");\n    return;\n  }\n\n  const req = await fetch(taskFileUrl);\n  const body = await req.text();\n\n  return parseTask(body);\n};\n\ninterface StatusProps {\n  msg: string;\n  error?: boolean;\n}\n\nconst Status = ({ msg, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"p\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {msg}\n  </Typography>\n);\n\ninterface LoadProps {\n  taskFileUrl: string;\n}\n\n/**\n * Wrapper around the Task with loading state\n */\nconst LoadTask = (props: LoadProps) => {\n  const { taskFileUrl } = props;\n  const task = useAsync(fetchTask, [taskFileUrl]);\n  const baseUrl = new URL(taskFileUrl, fullBaseUrl()).toString();\n\n  if (task.result) {\n    return <Task task={task.result} baseUrl={baseUrl} />;\n  } else if (task.loading) {\n    return (\n      <div>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Loading...\n        </Typography>\n      </div>\n    );\n  } else if (task.error) {\n    console.error(task.error);\n    if (task.error instanceof StructError) {\n      return <Status error msg={task.error.message} />;\n    } else {\n      return <Status error msg=\"Cannot load task file\" />;\n    }\n  } else {\n    return <Status error msg=\"Unreachable state???\" />;\n  }\n};\n\nexport default LoadTask;\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { fileUrl } from \"../../constants\";\nimport LoadTask from \"./LoadTask\";\n\nconst RouteTask = () => {\n  const { klass, assignment } = useParams<{ klass: string; assignment: string }>();\n  return <LoadTask taskFileUrl={fileUrl(klass, `${assignment}.yaml`)} />;\n};\n\nexport default RouteTask;\n","import React from \"react\";\n\nimport { Box, Button, Grid, Paper, Typography } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\n\ninterface TaskInfo {\n  name: string;\n  description: string;\n  file: string;\n  hidden?: boolean;\n}\n\ninterface Props {\n  tasks: TaskInfo[];\n  path: string;\n}\n\nconst taskLink = (path: string, file: string) => `${path}/${file.replace(\".yaml\", \"\")}`;\n\nconst TaskList = (props: Props) => {\n  const { tasks, path } = props;\n\n  if (tasks.length === 0) {\n    return <Typography>No tasks to do</Typography>;\n  } else {\n    return (\n      <Grid container spacing={4}>\n        {tasks.map(\n          (task: TaskInfo, i: number) =>\n            !task.hidden && (\n              <Grid item key={`tasklist-${i}`} lg={6} xs={12}>\n                <Box\n                  component={Paper}\n                  p={2}\n                  height=\"100%\"\n                  display=\"flex\"\n                  alignContent=\"space-between\"\n                  alignItems=\"flex-start\"\n                  flexWrap=\"wrap\"\n                >\n                  <Box>\n                    <Typography color=\"primary\" gutterBottom>\n                      {task.name}\n                    </Typography>\n                    <Typography variant=\"body2\" gutterBottom>\n                      {task.description}\n                    </Typography>\n                  </Box>\n                  <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"flex-end\" width=\"100%\">\n                    <Button\n                      component={Link}\n                      color=\"secondary\"\n                      variant=\"contained\"\n                      to={taskLink(path, task.file)}\n                    >\n                      Work on task\n                    </Button>\n                  </Box>\n                </Box>\n              </Grid>\n            )\n        )}\n      </Grid>\n    );\n  }\n};\n\nexport default TaskList;\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { useManifest } from \"../Manifest\";\n\nimport { useAsync } from \"react-async-hook\";\nimport { TASK_FILE, fileUrl } from \"../constants\";\nimport YAML from \"yaml\";\nimport { Typography } from \"@material-ui/core\";\nimport { TaskList } from \"./Task\";\n\ninterface MatchParams {\n  klass: string;\n}\n\ninterface Props extends RouteComponentProps<MatchParams> {}\n\nconst fetchClassTasks = async (classId: string) => {\n  if (!classId) {\n    // Absurd. klass will actually always be defined\n    console.log(\"empty class\");\n    return;\n  }\n  const url = fileUrl(classId, TASK_FILE);\n\n  const req = await fetch(url);\n  const body = await req.text();\n\n  return YAML.parse(body, { prettyErrors: true });\n};\n\ninterface StatusProps {\n  msg: string;\n  error?: boolean;\n}\n\nconst Status = ({ msg, error }: StatusProps) => (\n  <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n    {error && \"Error: \"}\n    {msg}\n  </Typography>\n);\nconst ClassPage = (props: Props) => {\n  const classId = props.match.params.klass;\n\n  const manifest = useManifest();\n  const klass = manifest?.result?.classes?.find(({ folder }) => classId === folder);\n  // classTasks can begin loading before we confirm classId\n  const classTasks = useAsync(fetchClassTasks, [classId]);\n\n  /**\n   * Cases:\n   * if classTasks.result : Good\n   * while loading class && manifest: Class name\n   * while loading manifest: Loading...\n   * if (classTasks.error) : \"cannot load class X\"\n   *\n   */\n\n  if (classTasks.result) {\n    const { title, description, tasks } = classTasks.result;\n    return (\n      <div>\n        <div>\n          <Typography variant=\"h3\" component=\"h1\" gutterBottom align=\"center\">\n            {title}\n          </Typography>\n          <Typography variant=\"subtitle1\" gutterBottom align=\"center\">\n            {description}\n          </Typography>\n        </div>\n        <Typography variant=\"h5\" gutterBottom>\n          Assignments:\n        </Typography>\n        <TaskList tasks={tasks} path={props.location.pathname} />\n      </div>\n    );\n  } else if (classTasks.loading && klass) {\n    return (\n      <div>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n          Loading {klass.name}...\n        </Typography>\n      </div>\n    );\n  } else if (manifest.loading || classTasks.loading) {\n    return (\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\n        Loading...\n      </Typography>\n    );\n  } else if (classTasks.error) {\n    if (klass) {\n      return <Status error msg=\"Cannot load class task file\" />;\n    } else {\n      return <Status error msg=\"No such class exists\" />;\n    }\n  } else {\n    return <Status error msg=\"Unreachable state???\" />;\n  }\n};\n\nexport default ClassPage;\n","import { Box, Link, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link as RLink } from \"react-router-dom\";\n\nconst Homepage = () => {\n  return (\n    <Box paddingY={2}>\n      <Typography align=\"center\" variant=\"h3\" component=\"h1\" gutterBottom>\n        Welcome to Int IPA\n      </Typography>\n      <Typography variant=\"h5\" component=\"p\">\n        This is just some place holder text right now. I'm not really sure what you want on this\n        page. One possible option is a self description, etc. I don't really know. Here's a link to\n        the{\" \"}\n        <Link component={RLink} to=\"/type\" color=\"primary\">\n          the IPA keyboard\n        </Link>\n        .\n      </Typography>\n    </Box>\n  );\n};\n\nexport default Homepage;\n","import React from \"react\";\nimport { Box, Grid, makeStyles } from \"@material-ui/core\";\n\nimport Keyboard from \"./keyboard/Keyboard\";\n\nimport useKeyboard from \"./keyboard/useKeyboard\";\n\nimport IPAInput from \"./keyboard/IPAInput\";\n\nconst useStyles = makeStyles((theme) => ({\n  sticky: {\n    zIndex: 10,\n    position: \"sticky\",\n    top: `${theme.spacing(-1)}px`,\n  },\n  search: {\n    backgroundColor: theme.palette.background.default,\n    borderRadius: \"8px\",\n  },\n}));\n\nconst TypeIPA = () => {\n  const { handleKeyboard, handleDelete, handleType, value, ref } = useKeyboard();\n  const classes = useStyles();\n\n  return (\n    <div>\n      <Box paddingY={2} className={classes.sticky}>\n        <Grid container alignItems=\"center\" justify=\"center\" spacing={2}>\n          <Grid item xs md={8} className={classes.search}>\n            <IPAInput value={value} inputRef={ref} onType={handleType} onDelete={handleDelete} />\n          </Grid>\n        </Grid>\n      </Box>\n      <Keyboard onClick={handleKeyboard} />\n    </div>\n  );\n};\n\nexport default TypeIPA;\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport ClassPage from \"./components/ClassPage\";\nimport Homepage from \"./components/Homepage\";\nimport { RouteTask } from \"./components/Task\";\nimport TypeIPA from \"./components/TypeIPA\";\n\nconst Router = () => {\n  return (\n    <Switch>\n      <Route path=\"/type\" exact component={TypeIPA} />\n      <Route path=\"/\" exact component={Homepage} />\n      <Route path=\"/class/:klass\" exact component={ClassPage} />\n      <Route path=\"/class/:klass/:assignment\" exact component={RouteTask} />\n    </Switch>\n  );\n};\n\nexport default Router;\n","import { Theme } from \"@material-ui/core\";\n\nexport const notchGutters = (theme: Theme) => ({\n  paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(2)}px)`,\n  [theme.breakpoints.up(\"sm\")]: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(3)}px)`,\n    paddingRight: `max(env(safe-area-inset-right, 0px), ${theme.spacing(3)}px)`,\n  },\n});\n","import React, { useCallback, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Box,\n  Divider,\n  Drawer,\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Switch,\n  Theme,\n  Toolbar,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\";\n\nimport { Link, matchPath, useLocation } from \"react-router-dom\";\n\nimport { useManifest } from \"../Manifest\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport { grey } from \"@material-ui/core/colors\";\nimport { notchGutters } from \"../utils/styles\";\n\nconst DRAWER_WIDTH = 275;\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  itemGutters: {\n    paddingLeft: `max(env(safe-area-inset-left, 0px), ${theme.spacing(2)}px)`,\n  },\n  gutters: notchGutters(theme),\n}));\n\nconst Loading = ({ error }: { error?: boolean }) => (\n  <>\n    <ListItem>\n      <ListItemText primary={error ? \"Error loading classes.\" : \"Loading classes...\"} />\n    </ListItem>\n    <LinearProgress />\n  </>\n);\n\ninterface ListLinkProps {\n  gutters: string;\n  to: string;\n  text: string;\n  exact?: boolean;\n  icon?: JSX.Element;\n}\n\nconst ListLink = (props: ListLinkProps) => {\n  const { pathname } = useLocation();\n  const { to, text, icon, exact, gutters } = props;\n\n  const selected = !!matchPath(pathname, { path: to, exact: exact });\n\n  return (\n    <ListItem button component={Link} to={to} selected={selected} classes={{ gutters: gutters }}>\n      {icon && <ListItemIcon>{icon}</ListItemIcon>}\n      <ListItemText primary={text} />\n    </ListItem>\n  );\n};\n\nconst DarkSwitch = withStyles({\n  switchBase: {\n    color: grey[100],\n    \"&$checked\": {\n      color: \"black\",\n    },\n    \"&$checked + $track\": {\n      backgroundColor: grey[500],\n    },\n  },\n  checked: {},\n  track: {},\n})(Switch);\n\ninterface Props {\n  darkMode: boolean;\n  changeDarkMode: (mode: boolean) => void;\n}\n\nconst Header = (props: Props) => {\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n\n  const { changeDarkMode } = props;\n\n  const { result, loading, error } = useManifest();\n\n  const openDrawer = useCallback(() => {\n    setDrawer(true);\n  }, []);\n  const closeDrawer = useCallback(() => {\n    setDrawer(false);\n  }, []);\n\n  const toggleDarkMode = useCallback(\n    (event) => {\n      changeDarkMode(event.target.checked);\n    },\n    [changeDarkMode]\n  );\n\n  const list = (\n    <Box width=\"100%\">\n      <List>\n        <ListLink to=\"/\" text=\"Home\" icon={<HomeIcon />} exact gutters={classes.itemGutters} />\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Classes</ListSubheader>\n        {error && <Loading error />}\n        {loading && <Loading />}\n        {result &&\n          result.classes.map(\n            ({ name, folder, hidden }, i) =>\n              !hidden && (\n                <ListLink\n                  key={`class-list-${i}`}\n                  to={`/class/${folder}`}\n                  text={name}\n                  gutters={classes.itemGutters}\n                />\n              )\n          )}\n      </List>\n      <Divider />\n      <List>\n        <ListSubheader classes={{ gutters: classes.itemGutters }}>Tools</ListSubheader>\n        <ListLink\n          to=\"/type\"\n          text=\"IPA Keyboard\"\n          icon={<KeyboardIcon />}\n          exact\n          gutters={classes.itemGutters}\n        />\n      </List>\n    </Box>\n  );\n\n  return (\n    <div>\n      <Drawer anchor=\"left\" open={drawer} onClose={closeDrawer}>\n        <Box\n          display=\"flex\"\n          flexWrap=\"wrap\"\n          width={DRAWER_WIDTH}\n          alignContent=\"space-between\"\n          alignItems=\"flex-start\"\n          height=\"100%\"\n          overflow=\"hidden\"\n          role=\"presentation\"\n        >\n          {list}\n          <Box width=\"100%\" mb={2}>\n            <Typography component=\"div\">\n              <Grid component=\"label\" container justify=\"center\" alignItems=\"center\" spacing={1}>\n                <Grid item>Light</Grid>\n                <Grid item>\n                  <DarkSwitch color=\"default\" checked={props.darkMode} onChange={toggleDarkMode} />\n                </Grid>\n                <Grid item>Dark</Grid>\n              </Grid>\n            </Typography>\n          </Box>\n        </Box>\n      </Drawer>\n\n      <AppBar position=\"static\" color=\"secondary\">\n        <Toolbar classes={{ gutters: classes.gutters }}>\n          <IconButton onClick={openDrawer} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\">Int IPA</Typography>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n};\n\nexport default Header;\n","import React, { useEffect } from \"react\";\n\nimport Router from \"./Router\";\nimport { Container, CssBaseline, Snackbar } from \"@material-ui/core\";\nimport Header from \"./components/Header\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { ThemeOptions, createMuiTheme } from \"@material-ui/core/styles\";\nimport { blue, indigo } from \"@material-ui/core/colors\";\nimport { Theme, makeStyles, useMediaQuery } from \"@material-ui/core\";\nimport { notchGutters } from \"./utils/styles\";\nimport { useDebugContext } from \"./utils/Debug\";\nimport { usePersistentState } from \"./utils/usePersistentState\";\n\nconst lightTheme: ThemeOptions = {\n  palette: {\n    type: \"light\",\n    primary: {\n      main: blue[900],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst darkTheme: ThemeOptions = {\n  palette: {\n    type: \"dark\",\n    primary: {\n      main: blue[500],\n    },\n    secondary: {\n      main: indigo[700],\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  // Modified from source\n  // https://github.com/mui-org/material-ui/blob/v4.11.0/packages/material-ui/src/Container/Container.js\n  containerRoot: {\n    width: \"100%\",\n    boxSizing: \"border-box\",\n    display: \"block\", // Fix IE 11 layout when used with main.\n    margin: theme.spacing(1, \"auto\", \"env(safe-area-inset-bottom, 0px)\"),\n    ...notchGutters(theme),\n  },\n  debug: {\n    pointerEvents: \"none\",\n    zIndex: 1150,\n  },\n  debugRoot: {\n    minWidth: 0,\n    background: \"rgba(240, 240, 240, 0.25)\",\n    color: theme.palette.text.disabled,\n  },\n}));\n\nconst DARK_KEY = \"useDarkMode\";\n\nexport default function App() {\n  const classes = useStyles();\n  const debug = useDebugContext();\n\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const [dark, setDark] = usePersistentState<boolean | null>(DARK_KEY, null);\n\n  useEffect(() => {\n    if (process.env.NODE_ENV !== \"production\") {\n      document.title = `${process.env.NODE_ENV.slice(0, 3)} - ${document.title}`;\n    }\n  }, []);\n\n  const darkMode = dark === null ? prefersDarkMode : dark;\n\n  const theme = React.useMemo(() => createMuiTheme(darkMode ? darkTheme : lightTheme), [darkMode]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Header darkMode={darkMode} changeDarkMode={setDark} />\n      <Container maxWidth=\"lg\" classes={{ root: classes.containerRoot }}>\n        <Router />\n      </Container>\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        open={debug}\n        message=\"Debug mode\"\n        className={classes.debug}\n        ContentProps={{ classes: { root: classes.debugRoot }, elevation: darkMode ? 1 : 0 }}\n      />\n    </ThemeProvider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// import \"./index.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport Manifest from \"./Manifest\";\nimport Debug from \"./utils/Debug\";\nimport smoothscroll from \"smoothscroll-polyfill\";\n\nimport { HashRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Debug>\n      <Manifest>\n        <HashRouter>\n          <App />\n        </HashRouter>\n      </Manifest>\n    </Debug>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nsmoothscroll.polyfill();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}